(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[         0,          0]
NotebookDataLength[    269638,       5978]
NotebookOptionsPosition[    265367,       5839]
NotebookOutlinePosition[    265832,       5857]
CellTagsIndexPosition[    265789,       5854]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell["\<\
This file is part of scl, a control and simulation library for robots and \
biomechanical models.scl is free software; you can redistribute it and/or \
modify it under the terms of the GNU Lesser General Public License as \
published by the Free Software Foundation; either version 3 of the License,or \
(at your option) any later version.
Alternatively, you can redistribute it and/or modify it under the terms of \
the GNU General Public License as published by the Free Software \
Foundation;either version 2 of the License,or (at your option) any later \
version.scl is distributed in the hope that it will be useful, but WITHOUT \
ANY WARRANTY;without even the implied warranty of MERCHANTABILITY or FITNESS \
FOR A PARTICULAR PURPOSE. See the GNU General Public License for more \
details. You should have received a copy of the 
GNU Lesser General Public License and a copy of the GNU General Public \
License along with scl. If not, see <http://www.gnu.org/licenses/>. 

     \\file   Math_RPPBot.nb
Created on : July 9,2012
   Author  : Samir Menon<smenon@stanford.edu>\
\>", "Text",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, {3.55144404487539*^9, 3.5514440640893087`*^9}, {
   3.551444097390264*^9, 3.551444145046296*^9}, {3.55146572929366*^9, 
   3.551465815519741*^9}, 3.552103677906786*^9, 3.552103763781135*^9, 
   3.552103837589809*^9, 3.552145625726808*^9, 3.5521481923238564`*^9},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[" Control tutorial :  RPPBot", "Title",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, {3.55144404487539*^9, 3.5514440640893087`*^9}, {
   3.551444097390264*^9, 3.551444186378139*^9}, 3.5521036779068623`*^9, 
   3.552103763781177*^9, 3.552103837589978*^9, 3.5521456257269583`*^9, 
   3.552148192323921*^9}],

Cell["\<\
The RPP robot has 3 degrees of freedom, revolute-prismatic-prismatic and can \
position its hand in 3D cartesian coordinates xyz, or can orient its hand in \
1D rotational (z-axis) coordinates.

Here, we will develop control equations for the RPPBot. The equations will \
allow joint space dynamic control as well as operational space dynamic \
control. The RPP bot has 3 dof and also has a 3 dof range space and so the \
controllers will both be 3 dimensional.\
\>", "Text",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, {3.55144404487539*^9, 3.5514440640893087`*^9}, {
   3.551444097390264*^9, 3.55144414932955*^9}, {3.551444209118347*^9, 
   3.551444272283017*^9}, {3.5514654550200453`*^9, 3.551465460463891*^9}, {
   3.552096681692646*^9, 3.5520967274019213`*^9}, 3.552103677906919*^9, 
   3.5521037637812147`*^9, 3.552103837590139*^9, 3.552145625727138*^9, 
   3.552148192323985*^9},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell["Helper Functions", "Section",
 CellChangeTimes->{{3.551465470202866*^9, 3.5514654803064947`*^9}, 
   3.5521036779069643`*^9, 3.552103763781238*^9, 3.552103837590242*^9, 
   3.552145625727242*^9, 3.552148192324024*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Some", " ", "useful", " ", 
    RowBox[{"functions", " ", ":"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"Reshape", "[", 
     RowBox[{"list_", ",", "dimensions_"}], "]"}], ":=", 
    RowBox[{"First", "[", 
     RowBox[{"Fold", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Partition", "[", 
         RowBox[{"#1", ",", "#2"}], "]"}], "&"}], ",", 
       RowBox[{"Flatten", "[", "list", "]"}], ",", 
       RowBox[{"Reverse", "[", "dimensions", "]"}]}], "]"}], "]"}]}], 
   ";"}]}]], "Input",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444288197908*^9}, 3.552103677907158*^9, 3.552103763781423*^9, 
   3.552103837590987*^9, 3.552145625727862*^9, 3.552148192324295*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Computing Kinematics and Dynamics", "Section",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444339695985*^9}, 3.552103677907208*^9, 3.552103763781459*^9, 
   3.552103837591139*^9, 3.552145625727911*^9, 3.552148192324353*^9}],

Cell[CellGroupData[{

Cell[TextData[StyleBox["The generalized coordinates : q",
 FontWeight->"Bold"]], "Subsection",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444374140011*^9}, {3.551444409577322*^9, 3.551444465037956*^9}, {
   3.5514449658319473`*^9, 3.5514449700389957`*^9}, 3.5521036779072447`*^9, 
   3.552103763781493*^9, 3.552103837591282*^9, 3.55214562572795*^9, 
   3.552148192324404*^9}],

Cell["\<\
The gen coords are one possible minimal set of variables that are necessary \
and sufficient to describe the configuration of the robot. By
convention, we shall call these 'q'. The generalized velocities, and \
accelerations as a consequence, are dq and ddq.

For RPPBot, a suitable set of generalized coordinates is one joint angle and \
two joint positions.\
\>", "Text",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444374140011*^9}, {3.551444409577322*^9, 3.551444465037956*^9}, {
   3.5514449658319473`*^9, 3.551444972648337*^9}, {3.5514654936016417`*^9, 
   3.5514654971909018`*^9}, 3.5521036779072943`*^9, 3.552103763781534*^9, 
   3.552103837591454*^9, 3.5521456257280073`*^9, 3.552148192324471*^9},
 FontFamily->"Courier"],

Cell[BoxData[
 RowBox[{
  RowBox[{"q", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["\[Theta]", "0"]},
      {
       SubscriptBox["\[Theta]", "1"]},
      {
       SubscriptBox["\[Theta]", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"dq", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["d\[Theta]", "0"]},
      {
       SubscriptBox["d\[Theta]", "1"]},
      {
       SubscriptBox["d\[Theta]", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"ddq", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["dd\[Theta]", "0"]},
      {
       SubscriptBox["dd\[Theta]", "1"]},
      {
       SubscriptBox["dd\[Theta]", "2"]}
     }], "\[NoBreak]", ")"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444311560944*^9}, {3.551444473893467*^9, 3.5514444779532967`*^9}, 
   3.552103677907531*^9, 3.552103763781744*^9, 3.552103837592396*^9, 
   3.552145625728253*^9, 3.552148192324792*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[StyleBox["The Forward Transformation Matrices",
 FontWeight->"Bold"]], "Subsection",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444311560944*^9}, {3.551444473893467*^9, 3.551444531301659*^9}, {
   3.551444983345561*^9, 3.551445000368168*^9}, 3.552103677907593*^9, 
   3.5521037637817793`*^9, 3.55210383759254*^9, 3.552145625728293*^9, 
   3.5521481923248463`*^9}],

Cell["\<\
The first step to compute the control equations is to figure out coordinate \
transformations from a universal, stationary \"origin\" frame to the robot' s \
links. These transformations are functions of the generalized coordinates and \
are updated as the robot moves. They allow us to compute the position of \
different points on its links (like the link centers of mass), and are used \
extensively in any controller.\
\>", "Text",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444311560944*^9}, {3.551444473893467*^9, 3.551444531301659*^9}, {
   3.551444983345561*^9, 3.5514449954147987`*^9}, {3.551465499631049*^9, 
   3.5514655053748693`*^9}, 3.552103677907671*^9, 3.5521037637818203`*^9, 
   3.5521038375927134`*^9, 3.552145625728339*^9, 3.55214819232491*^9},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"R01", " ", ":", " ", 
    RowBox[{
    "Rotates", " ", "a", " ", "vector", " ", "from", " ", "frame", " ", "0", 
     " ", 
     RowBox[{"(", 
      RowBox[{"first", " ", "link"}], ")"}], " ", "to", " ", "frame", " ", 
     "O", " ", 
     RowBox[{"(", 
      RowBox[{"origin", "/", "ground"}], ")"}], "\[IndentingNewLine]", "Cfg", 
     " ", 
     RowBox[{"file", " ", ":", " ", 
      RowBox[{
      "This", " ", "is", " ", "defined", " ", "to", " ", "be", " ", "about", 
       " ", "z", " ", "in", " ", "ground", " ", "coord", " ", "frame"}]}]}]}],
    " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"RO0", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {
         RowBox[{"Cos", "[", 
          SubscriptBox["\[Theta]", "0"], "]"}], 
         RowBox[{"-", 
          RowBox[{"Sin", "[", 
           SubscriptBox["\[Theta]", "0"], "]"}]}], "0"},
        {
         RowBox[{"Sin", "[", 
          SubscriptBox["\[Theta]", "0"], "]"}], 
         RowBox[{"Cos", "[", 
          SubscriptBox["\[Theta]", "0"], "]"}], "0"},
        {"0", "0", "1"}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"p01", " ", ":", " ", 
     RowBox[{
     "Translation", " ", "from", " ", "frame", " ", "frame", " ", "0", " ", 
      RowBox[{"(", 
       RowBox[{"first", " ", "link"}], ")"}], " ", "to", " ", "O", " ", 
      RowBox[{"(", "ground", ")"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"pO0", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"0"},
        {"0"},
        {"1"}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "Combine", " ", "the", " ", "rotation", " ", "and", " ", "translation", 
     " ", "into", " ", "a", " ", "transformation", " ", "matrix"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"TO0", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{
       RowBox[{"Join", "[", 
        RowBox[{"RO0", ",", " ", "pO0", ",", "2"}], "]"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"0", ",", " ", "0", ",", " ", "0", ",", " ", "1"}], "}"}]}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Following", " ", "the", " ", "first", " ", 
     RowBox[{"link", "'"}], "s", " ", "example"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"R01", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"1", "0", "0"},
        {"0", "1", "0"},
        {"0", "0", "1"}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"p01", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"0"},
        {
         RowBox[{"0.5", "+", 
          SubscriptBox["\[Theta]", "1"]}]},
        {"0"}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"T01", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{
       RowBox[{"Join", "[", 
        RowBox[{"R01", ",", " ", "p01", ",", "2"}], "]"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"0", ",", " ", "0", ",", " ", "0", ",", " ", "1"}], "}"}]}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"R12", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"1", "0", "0"},
        {"0", "1", "0"},
        {"0", "0", "1"}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"p12", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"0"},
        {"0"},
        {
         RowBox[{
          RowBox[{"-", "0.2"}], "+", 
          SubscriptBox["\[Theta]", "2"]}]}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"T12", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{
       RowBox[{"Join", "[", 
        RowBox[{"R12", ",", " ", "p12", ",", "2"}], "]"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"0", ",", " ", "0", ",", " ", "0", ",", " ", "1"}], "}"}]}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"NOTE", " ", ":", " ", 
     RowBox[{
     "These", " ", "rotation", " ", "and", " ", "transofrmation", " ", 
      "matrices", " ", "are", " ", "used", " ", 
      RowBox[{"later", ".", " ", "Setting"}], " ", "this", 
      "\[IndentingNewLine]", "index", " ", "format", " ", "simplifies", " ", 
      "the", " ", "later", " ", "code", " ", "by", " ", "enabling", " ", 
      "subscript", " ", 
      RowBox[{"indexing", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "R0i", " ", "takes", " ", "vectors", " ", "in", " ", "coordinate", " ", 
     "frame", " ", "i", " ", "and", " ", "rotates", " ", "them", 
     "\[IndentingNewLine]", "to", " ", "coordinate", " ", "frame", " ", "O", 
     " ", 
     RowBox[{"(", "ground", ")"}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["RO", "0"], " ", "=", " ", "RO0"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["RO", "1"], " ", "=", " ", 
     RowBox[{"RO0", " ", ".", " ", "R01"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["RO", "2"], " ", "=", " ", 
     RowBox[{"RO0", " ", ".", " ", "R01", " ", ".", " ", "R12"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "T0i", " ", "takes", " ", "vectors", " ", "in", " ", "coordinate", " ", 
     "frame", " ", "i", " ", "and", " ", "transforms", " ", "them", 
     "\[IndentingNewLine]", "to", " ", "coordinate", " ", "frame", " ", "O", 
     " ", 
     RowBox[{"(", "ground", ")"}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["TO", "0"], " ", "=", " ", "TO0"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["TO", "1"], " ", "=", " ", 
     RowBox[{"TO0", " ", ".", " ", "T01"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["TO", "2"], " ", "=", " ", 
     RowBox[{"TO0", " ", ".", " ", "T01", " ", ".", " ", "T12"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{
     "We", " ", "shall", " ", "now", " ", "print", " ", "the", " ", 
      "transformation", " ", "matrices", " ", "just", " ", "to", " ", "take", 
      " ", "a", " ", "quick", " ", "look", "\[IndentingNewLine]", "at", " ", 
      "what", " ", "they", " ", "look", " ", "like"}], ",", " ", 
     RowBox[{"and", " ", "to", " ", "make", " ", "sure", " ", 
      RowBox[{"we", "'"}], "re", " ", "doing", " ", 
      RowBox[{"ok", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    SubscriptBox["TO", "0"], "]"}], "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    SubscriptBox["TO", "1"], "]"}], "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    SubscriptBox["TO", "2"], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.550682911062579*^9, 3.5506829871347933`*^9}, {
   3.550683017449107*^9, 3.5506831743839417`*^9}, {3.550683334109069*^9, 
   3.550683379825964*^9}, {3.55068341479561*^9, 3.55068345986689*^9}, {
   3.5506834927876787`*^9, 3.550683497547209*^9}, {3.550683570014539*^9, 
   3.550683596807354*^9}, {3.5506841593426533`*^9, 3.550684159480291*^9}, {
   3.550684204441794*^9, 3.550684318992935*^9}, {3.5506843871234417`*^9, 
   3.550684510643915*^9}, {3.550684592487644*^9, 3.550684653962563*^9}, {
   3.550684687266449*^9, 3.550684707835511*^9}, {3.550684768251088*^9, 
   3.550684918077362*^9}, {3.5507070780921183`*^9, 3.550707085841056*^9}, {
   3.5507081978924923`*^9, 3.550708215131019*^9}, {3.550713366127572*^9, 
   3.5507133669035597`*^9}, {3.55071341325233*^9, 3.550713422457088*^9}, {
   3.5507134667398157`*^9, 3.5507135698523693`*^9}, {3.5507136042999897`*^9, 
   3.550713606463114*^9}, {3.5507136613774157`*^9, 3.550713695068416*^9}, {
   3.5507137316833353`*^9, 3.550713849872354*^9}, {3.5507138885568113`*^9, 
   3.550713953563946*^9}, {3.550714007094985*^9, 3.5507141483705263`*^9}, {
   3.5507144444990396`*^9, 3.550714504948461*^9}, {3.5507145376659393`*^9, 
   3.5507148159786577`*^9}, {3.550715022884602*^9, 3.5507150558204727`*^9}, {
   3.5507151173377666`*^9, 3.550715161055553*^9}, {3.55071519664371*^9, 
   3.550715251875072*^9}, {3.550715290997204*^9, 3.550715399073571*^9}, {
   3.5507155967404013`*^9, 3.550715608638566*^9}, {3.550715827471468*^9, 
   3.550715835053911*^9}, {3.550715886260572*^9, 3.550715983156348*^9}, {
   3.5507160186875877`*^9, 3.5507160669686813`*^9}, {3.550716098026246*^9, 
   3.550716137957608*^9}, {3.550866535377467*^9, 3.5508666170314302`*^9}, {
   3.550866654712533*^9, 3.550866796834927*^9}, {3.550866829178994*^9, 
   3.550866831074979*^9}, {3.550866878335149*^9, 3.550866880536428*^9}, {
   3.550867567907099*^9, 3.550867606267111*^9}, {3.550883679788954*^9, 
   3.550883714245955*^9}, {3.550884650228367*^9, 3.5508847514814167`*^9}, {
   3.5508848399832153`*^9, 3.550884876646386*^9}, {3.55088575036805*^9, 
   3.5508858468049717`*^9}, {3.550888002895526*^9, 3.550888052182021*^9}, {
   3.550888221794386*^9, 3.550888243490654*^9}, {3.550888316274288*^9, 
   3.550888316358904*^9}, {3.550891614006699*^9, 3.5508916233721333`*^9}, {
   3.550891675043262*^9, 3.550891677191639*^9}, {3.5508949189337683`*^9, 
   3.550894928701659*^9}, {3.550949286886677*^9, 3.550949728373127*^9}, {
   3.55095005825695*^9, 3.550950081035179*^9}, {3.5509502365188227`*^9, 
   3.550950276070306*^9}, {3.5509690438593693`*^9, 3.55096908695896*^9}, {
   3.550972801584614*^9, 3.550972844956262*^9}, {3.5509729340042686`*^9, 
   3.550973003126432*^9}, {3.550973066681651*^9, 3.5509730890329323`*^9}, {
   3.550973215372267*^9, 3.550973234807542*^9}, {3.5509744807044773`*^9, 
   3.5509745143932533`*^9}, 3.55144404487539*^9, {3.551444280544117*^9, 
   3.551444311560944*^9}, {3.551444473893467*^9, 3.551444502800585*^9}, {
   3.551743779112108*^9, 3.5517437844265013`*^9}, {3.551804170104125*^9, 
   3.551804195818521*^9}, 3.552103677911968*^9, 3.5521037637828293`*^9, 
   3.552103837596895*^9, {3.552145338351428*^9, 3.5521453393209343`*^9}, 
   3.552145625729447*^9, 3.5521481923264713`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}]}], "0", "0"},
     {
      RowBox[{"Sin", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], "0", "0"},
     {"0", "0", "1", "1"},
     {"0", "0", "0", "1"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.5509690900118856`*^9, 3.5509691166226377`*^9}, 
   3.550969291170854*^9, 3.5509728534035873`*^9, 3.550972887686098*^9, 
   3.550973024266354*^9, 3.550973090984844*^9, 3.550973507877816*^9, 
   3.5509737672831717`*^9, 3.550973934940585*^9, 3.550974352613245*^9, {
   3.550974497866783*^9, 3.5509745159715233`*^9}, 3.55097458027146*^9, 
   3.550974686266179*^9, 3.550974866306136*^9, 3.550981398287582*^9, 
   3.551022006787301*^9, 3.551444555058157*^9, 3.551466050429661*^9, 
   3.5515435357338257`*^9, 3.551556548800764*^9, 3.551556592580405*^9, 
   3.5515569022006617`*^9, 3.5515573021451187`*^9, {3.551558521092341*^9, 
   3.551558545052494*^9}, 3.551558669923794*^9, 3.551744633283082*^9, 
   3.551754302435615*^9, 3.551754415222978*^9, 3.551804245565628*^9, 
   3.551832821887863*^9, {3.552099085942357*^9, 3.5520990977609653`*^9}, 
   3.552102902069789*^9, 3.5521030952458363`*^9, 3.552103211167919*^9, 
   3.552103677912651*^9, 3.552103763782982*^9, {3.552103818018938*^9, 
   3.55210383759753*^9}, 3.5521455110771112`*^9, 3.552145625729629*^9, 
   3.552148192326695*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}]}], "0", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}]},
     {
      RowBox[{"Sin", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], "0", 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}]},
     {"0", "0", "1", "1"},
     {"0", "0", "0", "1"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.5509690900118856`*^9, 3.5509691166226377`*^9}, 
   3.550969291170854*^9, 3.5509728534035873`*^9, 3.550972887686098*^9, 
   3.550973024266354*^9, 3.550973090984844*^9, 3.550973507877816*^9, 
   3.5509737672831717`*^9, 3.550973934940585*^9, 3.550974352613245*^9, {
   3.550974497866783*^9, 3.5509745159715233`*^9}, 3.55097458027146*^9, 
   3.550974686266179*^9, 3.550974866306136*^9, 3.550981398287582*^9, 
   3.551022006787301*^9, 3.551444555058157*^9, 3.551466050429661*^9, 
   3.5515435357338257`*^9, 3.551556548800764*^9, 3.551556592580405*^9, 
   3.5515569022006617`*^9, 3.5515573021451187`*^9, {3.551558521092341*^9, 
   3.551558545052494*^9}, 3.551558669923794*^9, 3.551744633283082*^9, 
   3.551754302435615*^9, 3.551754415222978*^9, 3.551804245565628*^9, 
   3.551832821887863*^9, {3.552099085942357*^9, 3.5520990977609653`*^9}, 
   3.552102902069789*^9, 3.5521030952458363`*^9, 3.552103211167919*^9, 
   3.552103677912651*^9, 3.552103763782982*^9, {3.552103818018938*^9, 
   3.55210383759753*^9}, 3.552145511079961*^9, 3.552145625729824*^9, 
   3.552148192326952*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}]}], "0", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}]},
     {
      RowBox[{"Sin", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], "0", 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}]},
     {"0", "0", "1", 
      RowBox[{"0.8`", "\[VeryThinSpace]", "+", 
       SubscriptBox["\[Theta]", "2"]}]},
     {"0", "0", "0", "1"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.5509690900118856`*^9, 3.5509691166226377`*^9}, 
   3.550969291170854*^9, 3.5509728534035873`*^9, 3.550972887686098*^9, 
   3.550973024266354*^9, 3.550973090984844*^9, 3.550973507877816*^9, 
   3.5509737672831717`*^9, 3.550973934940585*^9, 3.550974352613245*^9, {
   3.550974497866783*^9, 3.5509745159715233`*^9}, 3.55097458027146*^9, 
   3.550974686266179*^9, 3.550974866306136*^9, 3.550981398287582*^9, 
   3.551022006787301*^9, 3.551444555058157*^9, 3.551466050429661*^9, 
   3.5515435357338257`*^9, 3.551556548800764*^9, 3.551556592580405*^9, 
   3.5515569022006617`*^9, 3.5515573021451187`*^9, {3.551558521092341*^9, 
   3.551558545052494*^9}, 3.551558669923794*^9, 3.551744633283082*^9, 
   3.551754302435615*^9, 3.551754415222978*^9, 3.551804245565628*^9, 
   3.551832821887863*^9, {3.552099085942357*^9, 3.5520990977609653`*^9}, 
   3.552102902069789*^9, 3.5521030952458363`*^9, 3.552103211167919*^9, 
   3.552103677912651*^9, 3.552103763782982*^9, {3.552103818018938*^9, 
   3.55210383759753*^9}, 3.5521455110822268`*^9, 3.552145625730012*^9, 
   3.552148192327203*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[StyleBox["Center of Mass Positions and Jacobians",
 FontWeight->"Bold"]], "Subsection",
 CellChangeTimes->{3.551445048009964*^9, 3.552103677914003*^9, 
  3.552103763783368*^9, 3.552103837599174*^9, 3.552145625730048*^9, 
  3.55214819232725*^9}],

Cell["\<\
COM Mass/Inertias For RPP - Bot wrt. their respective link frames. We will \
compute Jacobians in the origin' s frame, and so will move these vectors to \
the origin' s frame.\
\>", "Text",
 CellChangeTimes->{{3.550866889614594*^9, 3.5508669118694983`*^9}, {
   3.550867504891897*^9, 3.550867508737056*^9}, {3.55086763260049*^9, 
   3.5508677142210207`*^9}, {3.550882840913432*^9, 3.5508828591083508`*^9}, {
   3.550883652469345*^9, 3.5508836632409887`*^9}, {3.5508847664592257`*^9, 
   3.550884829610176*^9}, {3.550885710957588*^9, 3.550885726045773*^9}, {
   3.550885872473641*^9, 3.550886036617679*^9}, {3.550886071175192*^9, 
   3.5508860789190063`*^9}, {3.550886109192458*^9, 3.550886184281806*^9}, {
   3.550886627586918*^9, 3.5508867437506123`*^9}, {3.550887220228675*^9, 
   3.550887242912047*^9}, {3.550887291228179*^9, 3.550887301481146*^9}, {
   3.5508875697851686`*^9, 3.55088759807882*^9}, {3.550887690357985*^9, 
   3.550887815966091*^9}, {3.550887879799693*^9, 3.550887897571707*^9}, {
   3.550887938514516*^9, 3.55088798167724*^9}, {3.550888072929358*^9, 
   3.550888098717572*^9}, {3.550890670100209*^9, 3.5508908104397306`*^9}, {
   3.550890902252966*^9, 3.5508909126130257`*^9}, {3.550890965443714*^9, 
   3.5508909736844254`*^9}, {3.5508911415251493`*^9, 
   3.5508911578175383`*^9}, {3.550891193785858*^9, 3.550891194388159*^9}, {
   3.5508912390448847`*^9, 3.550891251196186*^9}, {3.550891372173736*^9, 
   3.550891464756229*^9}, {3.55089154802026*^9, 3.550891599211553*^9}, {
   3.550891638711937*^9, 3.55089164936373*^9}, {3.550891683231189*^9, 
   3.550891691715446*^9}, {3.550891734860262*^9, 3.550891816937331*^9}, {
   3.550892227676188*^9, 3.5508923882776213`*^9}, {3.55089244988902*^9, 
   3.550892483087879*^9}, {3.5508927319400587`*^9, 3.5508927353719673`*^9}, {
   3.550893116325685*^9, 3.5508931203045187`*^9}, {3.5508940286162157`*^9, 
   3.5508941019098263`*^9}, {3.5508941352028513`*^9, 3.550894135699733*^9}, {
   3.550894272712678*^9, 3.5508943519044523`*^9}, {3.550894488361924*^9, 
   3.5508945179189672`*^9}, {3.5508945493647327`*^9, 3.550894614335993*^9}, {
   3.550894726880673*^9, 3.550894794728405*^9}, {3.550894895742588*^9, 
   3.550894953148962*^9}, {3.550972825851191*^9, 3.550972825863532*^9}, {
   3.5509729693378963`*^9, 3.550972969345265*^9}, {3.550973107607626*^9, 
   3.55097316411796*^9}, {3.550973293533588*^9, 3.5509735195736732`*^9}, {
   3.5509762673693438`*^9, 3.550976552169232*^9}, {3.550976593332725*^9, 
   3.55097669156421*^9}, {3.550978184986871*^9, 3.550978387561129*^9}, {
   3.5509789084723873`*^9, 3.550978920957735*^9}, {3.55097896471113*^9, 
   3.5509789692760143`*^9}, {3.551444597610026*^9, 3.5514446705883417`*^9}, {
   3.551444700668044*^9, 3.551444705248822*^9}, {3.551445015144658*^9, 
   3.551445020860867*^9}, {3.551465512881051*^9, 3.55146551365941*^9}, {
   3.552096858072185*^9, 3.552096863100473*^9}, 3.55210367791411*^9, 
   3.552103763783409*^9, 3.552103837599346*^9, 3.552145625730094*^9, 
   3.55214819232731*^9},
 FontFamily->"Courier"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    SubscriptBox["comPos", "0"], " ", "=", " ", 
    RowBox[{"(", "\[NoBreak]", GridBox[{
       {"0"},
       {"0"},
       {
        RowBox[{"-", "0.5"}]},
       {"1"}
      }], "\[NoBreak]", ")"}]}], ";", " ", 
   RowBox[{
    SubscriptBox["comPos", "1"], " ", "=", " ", 
    RowBox[{"(", "\[NoBreak]", GridBox[{
       {"0"},
       {
        RowBox[{"-", "0.3625"}]},
       {"0"},
       {"1"}
      }], "\[NoBreak]", ")"}]}], ";", " ", 
   RowBox[{
    SubscriptBox["comPos", "2"], " ", "=", " ", 
    RowBox[{"(", "\[NoBreak]", GridBox[{
       {"0"},
       {"0"},
       {"0.325"},
       {"1"}
      }], "\[NoBreak]", ")"}]}], ";"}], " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    SubscriptBox["comPosO", "i_"], " ", ":=", " ", 
    RowBox[{"Take", "[", 
     RowBox[{
      RowBox[{
       SubscriptBox["TO", "i"], " ", ".", " ", 
       SubscriptBox["comPos", "i"]}], ",", 
      RowBox[{"{", 
       RowBox[{"1", ",", "3"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"1", ",", "1"}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"Jacobians", " ", "For", " ", "RPP"}], "-", 
     RowBox[{
      RowBox[{"Bot", ".", " ", "Remember"}], " ", 
      RowBox[{"dx", "/", "dt"}]}]}], " ", "=", " ", 
    RowBox[{"J", " ", 
     RowBox[{"dq", "/", "dt"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"Position", " ", "Jacobian", " ", "for", " ", "com", " ", "i"}], 
   " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   SubscriptBox["JOcomPos", "i_"], " ", ":=", " ", 
   RowBox[{"Reshape", "[", 
    RowBox[{
     RowBox[{"Outer", "[", 
      RowBox[{"D", ",", " ", 
       SubscriptBox["comPosO", "i"], ",", " ", 
       RowBox[{"Transpose", "[", "q", "]"}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"3", ",", "3"}], "}"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.550866889614594*^9, 3.5508669118694983`*^9}, {
   3.550867504891897*^9, 3.550867508737056*^9}, {3.55086763260049*^9, 
   3.5508677142210207`*^9}, {3.550882840913432*^9, 3.5508828591083508`*^9}, {
   3.550883652469345*^9, 3.5508836632409887`*^9}, {3.5508847664592257`*^9, 
   3.550884829610176*^9}, {3.550885710957588*^9, 3.550885726045773*^9}, {
   3.550885872473641*^9, 3.550886036617679*^9}, {3.550886071175192*^9, 
   3.5508860789190063`*^9}, {3.550886109192458*^9, 3.550886184281806*^9}, {
   3.550886627586918*^9, 3.5508867437506123`*^9}, {3.550887220228675*^9, 
   3.550887242912047*^9}, {3.550887291228179*^9, 3.550887301481146*^9}, {
   3.5508875697851686`*^9, 3.55088759807882*^9}, {3.550887690357985*^9, 
   3.550887815966091*^9}, {3.550887879799693*^9, 3.550887897571707*^9}, {
   3.550887938514516*^9, 3.55088798167724*^9}, {3.550888072929358*^9, 
   3.550888098717572*^9}, {3.550890670100209*^9, 3.5508908104397306`*^9}, {
   3.550890902252966*^9, 3.5508909126130257`*^9}, {3.550890965443714*^9, 
   3.5508909736844254`*^9}, {3.5508911415251493`*^9, 
   3.5508911578175383`*^9}, {3.550891193785858*^9, 3.550891194388159*^9}, {
   3.5508912390448847`*^9, 3.550891251196186*^9}, {3.550891372173736*^9, 
   3.550891464756229*^9}, {3.55089154802026*^9, 3.550891599211553*^9}, {
   3.550891638711937*^9, 3.55089164936373*^9}, {3.550891683231189*^9, 
   3.550891691715446*^9}, {3.550891734860262*^9, 3.550891816937331*^9}, {
   3.550892227676188*^9, 3.5508923882776213`*^9}, {3.55089244988902*^9, 
   3.550892483087879*^9}, {3.5508927319400587`*^9, 3.5508927353719673`*^9}, {
   3.550893116325685*^9, 3.5508931203045187`*^9}, {3.5508940286162157`*^9, 
   3.5508941019098263`*^9}, {3.5508941352028513`*^9, 3.550894135699733*^9}, {
   3.550894272712678*^9, 3.5508943519044523`*^9}, {3.550894488361924*^9, 
   3.5508945179189672`*^9}, {3.5508945493647327`*^9, 3.550894614335993*^9}, {
   3.550894726880673*^9, 3.550894794728405*^9}, {3.550894895742588*^9, 
   3.550894953148962*^9}, {3.550972825851191*^9, 3.550972825863532*^9}, {
   3.5509729693378963`*^9, 3.550972969345265*^9}, {3.550973107607626*^9, 
   3.55097316411796*^9}, {3.550973293533588*^9, 3.5509735195736732`*^9}, {
   3.5509762673693438`*^9, 3.550976552169232*^9}, {3.550976593332725*^9, 
   3.55097669156421*^9}, {3.550978184986871*^9, 3.550978387561129*^9}, {
   3.5509789084723873`*^9, 3.550978920957735*^9}, {3.55097896471113*^9, 
   3.5509789692760143`*^9}, {3.551444597610026*^9, 3.551444603438345*^9}, 
   3.551465538139892*^9, 3.552103677914802*^9, 3.5521037637838087`*^9, 
   3.552103837600959*^9, {3.5521453765283623`*^9, 3.55214540156284*^9}, 
   3.552145625730502*^9, 3.552148192327853*^9}],

Cell["\<\
Ok. So we have the frame positions. But if you recall rigid body dynamics, \
the configuration of a rigid body also requires the orientation. But a \
Jacobian must relate the generalized velocities to position and rotational \
velocities.

This is where things get hairy. Though a rigid body has three rotational \
degrees of freedom, there are no three variables that can completely describe \
the set of its rotations as well as their inverses. Storing the orientation \
position \"requires\" four variables with their vector norm constrained to 1 \
(ie. a vector on the surface of a 4D hypersphere).

However, storing the orientation rotational velocities require only three \
variables. We shall use this fact to compute the rotational part of the \
Jacobian by directly
computing the linear map from end-effector rotations to generalized \
coordinates. \
\>", "Text",
 CellChangeTimes->{{3.550866889614594*^9, 3.5508669118694983`*^9}, {
   3.550867504891897*^9, 3.550867508737056*^9}, {3.55086763260049*^9, 
   3.5508677142210207`*^9}, {3.550882840913432*^9, 3.5508828591083508`*^9}, {
   3.550883652469345*^9, 3.5508836632409887`*^9}, {3.5508847664592257`*^9, 
   3.550884829610176*^9}, {3.550885710957588*^9, 3.550885726045773*^9}, {
   3.550885872473641*^9, 3.550886036617679*^9}, {3.550886071175192*^9, 
   3.5508860789190063`*^9}, {3.550886109192458*^9, 3.550886184281806*^9}, {
   3.550886627586918*^9, 3.5508867437506123`*^9}, {3.550887220228675*^9, 
   3.550887242912047*^9}, {3.550887291228179*^9, 3.550887301481146*^9}, {
   3.5508875697851686`*^9, 3.55088759807882*^9}, {3.550887690357985*^9, 
   3.550887815966091*^9}, {3.550887879799693*^9, 3.550887897571707*^9}, {
   3.550887938514516*^9, 3.55088798167724*^9}, {3.550888072929358*^9, 
   3.550888098717572*^9}, {3.550890670100209*^9, 3.5508908104397306`*^9}, {
   3.550890902252966*^9, 3.5508909126130257`*^9}, {3.550890965443714*^9, 
   3.5508909736844254`*^9}, {3.5508911415251493`*^9, 
   3.5508911578175383`*^9}, {3.550891193785858*^9, 3.550891194388159*^9}, {
   3.5508912390448847`*^9, 3.550891251196186*^9}, {3.550891372173736*^9, 
   3.550891464756229*^9}, {3.55089154802026*^9, 3.550891599211553*^9}, {
   3.550891638711937*^9, 3.55089164936373*^9}, {3.550891683231189*^9, 
   3.550891691715446*^9}, {3.550891734860262*^9, 3.550891816937331*^9}, {
   3.550892227676188*^9, 3.5508923882776213`*^9}, {3.55089244988902*^9, 
   3.550892483087879*^9}, {3.5508927319400587`*^9, 3.5508927353719673`*^9}, {
   3.550893116325685*^9, 3.5508931203045187`*^9}, {3.5508940286162157`*^9, 
   3.5508941019098263`*^9}, {3.5508941352028513`*^9, 3.550894135699733*^9}, {
   3.550894272712678*^9, 3.5508943519044523`*^9}, {3.550894488361924*^9, 
   3.5508945179189672`*^9}, {3.5508945493647327`*^9, 3.550894614335993*^9}, {
   3.550894726880673*^9, 3.550894794728405*^9}, {3.550894895742588*^9, 
   3.550894953148962*^9}, {3.550972825851191*^9, 3.550972825863532*^9}, {
   3.5509729693378963`*^9, 3.550972969345265*^9}, {3.550973107607626*^9, 
   3.55097316411796*^9}, {3.550973293533588*^9, 3.5509735195736732`*^9}, {
   3.5509762673693438`*^9, 3.550976552169232*^9}, {3.550976593332725*^9, 
   3.55097669156421*^9}, {3.550978184986871*^9, 3.550978387561129*^9}, {
   3.5509789084723873`*^9, 3.550978920957735*^9}, {3.55097896471113*^9, 
   3.5509789692760143`*^9}, {3.551444597610026*^9, 3.551444603438345*^9}, {
   3.551465538139892*^9, 3.551465639884968*^9}, {3.5520967813143787`*^9, 
   3.552096821369007*^9}, 3.5521036779148817`*^9, 3.552103763783843*^9, 
   3.552103837601101*^9, 3.5521456257305403`*^9, 3.552148192327896*^9},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   SubscriptBox["JOcomRot", "0"], "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {"0", "0", "0"},
      {"0", "0", "0"},
      {"1", "0", "0"}
     }], "\[NoBreak]", ")"}]}], ";", " ", 
  RowBox[{
   SubscriptBox["JOcomRot", "1"], "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {"0", "0", "0"},
      {"0", "0", "0"},
      {"1", "0", "0"}
     }], "\[NoBreak]", ")"}]}], ";", " ", 
  RowBox[{
   SubscriptBox["JOcomRot", "2"], "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {"0", "0", "0"},
      {"0", "0", "0"},
      {"1", "0", "0"}
     }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    SubscriptBox["JOcom", "i_"], " ", ":=", " ", 
    RowBox[{"Join", "[", 
     RowBox[{
      SubscriptBox["JOcomPos", "i"], ",", " ", 
      SubscriptBox["JOcomRot", "i"], ",", "1"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  SubscriptBox["comPosO", "0"], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  SubscriptBox["comPosO", "1"], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  SubscriptBox["comPosO", "2"], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  SubscriptBox["JOcom", "0"], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  SubscriptBox["JOcom", "1"], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  SubscriptBox["JOcom", "2"], "]"}]}], "Input",
 CellChangeTimes->{{3.550866889614594*^9, 3.5508669118694983`*^9}, {
   3.550867504891897*^9, 3.550867508737056*^9}, {3.55086763260049*^9, 
   3.5508677142210207`*^9}, {3.550882840913432*^9, 3.5508828591083508`*^9}, {
   3.550883652469345*^9, 3.5508836632409887`*^9}, {3.5508847664592257`*^9, 
   3.550884829610176*^9}, {3.550885710957588*^9, 3.550885726045773*^9}, {
   3.550885872473641*^9, 3.550886036617679*^9}, {3.550886071175192*^9, 
   3.5508860789190063`*^9}, {3.550886109192458*^9, 3.550886184281806*^9}, {
   3.550886627586918*^9, 3.5508867437506123`*^9}, {3.550887220228675*^9, 
   3.550887242912047*^9}, {3.550887291228179*^9, 3.550887301481146*^9}, {
   3.5508875697851686`*^9, 3.55088759807882*^9}, {3.550887690357985*^9, 
   3.550887815966091*^9}, {3.550887879799693*^9, 3.550887897571707*^9}, {
   3.550887938514516*^9, 3.55088798167724*^9}, {3.550888072929358*^9, 
   3.550888098717572*^9}, {3.550890670100209*^9, 3.5508908104397306`*^9}, {
   3.550890902252966*^9, 3.5508909126130257`*^9}, {3.550890965443714*^9, 
   3.5508909736844254`*^9}, {3.5508911415251493`*^9, 
   3.5508911578175383`*^9}, {3.550891193785858*^9, 3.550891194388159*^9}, {
   3.5508912390448847`*^9, 3.550891251196186*^9}, {3.550891372173736*^9, 
   3.550891464756229*^9}, {3.55089154802026*^9, 3.550891599211553*^9}, {
   3.550891638711937*^9, 3.55089164936373*^9}, {3.550891683231189*^9, 
   3.550891691715446*^9}, {3.550891734860262*^9, 3.550891816937331*^9}, {
   3.550892227676188*^9, 3.5508923882776213`*^9}, {3.55089244988902*^9, 
   3.550892483087879*^9}, {3.5508927319400587`*^9, 3.5508927353719673`*^9}, {
   3.550893116325685*^9, 3.5508931203045187`*^9}, {3.5508940286162157`*^9, 
   3.5508941019098263`*^9}, {3.5508941352028513`*^9, 3.550894135699733*^9}, {
   3.550894272712678*^9, 3.5508943519044523`*^9}, {3.550894488361924*^9, 
   3.5508945179189672`*^9}, {3.5508945493647327`*^9, 3.550894614335993*^9}, {
   3.550894726880673*^9, 3.550894794728405*^9}, {3.550894895742588*^9, 
   3.550894953148962*^9}, {3.550972825851191*^9, 3.550972825863532*^9}, {
   3.5509729693378963`*^9, 3.550972969345265*^9}, {3.550973107607626*^9, 
   3.55097316411796*^9}, {3.550973293533588*^9, 3.5509735195736732`*^9}, {
   3.5509762673693438`*^9, 3.550976552169232*^9}, {3.550976593332725*^9, 
   3.55097669156421*^9}, {3.550978184986871*^9, 3.550978387561129*^9}, {
   3.5509789084723873`*^9, 3.550978920957735*^9}, {3.55097896471113*^9, 
   3.5509789692760143`*^9}, {3.551444597610026*^9, 3.551444603438345*^9}, {
   3.551465538139892*^9, 3.551465542092822*^9}, 3.5521036779154587`*^9, 
   3.552103763784171*^9, 3.552103837602504*^9, 3.552145625730897*^9, 
   3.5521481923283052`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.`"},
     {"0.`"},
     {"0.5`"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550885977108293*^9, {3.55088601344246*^9, 3.550886037236019*^9}, {
   3.550886082814598*^9, 3.550886096483796*^9}, {3.550886129949708*^9, 
   3.550886185079857*^9}, 3.550887249209855*^9, {3.55088757146227*^9, 
   3.550887599343141*^9}, {3.5508877273287888`*^9, 3.55088781634863*^9}, 
   3.550887902899816*^9, 3.550888099547114*^9, 3.55088818237062*^9, 
   3.550888258146317*^9, 3.55088832336272*^9, {3.550890198385145*^9, 
   3.550890205701707*^9}, {3.550890799179858*^9, 3.55089081489427*^9}, 
   3.550890914320635*^9, 3.550890966306183*^9, {3.5508911482675734`*^9, 
   3.550891158551487*^9}, 3.550891195113048*^9, {3.5508912421821003`*^9, 
   3.550891252143075*^9}, {3.55089137572398*^9, 3.550891470297035*^9}, {
   3.550891552221784*^9, 3.550891599646216*^9}, {3.550891630919746*^9, 
   3.5508916502764463`*^9}, {3.550891738623711*^9, 3.550891771340602*^9}, {
   3.550891802657572*^9, 3.550891819479784*^9}, {3.55089223392675*^9, 
   3.550892250094625*^9}, {3.55089228943498*^9, 3.550892309685103*^9}, {
   3.550892359853956*^9, 3.550892389039001*^9}, {3.550892432117477*^9, 
   3.550892484757622*^9}, 3.5508927369849987`*^9, {3.550894071429689*^9, 
   3.550894094773944*^9}, {3.550894308113586*^9, 3.550894353067093*^9}, {
   3.5508944912902308`*^9, 3.5508945186140738`*^9}, {3.550894563199967*^9, 
   3.550894614751647*^9}, {3.550894731845622*^9, 3.55089475981496*^9}, 
   3.5508947954667473`*^9, 3.550894905671666*^9, 3.550894954073001*^9, 
   3.5509654508057747`*^9, 3.550965722775042*^9, 3.550966546570478*^9, 
   3.5509684041182213`*^9, {3.550969050981595*^9, 3.550969116767434*^9}, 
   3.55096929125526*^9, 3.550972853602371*^9, 3.5509728879932337`*^9, 
   3.550973024497192*^9, 3.550973166314039*^9, {3.5509735105585403`*^9, 
   3.550973521502524*^9}, 3.550973955564569*^9, 3.550974352773946*^9, 
   3.550974580400556*^9, 3.550974686415539*^9, 3.550974866462269*^9, 
   3.550978389626725*^9, 3.5509789352766113`*^9, 3.5509789699930696`*^9, 
   3.550981398414813*^9, 3.551022006939537*^9, 3.551444555099888*^9, 
   3.551466050579515*^9, 3.5515435358720837`*^9, 3.551556548946341*^9, 
   3.551556592631609*^9, 3.551556902245529*^9, 3.551557302286337*^9, {
   3.5515585212443027`*^9, 3.55155854510893*^9}, 3.551558669978489*^9, 
   3.551744633434957*^9, 3.551754302640765*^9, 3.551754415293439*^9, 
   3.5518042456219187`*^9, 3.5518328220269623`*^9, {3.552099079373914*^9, 
   3.552099097830332*^9}, 3.5521029021158857`*^9, 3.552103095302619*^9, 
   3.552103211246333*^9, 3.552103677915688*^9, 3.552103763784265*^9, {
   3.552103818173439*^9, 3.552103837602903*^9}, 3.552145511227297*^9, 
   3.552145625731195*^9, 3.552148192328425*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{"0.3625`", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], "-", 
       RowBox[{
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}]},
     {
      RowBox[{
       RowBox[{
        RowBox[{"-", "0.3625`"}], " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], "+", 
       RowBox[{
        RowBox[{"Cos", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}]},
     {"1.`"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550885977108293*^9, {3.55088601344246*^9, 3.550886037236019*^9}, {
   3.550886082814598*^9, 3.550886096483796*^9}, {3.550886129949708*^9, 
   3.550886185079857*^9}, 3.550887249209855*^9, {3.55088757146227*^9, 
   3.550887599343141*^9}, {3.5508877273287888`*^9, 3.55088781634863*^9}, 
   3.550887902899816*^9, 3.550888099547114*^9, 3.55088818237062*^9, 
   3.550888258146317*^9, 3.55088832336272*^9, {3.550890198385145*^9, 
   3.550890205701707*^9}, {3.550890799179858*^9, 3.55089081489427*^9}, 
   3.550890914320635*^9, 3.550890966306183*^9, {3.5508911482675734`*^9, 
   3.550891158551487*^9}, 3.550891195113048*^9, {3.5508912421821003`*^9, 
   3.550891252143075*^9}, {3.55089137572398*^9, 3.550891470297035*^9}, {
   3.550891552221784*^9, 3.550891599646216*^9}, {3.550891630919746*^9, 
   3.5508916502764463`*^9}, {3.550891738623711*^9, 3.550891771340602*^9}, {
   3.550891802657572*^9, 3.550891819479784*^9}, {3.55089223392675*^9, 
   3.550892250094625*^9}, {3.55089228943498*^9, 3.550892309685103*^9}, {
   3.550892359853956*^9, 3.550892389039001*^9}, {3.550892432117477*^9, 
   3.550892484757622*^9}, 3.5508927369849987`*^9, {3.550894071429689*^9, 
   3.550894094773944*^9}, {3.550894308113586*^9, 3.550894353067093*^9}, {
   3.5508944912902308`*^9, 3.5508945186140738`*^9}, {3.550894563199967*^9, 
   3.550894614751647*^9}, {3.550894731845622*^9, 3.55089475981496*^9}, 
   3.5508947954667473`*^9, 3.550894905671666*^9, 3.550894954073001*^9, 
   3.5509654508057747`*^9, 3.550965722775042*^9, 3.550966546570478*^9, 
   3.5509684041182213`*^9, {3.550969050981595*^9, 3.550969116767434*^9}, 
   3.55096929125526*^9, 3.550972853602371*^9, 3.5509728879932337`*^9, 
   3.550973024497192*^9, 3.550973166314039*^9, {3.5509735105585403`*^9, 
   3.550973521502524*^9}, 3.550973955564569*^9, 3.550974352773946*^9, 
   3.550974580400556*^9, 3.550974686415539*^9, 3.550974866462269*^9, 
   3.550978389626725*^9, 3.5509789352766113`*^9, 3.5509789699930696`*^9, 
   3.550981398414813*^9, 3.551022006939537*^9, 3.551444555099888*^9, 
   3.551466050579515*^9, 3.5515435358720837`*^9, 3.551556548946341*^9, 
   3.551556592631609*^9, 3.551556902245529*^9, 3.551557302286337*^9, {
   3.5515585212443027`*^9, 3.55155854510893*^9}, 3.551558669978489*^9, 
   3.551744633434957*^9, 3.551754302640765*^9, 3.551754415293439*^9, 
   3.5518042456219187`*^9, 3.5518328220269623`*^9, {3.552099079373914*^9, 
   3.552099097830332*^9}, 3.5521029021158857`*^9, 3.552103095302619*^9, 
   3.552103211246333*^9, 3.552103677915688*^9, 3.552103763784265*^9, {
   3.552103818173439*^9, 3.552103837602903*^9}, 3.5521455112291727`*^9, 
   3.5521456257318687`*^9, 3.552148192328644*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"0.`", "\[VeryThinSpace]", "-", 
       RowBox[{
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}]},
     {
      RowBox[{"0.`", "\[VeryThinSpace]", "+", 
       RowBox[{
        RowBox[{"Cos", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}]},
     {
      RowBox[{"1.125`", "\[VeryThinSpace]", "+", 
       SubscriptBox["\[Theta]", "2"]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550885977108293*^9, {3.55088601344246*^9, 3.550886037236019*^9}, {
   3.550886082814598*^9, 3.550886096483796*^9}, {3.550886129949708*^9, 
   3.550886185079857*^9}, 3.550887249209855*^9, {3.55088757146227*^9, 
   3.550887599343141*^9}, {3.5508877273287888`*^9, 3.55088781634863*^9}, 
   3.550887902899816*^9, 3.550888099547114*^9, 3.55088818237062*^9, 
   3.550888258146317*^9, 3.55088832336272*^9, {3.550890198385145*^9, 
   3.550890205701707*^9}, {3.550890799179858*^9, 3.55089081489427*^9}, 
   3.550890914320635*^9, 3.550890966306183*^9, {3.5508911482675734`*^9, 
   3.550891158551487*^9}, 3.550891195113048*^9, {3.5508912421821003`*^9, 
   3.550891252143075*^9}, {3.55089137572398*^9, 3.550891470297035*^9}, {
   3.550891552221784*^9, 3.550891599646216*^9}, {3.550891630919746*^9, 
   3.5508916502764463`*^9}, {3.550891738623711*^9, 3.550891771340602*^9}, {
   3.550891802657572*^9, 3.550891819479784*^9}, {3.55089223392675*^9, 
   3.550892250094625*^9}, {3.55089228943498*^9, 3.550892309685103*^9}, {
   3.550892359853956*^9, 3.550892389039001*^9}, {3.550892432117477*^9, 
   3.550892484757622*^9}, 3.5508927369849987`*^9, {3.550894071429689*^9, 
   3.550894094773944*^9}, {3.550894308113586*^9, 3.550894353067093*^9}, {
   3.5508944912902308`*^9, 3.5508945186140738`*^9}, {3.550894563199967*^9, 
   3.550894614751647*^9}, {3.550894731845622*^9, 3.55089475981496*^9}, 
   3.5508947954667473`*^9, 3.550894905671666*^9, 3.550894954073001*^9, 
   3.5509654508057747`*^9, 3.550965722775042*^9, 3.550966546570478*^9, 
   3.5509684041182213`*^9, {3.550969050981595*^9, 3.550969116767434*^9}, 
   3.55096929125526*^9, 3.550972853602371*^9, 3.5509728879932337`*^9, 
   3.550973024497192*^9, 3.550973166314039*^9, {3.5509735105585403`*^9, 
   3.550973521502524*^9}, 3.550973955564569*^9, 3.550974352773946*^9, 
   3.550974580400556*^9, 3.550974686415539*^9, 3.550974866462269*^9, 
   3.550978389626725*^9, 3.5509789352766113`*^9, 3.5509789699930696`*^9, 
   3.550981398414813*^9, 3.551022006939537*^9, 3.551444555099888*^9, 
   3.551466050579515*^9, 3.5515435358720837`*^9, 3.551556548946341*^9, 
   3.551556592631609*^9, 3.551556902245529*^9, 3.551557302286337*^9, {
   3.5515585212443027`*^9, 3.55155854510893*^9}, 3.551558669978489*^9, 
   3.551744633434957*^9, 3.551754302640765*^9, 3.551754415293439*^9, 
   3.5518042456219187`*^9, 3.5518328220269623`*^9, {3.552099079373914*^9, 
   3.552099097830332*^9}, 3.5521029021158857`*^9, 3.552103095302619*^9, 
   3.552103211246333*^9, 3.552103677915688*^9, 3.552103763784265*^9, {
   3.552103818173439*^9, 3.552103837602903*^9}, 3.5521455112310867`*^9, 
   3.552145625732386*^9, 3.5521481923288527`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"1", "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550885977108293*^9, {3.55088601344246*^9, 3.550886037236019*^9}, {
   3.550886082814598*^9, 3.550886096483796*^9}, {3.550886129949708*^9, 
   3.550886185079857*^9}, 3.550887249209855*^9, {3.55088757146227*^9, 
   3.550887599343141*^9}, {3.5508877273287888`*^9, 3.55088781634863*^9}, 
   3.550887902899816*^9, 3.550888099547114*^9, 3.55088818237062*^9, 
   3.550888258146317*^9, 3.55088832336272*^9, {3.550890198385145*^9, 
   3.550890205701707*^9}, {3.550890799179858*^9, 3.55089081489427*^9}, 
   3.550890914320635*^9, 3.550890966306183*^9, {3.5508911482675734`*^9, 
   3.550891158551487*^9}, 3.550891195113048*^9, {3.5508912421821003`*^9, 
   3.550891252143075*^9}, {3.55089137572398*^9, 3.550891470297035*^9}, {
   3.550891552221784*^9, 3.550891599646216*^9}, {3.550891630919746*^9, 
   3.5508916502764463`*^9}, {3.550891738623711*^9, 3.550891771340602*^9}, {
   3.550891802657572*^9, 3.550891819479784*^9}, {3.55089223392675*^9, 
   3.550892250094625*^9}, {3.55089228943498*^9, 3.550892309685103*^9}, {
   3.550892359853956*^9, 3.550892389039001*^9}, {3.550892432117477*^9, 
   3.550892484757622*^9}, 3.5508927369849987`*^9, {3.550894071429689*^9, 
   3.550894094773944*^9}, {3.550894308113586*^9, 3.550894353067093*^9}, {
   3.5508944912902308`*^9, 3.5508945186140738`*^9}, {3.550894563199967*^9, 
   3.550894614751647*^9}, {3.550894731845622*^9, 3.55089475981496*^9}, 
   3.5508947954667473`*^9, 3.550894905671666*^9, 3.550894954073001*^9, 
   3.5509654508057747`*^9, 3.550965722775042*^9, 3.550966546570478*^9, 
   3.5509684041182213`*^9, {3.550969050981595*^9, 3.550969116767434*^9}, 
   3.55096929125526*^9, 3.550972853602371*^9, 3.5509728879932337`*^9, 
   3.550973024497192*^9, 3.550973166314039*^9, {3.5509735105585403`*^9, 
   3.550973521502524*^9}, 3.550973955564569*^9, 3.550974352773946*^9, 
   3.550974580400556*^9, 3.550974686415539*^9, 3.550974866462269*^9, 
   3.550978389626725*^9, 3.5509789352766113`*^9, 3.5509789699930696`*^9, 
   3.550981398414813*^9, 3.551022006939537*^9, 3.551444555099888*^9, 
   3.551466050579515*^9, 3.5515435358720837`*^9, 3.551556548946341*^9, 
   3.551556592631609*^9, 3.551556902245529*^9, 3.551557302286337*^9, {
   3.5515585212443027`*^9, 3.55155854510893*^9}, 3.551558669978489*^9, 
   3.551744633434957*^9, 3.551754302640765*^9, 3.551754415293439*^9, 
   3.5518042456219187`*^9, 3.5518328220269623`*^9, {3.552099079373914*^9, 
   3.552099097830332*^9}, 3.5521029021158857`*^9, 3.552103095302619*^9, 
   3.552103211246333*^9, 3.552103677915688*^9, 3.552103763784265*^9, {
   3.552103818173439*^9, 3.552103837602903*^9}, 3.5521455112326403`*^9, 
   3.552145625732849*^9, 3.552148192329*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{"0.3625`", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], "-", 
       RowBox[{
        RowBox[{"Cos", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}]}], "0"},
     {
      RowBox[{
       RowBox[{"0.3625`", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], "-", 
       RowBox[{
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], "0"},
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"1", "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550885977108293*^9, {3.55088601344246*^9, 3.550886037236019*^9}, {
   3.550886082814598*^9, 3.550886096483796*^9}, {3.550886129949708*^9, 
   3.550886185079857*^9}, 3.550887249209855*^9, {3.55088757146227*^9, 
   3.550887599343141*^9}, {3.5508877273287888`*^9, 3.55088781634863*^9}, 
   3.550887902899816*^9, 3.550888099547114*^9, 3.55088818237062*^9, 
   3.550888258146317*^9, 3.55088832336272*^9, {3.550890198385145*^9, 
   3.550890205701707*^9}, {3.550890799179858*^9, 3.55089081489427*^9}, 
   3.550890914320635*^9, 3.550890966306183*^9, {3.5508911482675734`*^9, 
   3.550891158551487*^9}, 3.550891195113048*^9, {3.5508912421821003`*^9, 
   3.550891252143075*^9}, {3.55089137572398*^9, 3.550891470297035*^9}, {
   3.550891552221784*^9, 3.550891599646216*^9}, {3.550891630919746*^9, 
   3.5508916502764463`*^9}, {3.550891738623711*^9, 3.550891771340602*^9}, {
   3.550891802657572*^9, 3.550891819479784*^9}, {3.55089223392675*^9, 
   3.550892250094625*^9}, {3.55089228943498*^9, 3.550892309685103*^9}, {
   3.550892359853956*^9, 3.550892389039001*^9}, {3.550892432117477*^9, 
   3.550892484757622*^9}, 3.5508927369849987`*^9, {3.550894071429689*^9, 
   3.550894094773944*^9}, {3.550894308113586*^9, 3.550894353067093*^9}, {
   3.5508944912902308`*^9, 3.5508945186140738`*^9}, {3.550894563199967*^9, 
   3.550894614751647*^9}, {3.550894731845622*^9, 3.55089475981496*^9}, 
   3.5508947954667473`*^9, 3.550894905671666*^9, 3.550894954073001*^9, 
   3.5509654508057747`*^9, 3.550965722775042*^9, 3.550966546570478*^9, 
   3.5509684041182213`*^9, {3.550969050981595*^9, 3.550969116767434*^9}, 
   3.55096929125526*^9, 3.550972853602371*^9, 3.5509728879932337`*^9, 
   3.550973024497192*^9, 3.550973166314039*^9, {3.5509735105585403`*^9, 
   3.550973521502524*^9}, 3.550973955564569*^9, 3.550974352773946*^9, 
   3.550974580400556*^9, 3.550974686415539*^9, 3.550974866462269*^9, 
   3.550978389626725*^9, 3.5509789352766113`*^9, 3.5509789699930696`*^9, 
   3.550981398414813*^9, 3.551022006939537*^9, 3.551444555099888*^9, 
   3.551466050579515*^9, 3.5515435358720837`*^9, 3.551556548946341*^9, 
   3.551556592631609*^9, 3.551556902245529*^9, 3.551557302286337*^9, {
   3.5515585212443027`*^9, 3.55155854510893*^9}, 3.551558669978489*^9, 
   3.551744633434957*^9, 3.551754302640765*^9, 3.551754415293439*^9, 
   3.5518042456219187`*^9, 3.5518328220269623`*^9, {3.552099079373914*^9, 
   3.552099097830332*^9}, 3.5521029021158857`*^9, 3.552103095302619*^9, 
   3.552103211246333*^9, 3.552103677915688*^9, 3.552103763784265*^9, {
   3.552103818173439*^9, 3.552103837602903*^9}, 3.552145511233996*^9, 
   3.552145625733081*^9, 3.55214819232927*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Cos", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}]}], "0"},
     {
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}]}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], "0"},
     {"0", "0", "1"},
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"1", "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550885977108293*^9, {3.55088601344246*^9, 3.550886037236019*^9}, {
   3.550886082814598*^9, 3.550886096483796*^9}, {3.550886129949708*^9, 
   3.550886185079857*^9}, 3.550887249209855*^9, {3.55088757146227*^9, 
   3.550887599343141*^9}, {3.5508877273287888`*^9, 3.55088781634863*^9}, 
   3.550887902899816*^9, 3.550888099547114*^9, 3.55088818237062*^9, 
   3.550888258146317*^9, 3.55088832336272*^9, {3.550890198385145*^9, 
   3.550890205701707*^9}, {3.550890799179858*^9, 3.55089081489427*^9}, 
   3.550890914320635*^9, 3.550890966306183*^9, {3.5508911482675734`*^9, 
   3.550891158551487*^9}, 3.550891195113048*^9, {3.5508912421821003`*^9, 
   3.550891252143075*^9}, {3.55089137572398*^9, 3.550891470297035*^9}, {
   3.550891552221784*^9, 3.550891599646216*^9}, {3.550891630919746*^9, 
   3.5508916502764463`*^9}, {3.550891738623711*^9, 3.550891771340602*^9}, {
   3.550891802657572*^9, 3.550891819479784*^9}, {3.55089223392675*^9, 
   3.550892250094625*^9}, {3.55089228943498*^9, 3.550892309685103*^9}, {
   3.550892359853956*^9, 3.550892389039001*^9}, {3.550892432117477*^9, 
   3.550892484757622*^9}, 3.5508927369849987`*^9, {3.550894071429689*^9, 
   3.550894094773944*^9}, {3.550894308113586*^9, 3.550894353067093*^9}, {
   3.5508944912902308`*^9, 3.5508945186140738`*^9}, {3.550894563199967*^9, 
   3.550894614751647*^9}, {3.550894731845622*^9, 3.55089475981496*^9}, 
   3.5508947954667473`*^9, 3.550894905671666*^9, 3.550894954073001*^9, 
   3.5509654508057747`*^9, 3.550965722775042*^9, 3.550966546570478*^9, 
   3.5509684041182213`*^9, {3.550969050981595*^9, 3.550969116767434*^9}, 
   3.55096929125526*^9, 3.550972853602371*^9, 3.5509728879932337`*^9, 
   3.550973024497192*^9, 3.550973166314039*^9, {3.5509735105585403`*^9, 
   3.550973521502524*^9}, 3.550973955564569*^9, 3.550974352773946*^9, 
   3.550974580400556*^9, 3.550974686415539*^9, 3.550974866462269*^9, 
   3.550978389626725*^9, 3.5509789352766113`*^9, 3.5509789699930696`*^9, 
   3.550981398414813*^9, 3.551022006939537*^9, 3.551444555099888*^9, 
   3.551466050579515*^9, 3.5515435358720837`*^9, 3.551556548946341*^9, 
   3.551556592631609*^9, 3.551556902245529*^9, 3.551557302286337*^9, {
   3.5515585212443027`*^9, 3.55155854510893*^9}, 3.551558669978489*^9, 
   3.551744633434957*^9, 3.551754302640765*^9, 3.551754415293439*^9, 
   3.5518042456219187`*^9, 3.5518328220269623`*^9, {3.552099079373914*^9, 
   3.552099097830332*^9}, 3.5521029021158857`*^9, 3.552103095302619*^9, 
   3.552103211246333*^9, 3.552103677915688*^9, 3.552103763784265*^9, {
   3.552103818173439*^9, 3.552103837602903*^9}, 3.552145511235507*^9, 
   3.552145625733385*^9, 3.5521481923294973`*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Using Energy Equivalence to Determine Mass In Arbitrary Coordinates\
\>", "Subsection",
 CellChangeTimes->{3.551445066157405*^9, 3.5521036779167767`*^9, 
  3.552103763784981*^9, 3.5521038376043158`*^9, 3.552145625733521*^9, 
  3.552148192329558*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "Energy", " ", "plays", " ", "an", " ", "important", " ", "role", " ", "in",
    " ", "our", " ", "control", " ", "equations", " ", "primarily", " ", 
   "because", " ", "it", " ", "is", " ", "a", " ", "scalar", " ", "quantity", 
   " ", "that", " ", "is", " ", "identical", " ", "in", " ", "all", " ", 
   "coordinate", " ", 
   RowBox[{"systems", ".", " ", "Moreover"}]}], ",", " ", 
  RowBox[{
  "should", " ", "the", " ", "equations", " ", "contain", " ", "energy", " ", 
   "due", " ", "to", " ", "different", " ", "sources", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"kinetic", " ", "energy"}], ",", " ", 
     RowBox[{"gravitational", " ", "potential", " ", "energy"}]}], ")"}]}], 
  ",", " ", 
  RowBox[{"we", " ", "can", " ", "just", " ", "sum", " ", "them", " ", 
   RowBox[{"up", ".", " ", "Or"}], " ", "alternatively"}], ",", " ", 
  RowBox[{
  "we", " ", "can", " ", "factorize", " ", "our", " ", "controller", " ", 
   "into", " ", "multiple", " ", "controllers", " ", "that", " ", "handle", 
   " ", "the", " ", "different", " ", "energy", " ", 
   RowBox[{
   "sources", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "One"}], " ",
    "may", " ", "note", " ", "that", " ", "while", " ", "energy", " ", "is", 
   " ", "the", " ", "same", " ", "across", " ", "coordinate", " ", 
   "systems"}], ",", " ", 
  RowBox[{"mass", " ", "is", " ", 
   RowBox[{"not", ".", " ", "The"}], " ", "interpretation", " ", "of", " ", 
   "mass", " ", "depends", " ", "on", " ", "the", " ", "coordinate", " ", 
   "frame", " ", "in", " ", "which", " ", "we", " ", "wish", " ", "to", " ", 
   "interpret", " ", 
   RowBox[{"it", ".", " ", "\[IndentingNewLine]", "Mass"}], " ", "is", " ", 
   "isotropic", " ", "in", " ", "Euclidean", " ", "coordinates"}], ",", " ", 
  RowBox[{"but", " ", "is", " ", "not", " ", "generally", " ", 
   RowBox[{"so", ".", " ", "However"}]}], ",", " ", 
  RowBox[{
  "we", " ", "typically", " ", "find", " ", "it", " ", "easy", " ", "to", " ",
    "measure", " ", "the", " ", "mass", " ", "in", " ", "Euclidean", " ", 
   "coordinates", " ", "so", " ", "we", " ", "will", " ", "start", " ", 
   RowBox[{
   "there", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "Now"}], " ", 
   "that", " ", "we", " ", "have", " ", "the", " ", "Jacobians", " ", "at", 
   " ", "the", " ", "centers", " ", "of", " ", "mass", " ", "of", " ", "the", 
   " ", 
   RowBox[{"robot", "'"}], "s", " ", "links"}], ",", " ", 
  RowBox[{
   RowBox[{
   "we", " ", "can", " ", "go", " ", "ahead", " ", "and", " ", "compute", " ",
     "each", " ", 
    RowBox[{"link", "'"}], "s", " ", "energy", " ", "contribution", " ", "to",
     " ", "the", " ", "overall", " ", "kinetic", " ", "energy", " ", "of", 
    " ", "the", " ", 
    RowBox[{"robot", ".", " ", "\[IndentingNewLine]", "Doing"}], " ", "so", 
    " ", "will", " ", "help", " ", "us", " ", "project", " ", "mass", " ", 
    "from", " ", "Euclidean", " ", "to", " ", "another", " ", "coordinate", 
    " ", "system", " ", 
    RowBox[{"later", ":", "\[IndentingNewLine]", 
     RowBox[{"Kinetic", " ", "Energy"}]}]}], " ", "=", " ", 
   RowBox[{
    RowBox[{"1", "/", "2"}], " ", "*", 
    RowBox[{
     UnderoverscriptBox["\[Sum]", 
      RowBox[{"i", "=", "0"}], 
      RowBox[{"ndof", "-", "1"}]], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        SubscriptBox["dx", "i"], "'"}], " ", ".", " ", 
       SubscriptBox["Mcom", "i"], " ", ".", " ", 
       SubscriptBox["dx", "i"]}], ")"}]}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"where", ":", "\[IndentingNewLine]", 
    SubscriptBox["Mcom", "i"]}], " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["m", "i"], "0", "0", "0", "0", "0"},
      {"0", 
       SubscriptBox["m", "i"], "0", "0", "0", "0"},
      {"0", "0", 
       SubscriptBox["m", "i"], "0", "0", "0"},
      {"0", "0", "0", 
       SubscriptBox["Ixx", "i"], 
       SubscriptBox["Ixy", "i"], 
       SubscriptBox["Ixz", "i"]},
      {"0", "0", "0", 
       SubscriptBox["Ixy", "i"], 
       SubscriptBox["Iyy", "i"], 
       SubscriptBox["Iyz", "i"]},
      {"0", "0", "0", 
       SubscriptBox["Ixz", "i"], 
       SubscriptBox["Iyz", "i"], 
       SubscriptBox["Izz", "i"]}
     }], "\[NoBreak]", ")"}]}], ",", " ", 
  RowBox[{
   SubscriptBox["dx", "i"], " ", "=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"(", "\[NoBreak]", GridBox[{
         {
          SubscriptBox["dx", "i"]},
         {
          SubscriptBox["dy", "i"]},
         {
          SubscriptBox["dz", "i"]},
         {
          SubscriptBox["\[Omega]", 
           SubscriptBox["x", "i"]]},
         {
          SubscriptBox["\[Omega]", 
           SubscriptBox["y", "i"]]},
         {
          SubscriptBox["\[Omega]", 
           SubscriptBox["z", "i"]]}
        }], "\[NoBreak]", ")"}], ".", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "Energy"}], " ", "of", " ", "one", " ", "link", 
     " ", 
     RowBox[{"(", "i", ")"}]}], " ", "=", " ", 
    RowBox[{
     RowBox[{"1", "/", "2"}], " ", 
     RowBox[{
      SubscriptBox["dx", "i"], "'"}], " ", 
     SubscriptBox["Mcom", "i"], " ", 
     SubscriptBox["dx", "i"]}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Energy", " ", "of", " ", "robot"}], " ", "=", " ", 
  RowBox[{
  "Sum", " ", "over", " ", "the", " ", "energies", " ", "of", " ", "the", " ",
    "3", " ", "links"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Given", " ", "another", " ", "arbitrary", " ", "coordinate", " ", 
   "system"}], ",", " ", 
  RowBox[{
  "the", " ", "kinetic", " ", "energy", " ", "is", " ", "merely", " ", "the", 
   " ", "quadratic", " ", "form", " ", "over", " ", "the", " ", 
   RowBox[{"robot", "'"}], "s", " ", "velocities", " ", "and", " ", "the", 
   " ", "projection", " ", "of", " ", "its", " ", "mass", " ", "into", " ", 
   "the", " ", "coordinate", " ", "system"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Kinetic", " ", "Energy"}], "   ", "=", " ", 
  RowBox[{
   RowBox[{
    RowBox[{"1", "/", "2"}], " ", 
    RowBox[{
     RowBox[{
      SubscriptBox["dx", "arb"], "'"}], " ", ".", " ", 
     SubscriptBox["M", "arb"], " ", ".", " ", 
     SubscriptBox["dx", "arb"]}]}], " ", "=", " ", 
   RowBox[{
    RowBox[{"1", "/", "2"}], " ", "*", 
    RowBox[{
     UnderoverscriptBox["\[Sum]", 
      RowBox[{"i", "=", "0"}], 
      RowBox[{"ndof", "-", "1"}]], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{
        SubscriptBox["dx", "i"], "'"}], " ", ".", " ", 
       SubscriptBox["Mcom", "i"], " ", ".", " ", 
       SubscriptBox["dx", "i"]}], ")"}]}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Note", ",", " ", "however", ",", " ", 
   RowBox[{
   "that", " ", "the", " ", "above", " ", "equation", " ", "will", " ", 
    "only", " ", "hold", " ", "when", " ", "the", " ", "arbitrary", " ", 
    "coordinate", " ", "system", " ", "can", " ", "describe", " ", "the", " ", 
    RowBox[{"robot", "'"}], "s", " ", 
    RowBox[{"configuration", ".", " ", "We"}], " ", "can", " ", "not"}], ",", 
   " ", 
   RowBox[{"for", " ", "instance"}], ",", " ", 
   RowBox[{
   "use", " ", "a", " ", "coordinate", " ", "system", " ", "that", " ", "is", 
    " ", "a", " ", "subset", " ", "of", " ", "the", " ", 
    RowBox[{"robot", "'"}], "s", " ", "degrees", " ", "of", " ", "freedom"}], 
   ",", " ", 
   RowBox[{
   "which", " ", "is", " ", "insufficient", " ", "to", " ", "describe", " ", 
    "the", " ", "entire", " ", 
    RowBox[{"robot", "'"}], "s", " ", 
    RowBox[{
    "energy", ".", " ", "\[IndentingNewLine]", "\[IndentingNewLine]", "Now"}],
     " ", "to", " ", "project", " ", "mass", " ", "between", " ", "two", " ", 
    "coordinate", " ", "systems"}], ",", " ", 
   RowBox[{
    RowBox[{
    "we", " ", "use", " ", "the", " ", "Jacobian", " ", "between", " ", 
     RowBox[{"them", ":", " ", "\[IndentingNewLine]", 
      SubscriptBox["dx", "i"]}]}], " ", "=", " ", 
    RowBox[{
     SubscriptBox["J", "i"], " ", 
     SubscriptBox["dx", "arb"], 
     RowBox[{"(", " ", 
      RowBox[{
       RowBox[{
        SubscriptBox["J", "i"], " ", "=", " ", 
        RowBox[{"[", 
         RowBox[{
          SubscriptBox["\[Delta]x", "i"], "/", 
          SubscriptBox["\[Delta]x", "arb"]}], "]"}]}], ",", " ", 
       RowBox[{"matrix", " ", "of", " ", "partial", " ", "derivatives"}]}], 
      " ", ")"}]}]}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Using", " ", "the", " ", "Jacobian"}], ",", " ", 
  RowBox[{
   RowBox[{"we", " ", 
    RowBox[{"get", ":", "\[IndentingNewLine]", "KE"}]}], " ", "=", " ", 
   RowBox[{
    UnderoverscriptBox["\[Sum]", 
     RowBox[{"i", "=", "0"}], 
     RowBox[{"ndof", "-", "1"}]], 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       SubscriptBox["dx", "i"], "'"}], " ", ".", " ", 
      SubscriptBox["Mcom", "i"], " ", ".", " ", 
      SubscriptBox["dx", "i"]}], ")"}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{"            ", 
  RowBox[{"=", " ", 
   RowBox[{
    UnderoverscriptBox["\[Sum]", 
     RowBox[{"i", "=", "0"}], 
     RowBox[{"ndof", "-", "1"}]], 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       SubscriptBox["dx", "arb"], "'"}], " ", 
      RowBox[{
       RowBox[{
        SubscriptBox["J", "i"], "'"}], " ", ".", " ", 
       SubscriptBox["Mcom", "i"], " ", ".", " ", 
       SubscriptBox["J", "i"]}], " ", 
      SubscriptBox["dx", "arb"]}], ")"}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Since", " ", 
   SubscriptBox["dx", "arb"], " ", "can", " ", "hold", " ", "any", " ", 
   "value", " ", "in", " ", "the", " ", "above", " ", "equation"}], ",", " ", 
  
  RowBox[{"we", " ", "have"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   SubscriptBox["M", "arb"], " ", "=", " ", 
   RowBox[{
    UnderoverscriptBox["\[Sum]", 
     RowBox[{"i", "=", "0"}], 
     RowBox[{"ndof", "-", "1"}]], 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       SubscriptBox["J", "i"], "'"}], " ", ".", " ", 
      SubscriptBox["Mcom", "i"], " ", ".", " ", 
      SubscriptBox["J", "i"]}], ")"}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"A", " ", "reminder"}], ",", " ", 
  RowBox[{
   SubscriptBox["M", "arb"], " ", "is", " ", "simply", " ", "a", " ", 
   "projection", " ", "of", " ", "the", " ", "masses", " ", "of", " ", "the", 
   " ", "links", " ", "into", " ", "another", " ", "coordinate", " ", 
   RowBox[{"system", "."}]}]}]}], "Text",
 CellChangeTimes->{{3.550965553568038*^9, 3.55096569948991*^9}, {
   3.550965754878458*^9, 3.550965755776338*^9}, {3.550965805701571*^9, 
   3.550965842044579*^9}, {3.550966049844583*^9, 3.550966068896654*^9}, {
   3.550966140226569*^9, 3.550966176546878*^9}, {3.5509667741356916`*^9, 
   3.550966776691702*^9}, {3.5509672218616734`*^9, 3.5509672479009113`*^9}, {
   3.5509684012101593`*^9, 3.550968459444889*^9}, {3.550968596753585*^9, 
   3.550968613424542*^9}, {3.5509687279290867`*^9, 3.5509687290201902`*^9}, {
   3.5509693117546787`*^9, 3.550969313045876*^9}, {3.550969388324683*^9, 
   3.5509694039257803`*^9}, {3.550969666662319*^9, 3.550969798450693*^9}, {
   3.5509699141120987`*^9, 3.550970038072392*^9}, {3.550973611813203*^9, 
   3.5509737051519613`*^9}, {3.5509740401104593`*^9, 
   3.5509740408318043`*^9}, {3.5514447427080593`*^9, 3.551444837214097*^9}, {
   3.551445062575107*^9, 3.551445064507457*^9}, {3.552096874170315*^9, 
   3.5520970752563553`*^9}, {3.5520971134452753`*^9, 3.552097332903261*^9}, {
   3.552097377761977*^9, 3.552097469615384*^9}, {3.552097508801654*^9, 
   3.552097985192292*^9}, {3.552098021036005*^9, 3.552098144838168*^9}, {
   3.552098272234991*^9, 3.552098561960541*^9}, {3.552098707208705*^9, 
   3.55209884670394*^9}, {3.552098970457302*^9, 3.5520990489706078`*^9}, 
   3.55210367791998*^9, 3.5521037637860003`*^9, 3.552103837605357*^9, 
   3.55214562573512*^9, 3.552148192330947*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Center", " ", "of", " ", "mass", " ", 
     RowBox[{"(", 
      SubscriptBox["COM", "i"], ")"}]}], ",", " ", 
    RowBox[{"Euclidean", " ", "Space", " ", 
     RowBox[{"Mass", "/", "Inertia"}], " ", "Matrix"}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     SubscriptBox["m", "0"], " ", "=", " ", "10"}], ";", " ", 
    RowBox[{
     SubscriptBox["Ixx", "0"], " ", "=", " ", "5"}], ";", " ", 
    RowBox[{
     SubscriptBox["Iyy", "0"], " ", "=", " ", "5"}], ";", " ", 
    RowBox[{
     SubscriptBox["Izz", "0"], " ", "=", " ", "2"}], ";"}], 
   "\[IndentingNewLine]", " ", 
   RowBox[{
    RowBox[{
     SubscriptBox["Ixy", "0"], " ", "=", " ", "0"}], ";", " ", 
    RowBox[{
     SubscriptBox["Ixz", "0"], " ", "=", " ", "0"}], ";", " ", 
    RowBox[{
     SubscriptBox["Iyz", "0"], " ", "=", " ", "0"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["m", "1"], " ", "=", " ", "5"}], ";", " ", 
    RowBox[{
     SubscriptBox["Ixx", "1"], " ", "=", " ", "3"}], ";", " ", 
    RowBox[{
     SubscriptBox["Iyy", "1"], " ", "=", " ", "3"}], ";", " ", 
    RowBox[{
     SubscriptBox["Izz", "1"], " ", "=", " ", "1"}], ";"}], 
   "\[IndentingNewLine]", " ", 
   RowBox[{
    RowBox[{
     SubscriptBox["Ixy", "1"], " ", "=", " ", "0"}], ";", " ", 
    RowBox[{
     SubscriptBox["Ixz", "1"], " ", "=", " ", "0"}], ";", " ", 
    RowBox[{
     SubscriptBox["Iyz", "1"], " ", "=", " ", "0"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["m", "2"], " ", "=", " ", "3"}], ";", " ", 
    RowBox[{
     SubscriptBox["Ixx", "2"], " ", "=", " ", "2"}], ";", " ", 
    RowBox[{
     SubscriptBox["Iyy", "2"], " ", "=", " ", "2"}], ";", " ", 
    RowBox[{
     SubscriptBox["Izz", "2"], " ", "=", " ", "0.5"}], ";"}], 
   "\[IndentingNewLine]", " ", 
   RowBox[{
    RowBox[{
     SubscriptBox["Ixy", "2"], " ", "=", " ", "0"}], ";", " ", 
    RowBox[{
     SubscriptBox["Ixz", "2"], " ", "=", " ", "0"}], ";", " ", 
    RowBox[{
     SubscriptBox["Iyz", "2"], " ", "=", " ", "0"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["Mcom", "i_"], " ", ":=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {
         SubscriptBox["m", "i"], "0", "0", "0", "0", "0"},
        {"0", 
         SubscriptBox["m", "i"], "0", "0", "0", "0"},
        {"0", "0", 
         SubscriptBox["m", "i"], "0", "0", "0"},
        {"0", "0", "0", 
         SubscriptBox["Ixx", "i"], 
         SubscriptBox["Ixy", "i"], 
         SubscriptBox["Ixz", "i"]},
        {"0", "0", "0", 
         SubscriptBox["Ixy", "i"], 
         SubscriptBox["Iyy", "i"], 
         SubscriptBox["Iyz", "i"]},
        {"0", "0", "0", 
         SubscriptBox["Ixz", "i"], 
         SubscriptBox["Iyz", "i"], 
         SubscriptBox["Izz", "i"]}
       }], "\[NoBreak]", ")"}]}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.550965553568038*^9, 3.55096569948991*^9}, {
   3.550965754878458*^9, 3.550965755776338*^9}, {3.550965805701571*^9, 
   3.550965842044579*^9}, {3.550966049844583*^9, 3.550966068896654*^9}, {
   3.550966140226569*^9, 3.550966176546878*^9}, {3.5509667741356916`*^9, 
   3.550966776691702*^9}, {3.5509672218616734`*^9, 3.5509672479009113`*^9}, {
   3.5509684012101593`*^9, 3.550968459444889*^9}, {3.550968596753585*^9, 
   3.550968613424542*^9}, {3.5509687279290867`*^9, 3.5509687290201902`*^9}, {
   3.5509693117546787`*^9, 3.550969313045876*^9}, {3.550969388324683*^9, 
   3.5509694039257803`*^9}, {3.550969666662319*^9, 3.550969798450693*^9}, {
   3.5509699141120987`*^9, 3.550970038072392*^9}, {3.550973611813203*^9, 
   3.5509737051519613`*^9}, {3.5509740401104593`*^9, 
   3.5509740408318043`*^9}, {3.5514447427080593`*^9, 3.551444765002625*^9}, {
   3.5514448835764627`*^9, 3.551444891244285*^9}, {3.552099055515683*^9, 
   3.5520990556922817`*^9}, 3.552103677920546*^9, 3.552103763786544*^9, 
   3.5521038376058807`*^9, 3.5521456257360897`*^9, 3.552148192331768*^9}],

Cell[CellGroupData[{

Cell["Mass in the Generalized Coordinates", "Subsubsection",
 CellChangeTimes->{{3.5514451306028633`*^9, 3.5514451346457043`*^9}, 
   3.55210367792059*^9, 3.5521037637865753`*^9, 3.552103837605913*^9, 
   3.552145625736155*^9, 3.5521481923318167`*^9}],

Cell[TextData[{
 "Using the earlier equations we shall project mass into the generalized \
coordinates. Doing so will help us build our generalized coordinate \
controller.\n\nSince dx = J dq, we can use our earlier energy equivalence \
equations, to get a notion of mass in the generalized coordinates :\n   1/2 \
dq' Mgc dq = 1/2 ",
 Cell[BoxData[
  RowBox[{
   UnderoverscriptBox["\[Sum]", 
    RowBox[{"i", "=", "0"}], 
    RowBox[{"ndof", "-", "1"}]], 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"dq", "'"}], " ", 
     RowBox[{
      SubscriptBox["Jcom", "i"], "'"}], " ", 
     SubscriptBox["M", "i"], " ", 
     SubscriptBox["Jcom", "i"], " ", "dq"}], ")"}]}]], "Text",
  CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGCQAGIQHadr9OxtySvHiLX5P0B0iEzMfxB9+HoFmHYt3sb6
Dkgb5jpygejLbNYqIDpl4xw1EM3n0K4PotkaBE1A9LTwI3UgOkdJrB5EX5m0
exuIdrnyZyeIXrBTzes9kO6wyQsE0XGyM5JA9M2pa1NAtMjuv0UgOm2pQjGI
DlH7sRtEXyxX3AOizyV3HQXR/+bXHgfROwxDX4D15Zz7AaIDpjmzfwDSnIGH
xED0Idaqqx+B9L07Kg9B9KMOZu5PQFplnhSYzllx7cH1UqD4zWVvQLR7+iWO
G0BazFaAE0RbFLv6ipW/chQwyUgD0Zvs9bJBdMvzOW0gWi7JogdEW23cPB1E
qy2fOQdEO6mr3QDRX9QW3gHRbpek3oBonlb2PyD6wB47BXEgDQDjz8th
   "]],
 "\n\nWe use this relationship to derive Mgc from the M_i of the links at \
their centers of mass.  dq is arbitrary. So for the equations to hold, we \
must have :\n   Mgc = ",
 Cell[BoxData[
  RowBox[{
   UnderoverscriptBox["\[Sum]", 
    RowBox[{"i", "=", "0"}], 
    RowBox[{"ndof", "-", "1"}]], 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      SubscriptBox["Jcom", "i"], "'"}], " ", 
     SubscriptBox["M", "i"], " ", 
     SubscriptBox["Jcom", "i"]}], ")"}]}]], "Text",
  CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGCQAGIQHadr9OxtySvHiLX5P0B0iEzMfxB9+HoFmHYt3sb6
Dkgb5jpygejLbNYqIDpl4xw1EM3n0K4PotkaBE1A9LTwI3UgOkdJrB5EX5m0
exuIdrnyZyeIXrBTzes9kO6wyQsE0XGyM5JA9M2pa1NAtMjuv0UgOm2pQjGI
DlH7sRtEXyxX3AOizyV3HQXR/+bXHgfROwxDX4D15Zz7AaIDpjmzfwDSnIGH
xED0Idaqqx+B9L07Kg9B9KMOZu5PQFplnhSYzllx7cH1UqD4zWVvQLR7+iWO
G0BazFaAE0RbFLv6ipW/chQwyUgD0Zvs9bJBdMvzOW0gWi7JogdEW23cPB1E
qy2fOQdEO6mr3QDRX9QW3gHRbpek3oBonlb2PyD6wB47BXEgDQDjz8th
   "]]
}], "Text",
 CellChangeTimes->{{3.550965553568038*^9, 3.55096569948991*^9}, {
   3.550965754878458*^9, 3.550965755776338*^9}, {3.550965805701571*^9, 
   3.550965842044579*^9}, {3.550966049844583*^9, 3.550966068896654*^9}, {
   3.550966140226569*^9, 3.550966176546878*^9}, {3.5509667741356916`*^9, 
   3.550966776691702*^9}, {3.5509672218616734`*^9, 3.5509672479009113`*^9}, {
   3.5509684012101593`*^9, 3.550968459444889*^9}, {3.550968596753585*^9, 
   3.550968613424542*^9}, {3.5509687279290867`*^9, 3.5509687290201902`*^9}, {
   3.5509693117546787`*^9, 3.550969313045876*^9}, {3.550969388324683*^9, 
   3.5509694039257803`*^9}, {3.550969666662319*^9, 3.550969798450693*^9}, {
   3.5509699141120987`*^9, 3.550970038072392*^9}, {3.550973611813203*^9, 
   3.5509737051519613`*^9}, {3.5509740401104593`*^9, 
   3.5509740408318043`*^9}, {3.5514447427080593`*^9, 3.551444765002625*^9}, {
   3.5514448835764627`*^9, 3.551444921241555*^9}, 3.5514450815939913`*^9, 
   3.5514451399945*^9, {3.5514631194961452`*^9, 3.551463153295105*^9}, {
   3.552098179132227*^9, 3.552098191084107*^9}, {3.552098585457408*^9, 
   3.552098676660459*^9}, {3.552098859657783*^9, 3.552098944835073*^9}, {
   3.552103371995296*^9, 3.552103372638768*^9}, {3.5521036779207067`*^9, 
   3.552103677922665*^9}, {3.5521037637866793`*^9, 3.552103763788582*^9}, {
   3.552103837606022*^9, 3.5521038376079597`*^9}, {3.552145625736349*^9, 
   3.552145625739368*^9}, {3.5521481923319683`*^9, 3.552148192333974*^9}},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Mgc", " ", "=", " ", 
   RowBox[{
    UnderoverscriptBox["\[Sum]", 
     RowBox[{"i", "=", "0"}], "2"], 
    RowBox[{
     RowBox[{"Transpose", "[", 
      SubscriptBox["JOcom", "i"], "]"}], " ", ".", " ", 
     SubscriptBox["Mcom", "i"], " ", ".", " ", 
     SubscriptBox["JOcom", "i"]}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"FullSimplify", "[", "Mgc", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"FullSimplify", "[", 
   RowBox[{"Inverse", "[", "Mgc", "]"}], "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.550965553568038*^9, 3.55096569948991*^9}, {
   3.550965754878458*^9, 3.550965755776338*^9}, {3.550965805701571*^9, 
   3.550965842044579*^9}, {3.550966049844583*^9, 3.550966068896654*^9}, {
   3.550966140226569*^9, 3.550966176546878*^9}, {3.5509667741356916`*^9, 
   3.550966776691702*^9}, {3.5509672218616734`*^9, 3.5509672479009113`*^9}, {
   3.5509684012101593`*^9, 3.550968459444889*^9}, {3.550968596753585*^9, 
   3.550968613424542*^9}, {3.5509687279290867`*^9, 3.5509687290201902`*^9}, {
   3.5509693117546787`*^9, 3.550969313045876*^9}, {3.550969388324683*^9, 
   3.5509694039257803`*^9}, {3.550969666662319*^9, 3.550969798450693*^9}, {
   3.5509699141120987`*^9, 3.550970038072392*^9}, {3.550973611813203*^9, 
   3.5509737051519613`*^9}, {3.5509740401104593`*^9, 
   3.5509740408318043`*^9}, {3.5514447427080593`*^9, 3.551444765002625*^9}, {
   3.5514448835764627`*^9, 3.551444886192157*^9}, {3.55183296067188*^9, 
   3.551832965688635*^9}, {3.552098929258842*^9, 3.552098938010996*^9}, {
   3.5520990614076147`*^9, 3.552099063314598*^9}, 3.552103677922862*^9, 
   3.552103763788814*^9, 3.5521038376081533`*^9, 3.552145625740223*^9, 
   3.552148192334241*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"4.34453125`", "\[VeryThinSpace]", "+", 
       RowBox[{
        SubscriptBox["\[Theta]", "1"], " ", 
        RowBox[{"(", 
         RowBox[{"4.375`", "\[VeryThinSpace]", "+", 
          RowBox[{"8", " ", 
           SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], "0.`", "0.`"},
     {"0.`", "8.`", "0.`"},
     {"0.`", "0.`", "3.`"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.5509730246051903`*^9, 3.550973706833963*^9, {3.550974024532103*^9, 
   3.550974042813088*^9}, 3.550974120666716*^9, 3.550974352823859*^9, 
   3.550974580487954*^9, 3.5509746864800997`*^9, 3.550974866528688*^9, 
   3.5509783951253347`*^9, 3.550981398467709*^9, 3.551022007020768*^9, 
   3.5514445552009497`*^9, 3.551466050626998*^9, 3.551543535935096*^9, 
   3.551556549000388*^9, 3.551556592708427*^9, 3.551556902319932*^9, 
   3.551557302346362*^9, {3.551558521329267*^9, 3.551558545172145*^9}, 
   3.551558670074256*^9, 3.551744633514612*^9, 3.551754302881114*^9, 
   3.551754415393383*^9, 3.551804245754998*^9, 3.551832822083556*^9, 
   3.551832966637074*^9, {3.5520990683906612`*^9, 3.5520990978944483`*^9}, 
   3.5521029021757183`*^9, 3.552103095399744*^9, 3.552103211412284*^9, 
   3.552103677923009*^9, 3.552103763788973*^9, {3.552103818252586*^9, 
   3.552103837608284*^9}, 3.552145511290435*^9, 3.552145625740777*^9, 
   3.552148192334434*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      FractionBox["24.`", 
       RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"105.`", "\[VeryThinSpace]", "+", 
           RowBox[{"192.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]], "0.`", "0.`"},
     {"0.`", 
      RowBox[{"0.125`", "\[VeryThinSpace]", "+", 
       FractionBox["1.7763568394002505`*^-15", 
        RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
         RowBox[{
          SubscriptBox["\[Theta]", "1"], " ", 
          RowBox[{"(", 
           RowBox[{"105.`", "\[VeryThinSpace]", "+", 
            RowBox[{"192.`", " ", 
             SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]]}], "0.`"},
     {"0.`", "0.`", 
      RowBox[{"0.3333333333333333`", "\[VeryThinSpace]", "+", 
       FractionBox[
        RowBox[{
         RowBox[{"(", 
          RowBox[{"7.105427357601002`*^-15", "+", 
           RowBox[{"0.`", " ", "\[ImaginaryI]"}]}], ")"}], "-", 
         RowBox[{"8.881784197001252`*^-16", " ", 
          RowBox[{"Cos", "[", 
           RowBox[{"2", " ", 
            SubscriptBox["\[Theta]", "0"]}], "]"}]}]}], 
        RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
         RowBox[{
          SubscriptBox["\[Theta]", "1"], " ", 
          RowBox[{"(", 
           RowBox[{"105.`", "\[VeryThinSpace]", "+", 
            RowBox[{"192.`", " ", 
             SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.5509730246051903`*^9, 3.550973706833963*^9, {3.550974024532103*^9, 
   3.550974042813088*^9}, 3.550974120666716*^9, 3.550974352823859*^9, 
   3.550974580487954*^9, 3.5509746864800997`*^9, 3.550974866528688*^9, 
   3.5509783951253347`*^9, 3.550981398467709*^9, 3.551022007020768*^9, 
   3.5514445552009497`*^9, 3.551466050626998*^9, 3.551543535935096*^9, 
   3.551556549000388*^9, 3.551556592708427*^9, 3.551556902319932*^9, 
   3.551557302346362*^9, {3.551558521329267*^9, 3.551558545172145*^9}, 
   3.551558670074256*^9, 3.551744633514612*^9, 3.551754302881114*^9, 
   3.551754415393383*^9, 3.551804245754998*^9, 3.551832822083556*^9, 
   3.551832966637074*^9, {3.5520990683906612`*^9, 3.5520990978944483`*^9}, 
   3.5521029021757183`*^9, 3.552103095399744*^9, 3.552103211412284*^9, 
   3.552103677923009*^9, 3.552103763788973*^9, {3.552103818252586*^9, 
   3.552103837608284*^9}, 3.552145511440159*^9, 3.552145625741794*^9, 
   3.5521481923347807`*^9}]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Potential Energy Equivalence and Generalized Gravity", "Subsection",
 CellChangeTimes->{3.5514451611845512`*^9, 3.552103677923196*^9, 
  3.552103763789157*^9, 3.552103837608469*^9, 3.552145625741942*^9, 
  3.5521481923348303`*^9}],

Cell[TextData[{
 "The next step is to model the gravitational field :\n   The work done \
against gravity is the same in all coordinate systems,\n and we shall use \
this to project the gravitational field into our generalized\n coordinates.\n \
   ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["grav", "q"], TraditionalForm]]],
 " . \[Delta]q = ",
 Cell[BoxData[
  RowBox[{
   UnderoverscriptBox["\[Sum]", 
    RowBox[{"i", "=", "0"}], 
    RowBox[{"ndof", "-", "1"}]], 
   RowBox[{"(", 
    RowBox[{
     SubscriptBox["Fgrav", "i"], ".", 
     SubscriptBox["\[Delta]xcom", "i"]}], ")"}]}]], "Text",
  CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGCQAGIQHadr9OxtySvHiLX5P0B0iEzMfxB9+HoFmHYt3sb6
Dkgb5jpygejLbNYqIDpl4xw1EM3n0K4PotkaBE1A9LTwI3UgOkdJrB5EX5m0
exuIdrnyZyeIXrBTzes9kO6wyQsE0XGyM5JA9M2pa1NAtMjuv0UgOm2pQjGI
DlH7sRtEXyxX3AOizyV3HQXR/+bXHgfROwxDX4D15Zz7AaIDpjmzfwDSnIGH
xED0Idaqqx+B9L07Kg9B9KMOZu5PQFplnhSYzllx7cH1UqD4zWVvQLR7+iWO
G0BazFaAE0RbFLv6ipW/chQwyUgD0Zvs9bJBdMvzOW0gWi7JogdEW23cPB1E
qy2fOQdEO6mr3QDRX9QW3gHRbpek3oBonlb2PyD6wB47BXEgDQDjz8th
   "]],
 "\n    ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["grav", "q"], TraditionalForm]]],
 " . \[Delta]q = ",
 Cell[BoxData[
  RowBox[{
   UnderoverscriptBox["\[Sum]", 
    RowBox[{"i", "=", "0"}], 
    RowBox[{"ndof", "-", "1"}]], 
   RowBox[{"(", 
    RowBox[{
     SubscriptBox["Fgrav", "i"], ".", " ", 
     SubscriptBox["Jcom", "i"], ".", "\[Delta]q"}], ")"}]}]], "Text",
  CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGCQAGIQHadr9OxtySvHiLX5P0B0iEzMfxB9+HoFmHYt3sb6
Dkgb5jpygejLbNYqIDpl4xw1EM3n0K4PotkaBE1A9LTwI3UgOkdJrB5EX5m0
exuIdrnyZyeIXrBTzes9kO6wyQsE0XGyM5JA9M2pa1NAtMjuv0UgOm2pQjGI
DlH7sRtEXyxX3AOizyV3HQXR/+bXHgfROwxDX4D15Zz7AaIDpjmzfwDSnIGH
xED0Idaqqx+B9L07Kg9B9KMOZu5PQFplnhSYzllx7cH1UqD4zWVvQLR7+iWO
G0BazFaAE0RbFLv6ipW/chQwyUgD0Zvs9bJBdMvzOW0gWi7JogdEW23cPB1E
qy2fOQdEO6mr3QDRX9QW3gHRbpek3oBonlb2PyD6wB47BXEgDQDjz8th
   "]],
 " ....[\[Delta]x = J \[Delta]q]\n       ",
 Cell[BoxData[
  FormBox[
   RowBox[{"    ", 
    SubscriptBox["grav", "q"]}], TraditionalForm]]],
 " = ",
 Cell[BoxData[
  RowBox[{
   UnderoverscriptBox["\[Sum]", 
    RowBox[{"i", "=", "0"}], 
    RowBox[{"ndof", "-", "1"}]], 
   RowBox[{"(", 
    RowBox[{
     SubscriptBox["Fgrav", "i"], ".", " ", 
     SubscriptBox["Jcom", "i"]}], ")"}]}]], "Text",
  CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGCQAGIQHadr9OxtySvHiLX5P0B0iEzMfxB9+HoFmHYt3sb6
Dkgb5jpygejLbNYqIDpl4xw1EM3n0K4PotkaBE1A9LTwI3UgOkdJrB5EX5m0
exuIdrnyZyeIXrBTzes9kO6wyQsE0XGyM5JA9M2pa1NAtMjuv0UgOm2pQjGI
DlH7sRtEXyxX3AOizyV3HQXR/+bXHgfROwxDX4D15Zz7AaIDpjmzfwDSnIGH
xED0Idaqqx+B9L07Kg9B9KMOZu5PQFplnhSYzllx7cH1UqD4zWVvQLR7+iWO
G0BazFaAE0RbFLv6ipW/chQwyUgD0Zvs9bJBdMvzOW0gWi7JogdEW23cPB1E
qy2fOQdEO6mr3QDRX9QW3gHRbpek3oBonlb2PyD6wB47BXEgDQDjz8th
   "]],
 "    ....[\[Delta]q is arbitrary]"
}], "Text",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQAWIQHfHgxO23Ja8cmWeE3wHRr9LnJb8D0nZ7XFJA9KoW
8UwQnc0vD6a3HG2vANEd0r/bQHTlmUndIDrz4Xcw7RIzdxeIPpO05DSILls2
9TyIzvJRvwqidTRtnoLFZ/c8A9H586N3vwfSm6bMB9MrfXT4PwHphhP1MiD6
gOMaBRC9YW+7Eoiu+Ri0/iuQnvw/YiOI/iDxS+RG6SvHPUU14iC66sDmLPHy
V473zpypA9HrFM1qJIG0j/hLMJ3cvXc+iBbbAKGTHCtXgehlSRBaqXLzZhCd
ORdCux0wl9YD0h6vIfTO7Vwx+kA66zaEBgBRf67A
  "],
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"NOTE", " ", ":", " ", 
      RowBox[{"We", " ", "shall", " ", "use", " ", 
       RowBox[{"Khatib", "'"}], "s", " ", "notation", " ", "and", " ", "call",
        " ", "this", " ", "generalized", " ", "gravity", " ", "force", " ", 
       RowBox[{"vector", " ", "'"}], 
       RowBox[{"g", "'"}], " ", "\[IndentingNewLine]", "NOTE"}], ":", " ", 
      RowBox[{
       RowBox[{
       "We", " ", "shall", " ", "also", " ", "assume", " ", "that", " ", 
        RowBox[{"acc", ".", " ", "due"}], " ", "to", " ", "gravity", " ", 
        "is"}], " ", "-", 
       RowBox[{"9.8", 
        RowBox[{"m", "/", 
         SuperscriptBox["s", "2"]}], " ", "in", " ", "the", " ", "z", " ", 
        RowBox[{"direction", ".", "\[IndentingNewLine]", "So"}], " ", 
        SubscriptBox["Fgrav", "i"]}]}]}], " ", "=", " ", 
     RowBox[{"g", " ", "*", " ", 
      SubscriptBox["m", "i"]}]}], ",", " ", 
    RowBox[{
    "at", " ", "the", " ", "center", " ", "of", " ", "mass", " ", "of", " ", 
     "each", " ", "link"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"g", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"0"},
        {"0"},
        {
         RowBox[{"-", "9.8"}]}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Also", " ", "transpose", " ", "everything", " ", "so", " ", "we", " ", 
     "end", " ", "up", " ", "with", " ", "column", " ", 
     RowBox[{"vectors", "."}]}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["g", "q"], " ", "=", " ", 
     RowBox[{
      RowBox[{"Transpose", "[", " ", 
       RowBox[{
        UnderoverscriptBox["\[Sum]", 
         RowBox[{"i", "=", "0"}], "2"], 
        RowBox[{
         RowBox[{"Take", "[", 
          RowBox[{
           SubscriptBox["JOcom", "i"], ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", " ", "3"}], "}"}]}], "]"}], " ", "*", " ", 
         SubscriptBox["m", "i"]}]}], " ", "]"}], " ", ".", " ", "g"}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "Our", " ", "controller", " ", "now", " ", "needs", " ", "to", " ", 
     "apply", " ", "an", " ", "equal", " ", "and", " ", "opposite", " ", 
     "force", " ", "to", " ", "cancel", " ", 
     RowBox[{"gravity", "'"}], "s", " ", "effect"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     SubscriptBox["g", "q"], " ", "=", " ", 
     RowBox[{"-", 
      SubscriptBox["g", "q"]}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    RowBox[{"FullSimplify", "[", 
     SubscriptBox["g", "q"], "]"}], "]"}], "\[IndentingNewLine]"}]}]], "Input",\

 CellChangeTimes->{{3.5509654702773857`*^9, 3.550965474737306*^9}, {
   3.550966556950185*^9, 3.550966562147979*^9}, {3.5509666007349443`*^9, 
   3.550966600970632*^9}, {3.5509667242428837`*^9, 3.5509668398471107`*^9}, {
   3.55096687658746*^9, 3.550966879746266*^9}, {3.550967252917513*^9, 
   3.55096738913706*^9}, {3.55096742067657*^9, 3.550967465228078*^9}, {
   3.550967593880026*^9, 3.550967604393977*^9}, {3.550969306863212*^9, 
   3.5509693089869013`*^9}, {3.550974073384358*^9, 3.550974179993225*^9}, {
   3.550974213383026*^9, 3.550974228241905*^9}, {3.550981498591978*^9, 
   3.550981514781198*^9}, {3.551445159815544*^9, 3.551445170176553*^9}, {
   3.551543450701786*^9, 3.5515434580573673`*^9}, {3.5520993416764393`*^9, 
   3.552099397737503*^9}, {3.552099728077922*^9, 3.5520997596803923`*^9}, 
   3.5521036779283543`*^9, 3.5521037637937393`*^9, 3.552103837613483*^9, 
   3.5521456257479467`*^9, 3.5521481923397408`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.`"},
     {"0.`"},
     {"29.400000000000002`"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.5509673206801977`*^9, 3.550967350262908*^9}, 
   3.550967393545143*^9, {3.550967431887904*^9, 3.55096746602602*^9}, 
   3.550968404182968*^9, 3.550969051050075*^9, {3.5509690901403837`*^9, 
   3.550969116836265*^9}, 3.5509692914901047`*^9, 3.550972854013254*^9, 
   3.550973024627108*^9, 3.5509741225253487`*^9, {3.550974161159389*^9, 
   3.550974182121312*^9}, 3.55097422980552*^9, 3.550974352851269*^9, 
   3.550974580523203*^9, 3.5509746865116663`*^9, 3.55097486655657*^9, 
   3.550978408583502*^9, 3.550981398501274*^9, 3.551022007052228*^9, 
   3.5514445552136183`*^9, 3.551466050665502*^9, 3.551543535947706*^9, 
   3.551556549041407*^9, 3.551556592756995*^9, 3.551556902368717*^9, 
   3.551557302391198*^9, {3.551558521404684*^9, 3.551558545207512*^9}, 
   3.5515586701295557`*^9, 3.55174463355077*^9, 3.551754302892056*^9, 
   3.551754415425671*^9, 3.55180424579165*^9, 3.5518328221126757`*^9, 
   3.5520990979425364`*^9, 3.552099456615987*^9, 3.5520997611587553`*^9, 
   3.552102902219133*^9, 3.5521030955084543`*^9, 3.552103211514084*^9, 
   3.552103677928506*^9, 3.552103763793833*^9, {3.55210381832207*^9, 
   3.552103837613598*^9}, 3.552145511498782*^9, 3.552145625748043*^9, 
   3.552148192339835*^9}]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Computing Joint Space Dynamic Control ", "Section",
 CellChangeTimes->{{3.5514452066851807`*^9, 3.5514452236772833`*^9}, 
   3.5521036779285593`*^9, 3.552103763793867*^9, 3.5521038376136417`*^9, 
   3.5521456257480783`*^9, 3.552148192339868*^9}],

Cell[CellGroupData[{

Cell["Dynamic control equations in the generalized coordinates", "Subsection",
 CellChangeTimes->{{3.551445235231783*^9, 3.551445245900548*^9}, 
   3.55210367792861*^9, 3.5521037637939*^9, 3.552103837613682*^9, 
   3.552145625748115*^9, 3.552148192339904*^9}],

Cell[TextData[Cell[BoxData[{
 StyleBox[
  RowBox[{
   RowBox[{
   "Once", " ", "we", " ", "have", " ", "the", " ", "dynamics", " ", "model", 
    " ", 
    RowBox[{"(", 
     RowBox[{"A", " ", "and", " ", 
      SubscriptBox["g", "q"]}], ")"}]}], ",", " ", 
   RowBox[{
   "we", " ", "can", " ", "go", " ", "ahead", " ", "and", " ", "dynamically", 
    " ", "decouple", " ", "the", " ", 
    RowBox[{"robot", "'"}], "s", " ", "inertia", " ", "from", " ", "its", " ", 
    RowBox[{"motion", ".", "\[IndentingNewLine]", 
     RowBox[{"NOTE", ":", 
      RowBox[{
      "Full", " ", "decoupling", " ", "also", " ", "requires", " ", 
       "compensating", " ", "for", " ", "velocity", " ", "related", " ", 
       "centrifugal", " ", "and", " ", "coriolis", " ", 
       RowBox[{"forces", ".", " ", "Doing"}], " ", "so"}]}]}]}], ",", 
   "however", ",", 
   RowBox[{
   "can", " ", "inject", " ", "energy", " ", "into", " ", "the", " ", 
    "control", " ", "equations", " ", "if", " ", "the", " ", "estimates", " ",
     "are", " ", "not", " ", "perfect"}], ",", 
   RowBox[{"and", " ", "can", " ", "destabilize", " ", "the", " ", 
    RowBox[{"controller", ".", "So"}], " ", "we", " ", "will", " ", "not", 
    " ", "do", " ", "it", " ", "for", " ", 
    RowBox[{"now", ".", " ", "Typically"}]}], ",", 
   RowBox[{"to", " ", "do", " ", "so"}], ",", 
   RowBox[{
   "one", " ", "would", " ", "spend", " ", "some", " ", "timefine", " ", 
    "tuning", " ", 
    RowBox[{"one", "'"}], " ", "s", " ", "actual", " ", "inertial", " ", 
    "estimates", " ", "on", " ", "a", " ", "real", " ", 
    RowBox[{
    "robot", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "Since"}], 
    " ", "the", " ", "generalized", " ", "forces", " ", "for", " ", "our", 
    " ", "robot", " ", "are", " ", "also", " ", "its", " ", "joint", " ", 
    RowBox[{"torques", "/", "forces"}]}], ",", " ", 
   RowBox[{
    RowBox[{"the", " ", "control", " ", "equations", " ", 
     RowBox[{"are", ":", " ", "\[IndentingNewLine]", "Fgc"}]}], " ", "=", " ", 
    RowBox[{"\[CapitalGamma]", " ", "=", " ", 
     RowBox[{
      RowBox[{"Mgc", " ", 
       OverscriptBox["q", ".."]}], " ", "+", " ", 
      RowBox[{"b", 
       RowBox[{"(", 
        RowBox[{"q", ",", " ", 
         OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
      SubscriptBox["g", "q"]}]}], " "}]}],
  FontWeight->"Plain"], "\[IndentingNewLine]", 
 StyleBox[
  RowBox[{
   RowBox[{"In", " ", "the", " ", "above", " ", "equation"}], ",", " ", 
   RowBox[{
    RowBox[{
     OverscriptBox["q", ".."], " ", "is", " ", "equivalent", " ", "to", " ", 
     "a", " ", "force", " ", "on", " ", "a", " ", "unit", " ", "mass", " ", 
     "in", " ", "the", " ", "generalized", " ", "coordinate", " ", 
     RowBox[{"space", ".", " ", "We"}], " ", "shall", " ", "call", " ", "it", 
     " ", 
     SuperscriptBox["\[CapitalGamma]", "*"], " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"following", " ", 
        RowBox[{"Khatib", "'"}], "s", " ", "convention"}], ")"}], ".", " ", 
      "So"}], " ", "we", " ", 
     RowBox[{"have", ":", "\[IndentingNewLine]", "Fgc"}]}], " ", "=", " ", 
    RowBox[{"\[CapitalGamma]", " ", "=", " ", 
     RowBox[{
      RowBox[{"Mgc", " ", 
       SuperscriptBox["\[CapitalGamma]", "*"]}], " ", "+", " ", 
      RowBox[{"b", 
       RowBox[{"(", 
        RowBox[{"q", ",", " ", 
         OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
      SubscriptBox["g", "q"]}]}], " "}]}],
  FontWeight->"Plain"], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox[
   RowBox[{
    RowBox[{"As", " ", "mentioned", " ", "above"}], ",", " ", 
    RowBox[{
     RowBox[{
     "we", " ", "ignore", " ", "b", " ", "because", " ", "improperly", " ", 
      "modeling", " ", "it", " ", "can", " ", "destabilize", " ", "the", " ", 
      
      RowBox[{"controller", ":", "\[IndentingNewLine]", "Fgc"}]}], " ", "=", 
     " ", 
     RowBox[{"\[CapitalGamma]", " ", "=", " ", 
      RowBox[{
       RowBox[{"Mgc", " ", 
        SuperscriptBox["\[CapitalGamma]", "*"]}], " ", "+", " ", 
       SubscriptBox["g", "q"]}]}]}]}],
   FontWeight->"Plain"], 
  StyleBox[" ",
   FontWeight->"Plain"], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 StyleBox[
  RowBox[{
   RowBox[{
    RowBox[{"Great", ".", " ", "So"}], " ", "now", " ", "we", " ", "have", 
    " ", "effectively", " ", "orthogonalized", " ", "the", " ", "command", 
    " ", 
    RowBox[{"torques", ".", " ", "Ie", ".", " ", "We"}], " ", "can", " ", 
    "use", " ", "three", " ", "orthogonal", " ", "controllers"}], ",", " ", 
   RowBox[{
   "one", " ", "for", " ", "each", " ", "controlled", " ", "generalized", " ", 
    RowBox[{"coordinate", ".", "\[IndentingNewLine]", "Here"}], " ", "is", 
    " ", "where", " ", "we", " ", "can", " ", "finally", " ", "switch", " ", 
    "back", " ", "to", " ", "good", " ", "ole", " ", "feedback", " ", 
    "control"}], ",", " ", 
   RowBox[{
    RowBox[{
    "which", " ", "only", " ", "works", " ", "for", " ", "single", " ", 
     "dimensions", " ", 
     RowBox[{"anyway", ".", " ", "So"}]}], "..."}]}],
  FontWeight->"Plain"], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox[
   RowBox[{
    SuperscriptBox["\[CapitalGamma]", "*"], " ", "=", " ", 
    RowBox[{
     RowBox[{
      SubscriptBox["k", "p"], 
      RowBox[{"(", 
       RowBox[{
        SubscriptBox["q", "des"], " ", "-", " ", "q"}], ")"}]}], " ", "+", 
     " ", 
     RowBox[{
      SubscriptBox["k", "v"], 
      RowBox[{"(", 
       RowBox[{
        SubscriptBox[
         OverscriptBox["q", "."], "des"], " ", "-", " ", 
        OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
     RowBox[{
      SubscriptBox["k", "i"], 
      RowBox[{"(", 
       RowBox[{
        SubscriptBox[
         OverscriptBox["q", ".."], "des"], " ", "-", " ", 
        OverscriptBox["q", ".."]}], ")"}]}]}]}],
   FontWeight->"Plain"], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    StyleBox["Our",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["final",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["fully",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["expanded",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["equations",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["to",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["compute",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["control",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["torques",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["at",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["the",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    StyleBox["motors",
     FontWeight->"Plain"], 
    StyleBox[" ",
     FontWeight->"Plain"], 
    RowBox[{
     StyleBox["are",
      FontWeight->"Plain"], 
     StyleBox[":",
      FontWeight->"Plain"], 
     StyleBox["\[IndentingNewLine]",
      FontWeight->"Plain"], 
     StyleBox[
      SubscriptBox["\[CapitalGamma]", "cmd"],
      FontWeight->"Bold"]}]}], 
   StyleBox[" ",
    FontWeight->"Bold"], 
   StyleBox["=",
    FontWeight->"Bold"], 
   StyleBox[" ",
    FontWeight->"Bold"], 
   StyleBox[
    RowBox[{
     RowBox[{"Mgc", 
      RowBox[{"(", " ", 
       RowBox[{
        RowBox[{
         SubscriptBox["k", "p"], 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox["q", "des"], " ", "-", " ", "q"}], ")"}]}], " ", "+", 
        " ", 
        RowBox[{
         SubscriptBox["k", "v"], 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox[
            OverscriptBox["q", "."], "des"], " ", "-", " ", 
           OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
        RowBox[{
         SubscriptBox["k", "i"], 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox[
            OverscriptBox["q", ".."], "des"], " ", "-", " ", 
           OverscriptBox["q", ".."]}], ")"}]}]}], " ", ")"}]}], " ", "+", " ", 
     SubscriptBox["g", "q"]}],
    FontWeight->"Bold"]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 StyleBox[
  RowBox[{
   RowBox[{
   "This", " ", "controller", " ", "requires", " ", "one", " ", "to", " ", 
    "generate", " ", "desired", " ", "trajectories", " ", "in", " ", "the", 
    " ", "generalized", " ", 
    RowBox[{"coordinates", ".", "Usually"}]}], ",", 
   RowBox[{
    RowBox[{
    "doing", " ", "so", " ", "is", " ", "quite", " ", "painful", " ", 
     "because", " ", "generalized", " ", "coordinate", " ", "trajectories", 
     " ", "are", " ", "usually", " ", "non"}], "-", "linear"}], ",", 
   RowBox[{"non", "-", 
    RowBox[{"invertible", " ", "functions", " ", "of", " ", "task"}], "-", 
    RowBox[{"space", " ", 
     RowBox[{"trajectories", ".", " ", "To"}], " ", "resolve", " ", "this", 
     " ", "trajectory", " ", "generation", " ", "problem"}]}], ",", 
   RowBox[{
   "we", " ", "shall", " ", "move", " ", "on", " ", "to", " ", "develop", " ",
     "control", " ", "equations", " ", "in", " ", "our", " ", 
    RowBox[{"task", "'"}], " ", "s", " ", "operational", " ", 
    RowBox[{"space", "."}]}]}],
  FontWeight->"Plain"]}], "Input"]], "Text",
 CellChangeTimes->{{3.551465289860585*^9, 3.551465405980206*^9}, {
  3.551465923647778*^9, 3.551465927346994*^9}, {3.551543464674369*^9, 
  3.551543476732705*^9}, {3.552099405394206*^9, 3.552099437160411*^9}, {
  3.5520995095486307`*^9, 3.552099712895352*^9}, {3.552099776100971*^9, 
  3.552099808759952*^9}, {3.552103677930298*^9, 3.55210367793139*^9}, {
  3.552103763794549*^9, 3.552103763795567*^9}, {3.5521038376150217`*^9, 
  3.552103837616189*^9}, {3.552145625749669*^9, 3.5521456257508783`*^9}, {
  3.5521481923410482`*^9, 3.552148192341782*^9}},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"qdes", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["\[Theta]des", "0"]},
      {
       SubscriptBox["\[Theta]des", "1"]},
      {
       SubscriptBox["\[Theta]des", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"dqdes", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["d\[Theta]des", "0"]},
      {
       SubscriptBox["d\[Theta]des", "1"]},
      {
       SubscriptBox["d\[Theta]des", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"ddqdes", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["dd\[Theta]des", "0"]},
      {
       SubscriptBox["dd\[Theta]des", "1"]},
      {
       SubscriptBox["dd\[Theta]des", "2"]}
     }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   SubscriptBox["\[CapitalGamma]", "cmd"], " ", "=", " ", 
   RowBox[{
    RowBox[{"Mgc", " ", ".", 
     RowBox[{"(", " ", 
      RowBox[{
       RowBox[{"kp", 
        RowBox[{"(", 
         RowBox[{"qdes", " ", "-", " ", "q"}], ")"}]}], " ", "+", " ", 
       RowBox[{"kv", 
        RowBox[{"(", 
         RowBox[{"dqdes", " ", "-", " ", "dq"}], ")"}]}], " ", "+", " ", 
       RowBox[{"ki", 
        RowBox[{"(", 
         RowBox[{"ddqdes", " ", "-", " ", "ddq"}], ")"}]}]}], " ", ")"}]}], 
    " ", "+", " ", 
    SubscriptBox["g", "q"]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"Chop", "[", 
   RowBox[{"FullSimplify", "[", 
    SubscriptBox["\[CapitalGamma]", "cmd"], "]"}], "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.55096764073318*^9, 3.550967774118781*^9}, {
   3.550967830642314*^9, 3.550967874017377*^9}, {3.550967917095805*^9, 
   3.5509681920526247`*^9}, {3.550968501464357*^9, 3.550968565891294*^9}, {
   3.5509687449856167`*^9, 3.550969024138609*^9}, {3.550969144394967*^9, 
   3.55096922567838*^9}, {3.55097424970947*^9, 3.550974327739345*^9}, {
   3.550974431668441*^9, 3.550974459954195*^9}, {3.5509746145333757`*^9, 
   3.55097465253657*^9}, {3.5509747238143*^9, 3.550974767050256*^9}, 
   3.550974797895432*^9, {3.551445220639285*^9, 3.551445253099526*^9}, {
   3.551445301242132*^9, 3.5514453270349617`*^9}, 3.5515434804222107`*^9, {
   3.551744816663436*^9, 3.551744818486991*^9}, {3.551754381264998*^9, 
   3.551754384274239*^9}, {3.552099408725422*^9, 3.552099408977604*^9}, {
   3.5520994407685013`*^9, 3.552099468218689*^9}, {3.552099715081636*^9, 
   3.5520997156758137`*^9}, 3.552103677931856*^9, 3.552103763795948*^9, 
   3.552103837616619*^9, 3.5521456257513027`*^9, {3.552148118707185*^9, 
   3.552148141051593*^9}, 3.552148192342286*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{
        RowBox[{"-", "4.34453125`"}], " ", "kv", " ", 
        SubscriptBox["d\[Theta]", "0"]}], "+", 
       RowBox[{"4.34453125`", " ", "kv", " ", 
        SubscriptBox["d\[Theta]des", "0"]}], "-", 
       RowBox[{"4.34453125`", " ", "kp", " ", 
        SubscriptBox["\[Theta]", "0"]}], "-", 
       RowBox[{"4.375`", " ", "kv", " ", 
        SubscriptBox["d\[Theta]", "0"], " ", 
        SubscriptBox["\[Theta]", "1"]}], "+", 
       RowBox[{"4.375`", " ", "kv", " ", 
        SubscriptBox["d\[Theta]des", "0"], " ", 
        SubscriptBox["\[Theta]", "1"]}], "-", 
       RowBox[{"4.375`", " ", "kp", " ", 
        SubscriptBox["\[Theta]", "0"], " ", 
        SubscriptBox["\[Theta]", "1"]}], "-", 
       RowBox[{"8.`", " ", "kv", " ", 
        SubscriptBox["d\[Theta]", "0"], " ", 
        SubsuperscriptBox["\[Theta]", "1", "2"]}], "+", 
       RowBox[{"8.`", " ", "kv", " ", 
        SubscriptBox["d\[Theta]des", "0"], " ", 
        SubsuperscriptBox["\[Theta]", "1", "2"]}], "-", 
       RowBox[{"8.`", " ", "kp", " ", 
        SubscriptBox["\[Theta]", "0"], " ", 
        SubsuperscriptBox["\[Theta]", "1", "2"]}], "+", 
       RowBox[{"ki", " ", 
        SubscriptBox["dd\[Theta]", "0"], " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "4.34453125`"}], "+", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", "4.375`"}], "-", 
             RowBox[{"8.`", " ", 
              SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
           SubscriptBox["\[Theta]", "1"]}]}], ")"}]}], "+", 
       RowBox[{"ki", " ", 
        SubscriptBox["dd\[Theta]des", "0"], " ", 
        RowBox[{"(", 
         RowBox[{"4.34453125`", "\[VeryThinSpace]", "+", 
          RowBox[{
           SubscriptBox["\[Theta]", "1"], " ", 
           RowBox[{"(", 
            RowBox[{"4.375`", "\[VeryThinSpace]", "+", 
             RowBox[{"8", " ", 
              SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}], "+", 
       RowBox[{"kp", " ", 
        RowBox[{"(", 
         RowBox[{"4.34453125`", "\[VeryThinSpace]", "+", 
          RowBox[{
           SubscriptBox["\[Theta]", "1"], " ", 
           RowBox[{"(", 
            RowBox[{"4.375`", "\[VeryThinSpace]", "+", 
             RowBox[{"8.`", " ", 
              SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}], " ", 
        SubscriptBox["\[Theta]des", "0"]}]}]},
     {
      RowBox[{
       RowBox[{
        RowBox[{"-", "8"}], " ", "ki", " ", 
        SubscriptBox["dd\[Theta]", "1"]}], "+", 
       RowBox[{"8", " ", "ki", " ", 
        SubscriptBox["dd\[Theta]des", "1"]}], "-", 
       RowBox[{"8", " ", "kv", " ", 
        SubscriptBox["d\[Theta]", "1"]}], "+", 
       RowBox[{"8", " ", "kv", " ", 
        SubscriptBox["d\[Theta]des", "1"]}], "-", 
       RowBox[{"8", " ", "kp", " ", 
        SubscriptBox["\[Theta]", "1"]}], "+", 
       RowBox[{"8", " ", "kp", " ", 
        SubscriptBox["\[Theta]des", "1"]}]}]},
     {
      RowBox[{"29.400000000000002`", "\[VeryThinSpace]", "+", 
       RowBox[{"3.`", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"-", "ki"}], " ", 
           SubscriptBox["dd\[Theta]", "2"]}], "+", 
          RowBox[{"ki", " ", 
           SubscriptBox["dd\[Theta]des", "2"]}], "-", 
          RowBox[{"kv", " ", 
           SubscriptBox["d\[Theta]", "2"]}], "+", 
          RowBox[{"kv", " ", 
           SubscriptBox["d\[Theta]des", "2"]}], "-", 
          RowBox[{"kp", " ", 
           SubscriptBox["\[Theta]", "2"]}], "+", 
          RowBox[{"kp", " ", 
           SubscriptBox["\[Theta]des", "2"]}]}], ")"}]}]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.552099478621233*^9, 3.552099813242607*^9, 3.552102902498303*^9, 
   3.552103095831435*^9, 3.552103211817655*^9, 3.552103677932097*^9, 
   3.5521037637961617`*^9, {3.552103818620758*^9, 3.552103837616859*^9}, 
   3.552145511746895*^9, 3.5521456257517357`*^9, {3.5521481237215*^9, 
   3.552148142455791*^9}, 3.5521481923426523`*^9}]
}, Open  ]],

Cell["\<\
NOTE : To derive the dynamics equations, please go on to read the tutorial on \
computing dynamic models.  Alternatively, refer to Khatib\[CloseCurlyQuote] s \
Operational Space papers. To really really derive them from scratch, also \
read about the Lagrangian dynamics formulation. Mechanics by Landau and \
Lifschitz is a good text. \
\>", "Text",
 CellChangeTimes->{{3.5514652221231728`*^9, 3.551465264555848*^9}, 
   3.5521036779321423`*^9, 3.5521037637962*^9, 3.5521038376169033`*^9, 
   3.5521456257517757`*^9, 3.552148192342702*^9},
 FontFamily->"Courier"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[" Computing Operational Space Dynamic Control", "Section",
 CellChangeTimes->{
  3.551464166706139*^9, {3.551464197636732*^9, 3.5514641984613123`*^9}, 
   3.552103677932166*^9, 3.552103763796221*^9, 3.552103837616926*^9, 
   3.5521456257517977`*^9, 3.5521481923427353`*^9}],

Cell["\<\
The joint space dynamic control formulation delineated the joint space motion \
and joint space inertial changes between the joints, making the gains \
independent of the robot\[CloseCurlyQuote]s configuration. Each joint was \
then modeled/controlled independently, making the overall control quite simple.

That said, generating trajectories still was a hard problem since we aren't \
really interested in moving the generalized coordinates. Instead, it would be \
nice to generate trajectories at
the operational point. Let us pick the operational point to be the hand.

Before we proceed, I would like to point out that the hand coordinates are \
also an acceptable set of generalized coordinates for this robot. As such, \
one could repeat the above joint space dynamic control derivation for \
hand-space control. Since this is a turorial, however, we shall solve the \
operational control equations in a manner that generalizes to redundant \
robots whose hand coordinates might not be generalized coordinates.\
\>", "Text",
 CellChangeTimes->{{3.550975376158684*^9, 3.550975585748643*^9}, {
   3.550975713784181*^9, 3.550975804206819*^9}, {3.550978475285017*^9, 
   3.5509784872088842`*^9}, {3.5509785269409103`*^9, 3.550978685506772*^9}, {
   3.550978822527615*^9, 3.550978838129743*^9}, {3.5509791551545258`*^9, 
   3.5509792169896107`*^9}, {3.5509792528420877`*^9, 3.550979277948865*^9}, {
   3.551022069797037*^9, 3.551022070245263*^9}, {3.551445373882986*^9, 
   3.551445376426797*^9}, {3.551464125729319*^9, 3.551464154941956*^9}, {
   3.5514651995292377`*^9, 3.5514652035899973`*^9}, {3.551465949579546*^9, 
   3.551466009993279*^9}, 3.551471127126705*^9, {3.551558171538232*^9, 
   3.5515582387652903`*^9}, {3.5520998277072268`*^9, 3.552099827993788*^9}, {
   3.5521026768587713`*^9, 3.5521028381004972`*^9}, 3.5521036779322023`*^9, 
   3.5521037637962503`*^9, 3.552103837616961*^9, 3.552145625751833*^9, 
   3.552148192342767*^9},
 FontFamily->"Courier"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xhand", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["x", "0"]},
      {
       SubscriptBox["x", "1"]},
      {
       SubscriptBox["x", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"dxhand", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["dx", "0"]},
      {
       SubscriptBox["dx", "1"]},
      {
       SubscriptBox["dx", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"ddxhand", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["ddx", "0"]},
      {
       SubscriptBox["ddx", "1"]},
      {
       SubscriptBox["ddx", "2"]}
     }], "\[NoBreak]", ")"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.550975376158684*^9, 3.550975585748643*^9}, {
   3.550975713784181*^9, 3.550975804206819*^9}, {3.550978475285017*^9, 
   3.5509784872088842`*^9}, {3.5509785269409103`*^9, 3.550978685506772*^9}, {
   3.550978822527615*^9, 3.550978838129743*^9}, {3.5509791551545258`*^9, 
   3.5509792169896107`*^9}, {3.5509792528420877`*^9, 3.550979277948865*^9}, {
   3.551022069797037*^9, 3.551022070245263*^9}, {3.551445373882986*^9, 
   3.551445376426797*^9}, {3.551464125729319*^9, 3.551464154941956*^9}, {
   3.5514651995292377`*^9, 3.5514652035899973`*^9}, {3.551465949579546*^9, 
   3.551466009993279*^9}, 3.551471127126705*^9, {3.551558171538232*^9, 
   3.551558252024439*^9}, 3.552103677932411*^9, 3.552103763796447*^9, 
   3.552103837617182*^9, 3.5521456257520447`*^9, 3.552148192343018*^9},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell["Jacobian at Operational Point : Hand", "Subsection",
 CellChangeTimes->{3.551466036041319*^9, 3.5521036779324417`*^9, 
  3.552103763796476*^9, 3.552103837617216*^9, 3.552145625752077*^9, 
  3.552148192343052*^9}],

Cell["Let us start by computing the kinematics at the hand.", "Text",
 CellChangeTimes->{{3.551471130957065*^9, 3.55147114747919*^9}, 
   3.552103677932486*^9, 3.552103763796515*^9, 3.552103837617263*^9, 
   3.552145625752122*^9, 3.552148192343096*^9},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"As", " ", "before"}], ",", " ", 
    RowBox[{"we", " ", "will", " ", "compute", " ", "the", " ", 
     RowBox[{"hand", "'"}], "s", " ", "position", " ", "and", " ", "its", " ",
      "Jacobian", " ", "in", " ", "the", " ", "global", " ", 
     RowBox[{"frame", "."}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"handPos", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"0"},
        {"0"},
        {
         RowBox[{"-", "0.5"}]},
        {"1"}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"handPosO", " ", "=", " ", 
     RowBox[{"Take", "[", 
      RowBox[{
       RowBox[{
        SubscriptBox["TO", "2"], " ", ".", " ", "handPos"}], ",", 
       RowBox[{"{", 
        RowBox[{"1", ",", "3"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"1", ",", "1"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"JOhandPos", " ", "=", " ", 
     RowBox[{"Reshape", "[", 
      RowBox[{
       RowBox[{"Outer", "[", 
        RowBox[{"D", ",", " ", "handPosO", ",", " ", 
         RowBox[{"Transpose", "[", "q", "]"}]}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"3", ",", "3"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{" ", 
     RowBox[{"Note", ",", " ", 
      RowBox[{
      "since", " ", "the", " ", "end", " ", "effector", " ", "frame", " ", 
       RowBox[{"can", "'"}], "t", " ", "really", " ", "rotate"}], ",", " ", 
      RowBox[{
       RowBox[{
        RowBox[{"we", " ", "can", " ", "select", " ", "the", " ", 
         SubscriptBox["JOcomRot", "2"], "\[IndentingNewLine]", "as", " ", 
         "the", " ", "rotational", " ", 
         RowBox[{"Jacobian", ".", " ", "Convince"}], " ", "yourself", " ", 
         "that", " ", "this", " ", "works"}], ".."}], " ", ":", "-"}]}], 
     ")"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"JOhand", " ", "=", " ", 
     RowBox[{"Join", "[", 
      RowBox[{"JOhandPos", ",", " ", 
       SubscriptBox["JOcomRot", "2"], ",", "1"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", "handPosO", "]"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Interestingly", ",", " ", 
     RowBox[{
     "you", " ", "will", " ", "notice", " ", "that", " ", "this", " ", "is", 
      " ", "identical", " ", "to", " ", "the", " ", "Jacobian", " ", "at", 
      " ", "the", " ", "com", " ", "of", " ", "link", " ", "2.", " ", "Why", 
      " ", 
      RowBox[{"so", "?"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    RowBox[{"FullSimplify", "[", "JOhand", "]"}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.550975376158684*^9, 3.550975585748643*^9}, {
   3.550975713784181*^9, 3.550975804206819*^9}, {3.550978475285017*^9, 
   3.5509784872088842`*^9}, {3.5509785269409103`*^9, 3.550978685506772*^9}, {
   3.550978822527615*^9, 3.550978838129743*^9}, {3.5509791551545258`*^9, 
   3.5509792169896107`*^9}, {3.5509792528420877`*^9, 3.550979277948865*^9}, {
   3.551022069797037*^9, 3.551022070245263*^9}, {3.551445373882986*^9, 
   3.551445376426797*^9}, 3.551464125729319*^9, {3.551466029932645*^9, 
   3.551466032572723*^9}, {3.552100034991766*^9, 3.552100082220388*^9}, 
   3.552103677932917*^9, 3.552103763796929*^9, 3.552103837617715*^9, 
   3.552145625752556*^9, 3.552148192343555*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"0.`", "\[VeryThinSpace]", "-", 
       RowBox[{
        RowBox[{"Sin", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}]},
     {
      RowBox[{"0.`", "\[VeryThinSpace]", "+", 
       RowBox[{
        RowBox[{"Cos", "[", 
         SubscriptBox["\[Theta]", "0"], "]"}], " ", 
        RowBox[{"(", 
         RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
          SubscriptBox["\[Theta]", "1"]}], ")"}]}]}]},
     {
      RowBox[{"0.30000000000000004`", "\[VeryThinSpace]", "+", 
       SubscriptBox["\[Theta]", "2"]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550975805299088*^9, 3.550978418364295*^9, 3.55097868660915*^9, {
   3.55097882294804*^9, 3.550978839025242*^9}, {3.5509791568709784`*^9, 
   3.550979217615818*^9}, 3.550979280807332*^9, 3.550981398824564*^9, 
   3.551022007540093*^9, {3.551022056886386*^9, 3.5510220740306597`*^9}, 
   3.551444556202568*^9, 3.551464106680931*^9, {3.551466044424674*^9, 
   3.551466050996044*^9}, 3.551543536289381*^9, 3.55155654974139*^9, 
   3.551556593341522*^9, 3.551556903101186*^9, 3.551557303118137*^9, {
   3.55155852245603*^9, 3.551558546035137*^9}, 3.551558670562317*^9, 
   3.551744633848289*^9, 3.551754303972003*^9, 3.551754415738624*^9, 
   3.551804246667129*^9, 3.5518328224737186`*^9, 3.552099098139439*^9, 
   3.55210010043641*^9, 3.552102902544113*^9, 3.552103095918232*^9, 
   3.552103211884606*^9, 3.5521036779330597`*^9, 3.552103763797064*^9, {
   3.552103818688593*^9, 3.552103837617866*^9}, 3.5521455118179293`*^9, 
   3.552145625752701*^9, 3.5521481923437033`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{"-", "1.`"}], " ", 
       RowBox[{"Cos", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}]}], "0"},
     {
      RowBox[{
       RowBox[{"-", "1.`"}], " ", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], "0"},
     {"0", "0", "1"},
     {"0", "0", "0"},
     {"0", "0", "0"},
     {"1", "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.550975805299088*^9, 3.550978418364295*^9, 3.55097868660915*^9, {
   3.55097882294804*^9, 3.550978839025242*^9}, {3.5509791568709784`*^9, 
   3.550979217615818*^9}, 3.550979280807332*^9, 3.550981398824564*^9, 
   3.551022007540093*^9, {3.551022056886386*^9, 3.5510220740306597`*^9}, 
   3.551444556202568*^9, 3.551464106680931*^9, {3.551466044424674*^9, 
   3.551466050996044*^9}, 3.551543536289381*^9, 3.55155654974139*^9, 
   3.551556593341522*^9, 3.551556903101186*^9, 3.551557303118137*^9, {
   3.55155852245603*^9, 3.551558546035137*^9}, 3.551558670562317*^9, 
   3.551744633848289*^9, 3.551754303972003*^9, 3.551754415738624*^9, 
   3.551804246667129*^9, 3.5518328224737186`*^9, 3.552099098139439*^9, 
   3.55210010043641*^9, 3.552102902544113*^9, 3.552103095918232*^9, 
   3.552103211884606*^9, 3.5521036779330597`*^9, 3.552103763797064*^9, {
   3.552103818688593*^9, 3.552103837617866*^9}, 3.552145511867118*^9, 
   3.552145625752884*^9, 3.552148192343886*^9}]
}, Open  ]],

Cell[TextData[{
 "Note, however, that the Jacobian has a clear null space along the rows \
corresponding to x and y rotations. As such, ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["\[Omega]", "x"], TraditionalForm]]],
 " and ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["\[Omega]", "y"], TraditionalForm]]],
 " are not controllable, and so we shall remove them from our Jacobian. In \
addition, given any three out of x, y, z, or ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["\[Omega]", "z"], TraditionalForm]]],
 ", we can also determine the fourth because the robot only has three degrees \
of freedom. We can thus only control z + two out of x, y, and ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["\[Omega]", "z"], TraditionalForm]]],
 "."
}], "Text",
 CellChangeTimes->{{3.551556684322504*^9, 3.5515567756765823`*^9}, {
  3.5515569305069427`*^9, 3.551557003453043*^9}, {3.551557081050126*^9, 
  3.5515570944403763`*^9}, {3.551557218184834*^9, 3.551557257767174*^9}, {
  3.5521036779333*^9, 3.552103677935145*^9}, {3.552103763797304*^9, 
  3.55210376379919*^9}, {3.5521038376181183`*^9, 3.552103837620162*^9}, {
  3.552145625752947*^9, 3.55214562575494*^9}, {3.552148192343947*^9, 
  3.5521481923460083`*^9}},
 FontFamily->"Courier"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Eg", " ", "1.", " ", "An", " ", "x"}], ",", " ", "y", ",", " ", 
    RowBox[{"z", " ", "hand", " ", "position", " ", "controller"}]}], " ", 
   "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"RppHandPosSel", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"1", "0", "0", "0", "0", "0"},
        {"0", "1", "0", "0", "0", "0"},
        {"0", "0", "1", "0", "0", "0"}
       }], "\[NoBreak]", ")"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"Eg", " ", "2.", " ", "A", " ", "y"}], ",", " ", "z", ",", " ", 
     RowBox[{
      SubscriptBox["\[Omega]", "z"], " ", "controller"}]}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"RppHandPosAndRotSel", " ", "=", " ", 
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"0", "1", "0", "0", "0", "0"},
        {"0", "0", "1", "0", "0", "0"},
        {"0", "0", "0", "0", "0", "1"}
       }], "\[NoBreak]", ")"}]}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.551556677190198*^9, 3.551556679607892*^9}, {
   3.551556789756699*^9, 3.551556894570097*^9}, {3.5515570270624723`*^9, 
   3.551557102230289*^9}, {3.551557156434746*^9, 3.5515571805756617`*^9}, {
   3.5515572657202787`*^9, 3.5515572785778646`*^9}, 3.552103677935378*^9, 
   3.552103763799428*^9, 3.5521038376204033`*^9, 3.552145625755185*^9, 
   3.552148192346325*^9}],

Cell["\<\
For the remaining tutorial, we shall pick the xyz position controller. You \
may experiment with the other one yourself.\
\>", "Text",
 CellChangeTimes->{{3.551557106318384*^9, 3.551557152675255*^9}, 
   3.552103677935412*^9, 3.552103763799457*^9, 3.5521038376204348`*^9, 
   3.5521456257552156`*^9, 3.552148192346366*^9},
 FontFamily->"Courier"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"JOhand", " ", "=", " ", 
   RowBox[{"RppHandPosSel", " ", ".", " ", "JOhand"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"FullSimplify", "[", "JOhand", "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.551556677190198*^9, 3.551556679607892*^9}, {
   3.551556789756699*^9, 3.551556894570097*^9}, {3.5515570270624723`*^9, 
   3.551557102230289*^9}, 3.5515572904304867`*^9, 3.552103677935513*^9, 
   3.5521037637995653`*^9, 3.5521038376205387`*^9, 3.552145625755312*^9, 
   3.552148192346483*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{"-", "1.`"}], " ", 
       RowBox[{"Cos", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}]}], "0"},
     {
      RowBox[{
       RowBox[{"-", "1.`"}], " ", 
       RowBox[{"Sin", "[", 
        SubscriptBox["\[Theta]", "0"], "]"}], " ", 
       RowBox[{"(", 
        RowBox[{"0.5`", "\[VeryThinSpace]", "+", 
         SubscriptBox["\[Theta]", "1"]}], ")"}]}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["\[Theta]", "0"], "]"}], "0"},
     {"0", "0", "1"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.5515568959679213`*^9, 3.551556903151483*^9}, {
   3.5515572915869703`*^9, 3.5515573032372417`*^9}, {3.551558522531101*^9, 
   3.551558546226111*^9}, 3.551558670628613*^9, 3.5517446339274387`*^9, 
   3.551754304213166*^9, 3.551754415786083*^9, 3.551804246869143*^9, 
   3.551832822518217*^9, 3.552099098154702*^9, 3.55210013944559*^9, 
   3.552102902591819*^9, 3.552103095993943*^9, 3.5521032119831457`*^9, 
   3.5521036779357*^9, 3.552103763799724*^9, {3.5521038187641363`*^9, 
   3.5521038376207*^9}, 3.5521455118887243`*^9, 3.5521456257554607`*^9, 
   3.552148192346675*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Energy Equivalence and Operational Dynamics : Hand", "Subsection",
 CellChangeTimes->{{3.551466101834744*^9, 3.551466104897455*^9}, 
   3.552103677935734*^9, 3.552103763799759*^9, 3.552103837620736*^9, 
   3.552145625755496*^9, 3.552148192346734*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "Since", " ", "we", " ", "really", " ", "wish", " ", "to", " ", "control", 
   " ", "the", " ", 
   RowBox[{"hand", "'"}], "s", " ", "trajectories"}], ",", " ", 
  RowBox[{
  "we", " ", "need", " ", "our", " ", "PID", " ", "controller", " ", "to", 
   " ", "operate", " ", "on", " ", "a", " ", "coordinate", " ", "frame", " ", 
   "attached", " ", "to", " ", "either", " ", "the", " ", "hand", " ", "or", 
   " ", "to", " ", "a", " ", "coordinate", " ", "system", " ", "that", " ", 
   "has", " ", "a", " ", "linear", " ", "and", " ", "invertible", " ", 
   "transformation", " ", "from", " ", "the", " ", "hand", " ", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"Eg", ".", " ", "The"}], " ", "Origin"}], ")"}], ".", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", "Before"}], " ", "we", " ", 
   "proceed", " ", "with", " ", "energy", " ", "equivalence"}], ",", " ", 
  "however", ",", " ", 
  RowBox[{
  "we", " ", "must", " ", "compare", " ", "the", " ", "dimensionality", " ", 
   "of", " ", "the", " ", "coordinate", " ", "system", " ", "where", " ", 
   "we", " ", "generate", " ", "trajectories", " ", "to", " ", "the", " ", 
   "number", " ", "of", " ", "generalized", " ", 
   RowBox[{"coordinates", ".", " ", "If"}], " ", "the", " ", "trajectory", 
   " ", "specification", " ", "contians", " ", "enough", " ", "variables", 
   " ", "to", " ", "form", " ", "a", " ", "set", " ", "of", " ", 
   "generalized", " ", "coordinates"}], ",", " ", 
  RowBox[{
  "then", " ", "the", " ", "energy", " ", "equivalence", " ", "would", " ", 
   "work", " ", 
   RowBox[{"fine", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "For"}],
    " ", "the", " ", "RPPBot"}], ",", " ", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"x", ",", "y", ",", "z"}], "}"}], " ", "are", " ", "a", " ", 
   "valid", " ", "system", " ", "of", " ", "generalized", " ", "coordinates", 
   " ", "since", " ", "they", " ", "specify", " ", "enough", " ", 
   "information", " ", "to", " ", "completely", " ", "constrain", " ", "all", 
   " ", "the", " ", 
   RowBox[{"robot", "'"}], "s", " ", "degrees", " ", "of", " ", 
   RowBox[{"freedom", ".", " ", "However"}]}], ",", " ", 
  RowBox[{
  "redundancy", " ", "is", " ", "always", " ", "with", " ", "respect", " ", 
   "to", " ", "a", " ", 
   RowBox[{"task", ".", " ", "If"}], " ", "the", " ", "task", " ", "is", " ", 
   "low", " ", "dimensional", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"Eg", ".", " ", "Only"}], " ", "move", " ", "along", " ", "the",
       " ", "x", " ", "axis"}], ",", " ", 
     RowBox[{"ignoring", " ", "y", " ", "and", " ", "z"}]}], ")"}], "when", 
   " ", "the", " ", "RPPBot", " ", "will", " ", "be", " ", "redundant", " ", 
   "because", " ", "the", " ", "trajectory", " ", "will", " ", "not", " ", 
   "constrain", " ", "the", " ", "generalized", " ", 
   RowBox[{
   "coordinates", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    "Since"}], " ", "the", " ", "dimensionality", " ", "of", " ", "the", " ", 
   "actual", " ", "task", " ", "to", " ", "be", " ", "executed", " ", "is", 
   " ", "arbitrary", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"we", " ", "could", " ", "define", " ", "a", " ", "1", "D"}], 
     ",", " ", 
     RowBox[{"2", "D"}], ",", " ", 
     RowBox[{"or", " ", "3", "D", " ", "task"}]}], ")"}]}], ",", " ", 
  RowBox[{
   RowBox[{
   "the", " ", "energy", " ", "equations", " ", "will", " ", "rely", " ", 
    "on", " ", "comparing", " ", "the", " ", "energy", " ", "due", " ", "to", 
    " ", "the", " ", "motion", " ", "in", " ", "a", " ", 
    RowBox[{"subspace", ".", " ", "Remember"}], " ", "that", "  ", "E"}], " ",
    "=", " ", 
   RowBox[{
    RowBox[{"F", ".", "\[Delta]x"}], " ", "=", " ", 
    RowBox[{
     RowBox[{"\[Sum]", 
      RowBox[{
       SubscriptBox["F", "i"], ".", "\[Delta]x", " ", ".", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "Energy"}]}], " ", "=", 
     " ", 
     RowBox[{
      RowBox[{"Work", " ", "done", " ", "by", " ", "a", " ", "force"}], "  ", 
      "=", " ", 
      RowBox[{
       RowBox[{"displacement", "'"}], " ", ".", " ", 
       "force"}]}]}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{"                        ", 
  RowBox[{"=", " ", 
   RowBox[{
    RowBox[{"\[Delta]q", "'"}], " ", ".", " ", 
    SubscriptBox["\[CapitalGamma]", "hand"]}]}], 
  "  "}], "\[IndentingNewLine]", 
 RowBox[{"                        ", 
  RowBox[{"=", " ", 
   RowBox[{
    RowBox[{
     SubscriptBox["\[Delta]x", "hand"], "'"}], " ", ".", " ", 
    SubscriptBox["F", "hand"]}]}], "                             ", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NOTE", " ", ":", " ", 
   RowBox[{
   "Referring", " ", "to", " ", "our", " ", "dicussion", " ", "earlier"}]}], 
  ",", " ", 
  RowBox[{
   SubscriptBox["\[CapitalGamma]", "hand"], " ", "is", " ", "NOT", " ", 
   SubscriptBox["F", "gen"]}], ",", " ", 
  RowBox[{
  "but", " ", "is", " ", "only", " ", "a", " ", "portion", " ", "of", " ", 
   RowBox[{
    SubscriptBox["F", "gen"], ".", " ", "The"}], " ", "energy", " ", "is", 
   " ", "not", " ", "the", " ", "total", " ", "energy", " ", "of", " ", "the",
    " ", 
   RowBox[{"system", ".", " ", "Instead"}]}], ",", " ", 
  RowBox[{
   RowBox[{
    RowBox[{"\[Delta]q", "'"}], " ", ".", " ", 
    SubscriptBox["F", "gen"]}], "=", " ", 
   RowBox[{
    RowBox[{"\[Delta]q", "'"}], " ", ".", " ", 
    RowBox[{"(", 
     RowBox[{
      SubscriptBox["\[CapitalGamma]", "hand"], "  ", "+", " ", 
      SubscriptBox["\[CapitalGamma]", 
       RowBox[{"null", "-", "space"}]]}], ")"}]}]}], ",", " ", 
  RowBox[{
  "where", " ", "the", " ", "null", " ", "space", " ", "generalized", " ", 
   "forces", " ", 
   RowBox[{"don", "'"}], "t", " ", "add", " ", "energy", " ", "at", " ", 
   "the", " ", "controlled", " ", "hand", " ", 
   RowBox[{
   "coordinates", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    "Proceeding"}]}], ",", "  ", 
  RowBox[{
   RowBox[{
    RowBox[{"\[Delta]q", "'"}], " ", ".", " ", 
    SubscriptBox["\[CapitalGamma]", "hand"]}], " ", "=", " ", 
   RowBox[{
    RowBox[{"\[Delta]q", "'"}], " ", 
    RowBox[{
     RowBox[{
      SubscriptBox["J", "hand"], "'"}], " ", ".", " ", 
     RowBox[{
      SubscriptBox["F", "hand"], "                 ", "[", 
      RowBox[{
       SubscriptBox["\[Delta]x", "hand"], " ", "=", " ", 
       RowBox[{
        SubscriptBox["J", 
         RowBox[{"hand", " "}]], "\[Delta]q"}]}], 
      "]"}]}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{"              ", 
  RowBox[{
   RowBox[{"and", "                     ", 
    SubscriptBox["\[CapitalGamma]", "hand"]}], " ", "=", " ", 
   RowBox[{
    RowBox[{
     SubscriptBox["J", "hand"], "'"}], " ", ".", " ", 
    RowBox[{
     SubscriptBox["F", "hand"], "                         ", "[", 
     RowBox[{"\[Delta]q", " ", "is", " ", "arbitrary"}], "]"}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Please", " ", "note"}], ",", " ", "however", ",", " ", 
  RowBox[{
  "that", " ", "we", " ", "can", " ", "not", " ", "use", " ", "the", " ", 
   "above", " ", "equations", " ", "to", " ", "give", " ", "us", " ", "a", 
   " ", "notion", " ", "of", " ", "the", " ", "accelerations", " ", "at", " ",
    "the", " ", "hand", " ", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      RowBox[{"Ie", ".", " ", "an"}], " ", "inertially", " ", "decoupled", 
      " ", "force"}], ")"}], ".", " ", "Instead"}]}], ",", " ", 
  RowBox[{
   RowBox[{"we", " ", "have", " ", "to", " ", 
    RowBox[{"use", ":", "\[IndentingNewLine]", "           ", "\[Delta]x"}]}],
    " ", "=", " ", 
   RowBox[{"J", " ", ".", " ", "\[Delta]q"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"                ", 
  RowBox[{"\[Delta]\[Delta]x", " ", "=", " ", 
   RowBox[{
    RowBox[{"J", " ", ".", " ", "\[Delta]\[Delta]q"}], " ", "+", " ", 
    RowBox[{
     OverscriptBox["J", "."], " ", ".", " ", 
     "\[Delta]q"}]}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Or", ",", " ", 
   RowBox[{
    RowBox[{"J", " ", ".", " ", "\[Delta]\[Delta]q"}], " ", "=", " ", 
    RowBox[{"\[Delta]\[Delta]x", " ", "-", " ", 
     RowBox[{
      OverscriptBox["J", "."], " ", ".", " ", "\[Delta]q"}]}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"When", " ", 
    SubscriptBox["J", "hand"], " ", "is", " ", "full", " ", "rank"}], ",", 
   " ", 
   RowBox[{
   "the", " ", "null", " ", "space", " ", "torques", " ", "must", " ", "be", 
    " ", "zero", " ", "and", " ", "this", " ", "is", " ", "the", " ", "total",
     " ", 
    RowBox[{"force", ".", " ", "Else"}]}], ",", " ", 
   RowBox[{
    RowBox[{
    "there", " ", "may", " ", "also", " ", "be", " ", "some", " ", "null", 
     " ", "space", " ", "forces", " ", "acting", " ", "on", " ", "the", " ", 
     RowBox[{"robot", ".", " ", "Modifying"}], " ", "our", " ", "original", 
     " ", "dynamics", " ", "equations", " ", "to", " ", "include", " ", "the",
      " ", "null", " ", "sapce", " ", 
     RowBox[{"torques", ":", "\[IndentingNewLine]", "\[CapitalGamma]"}]}], 
    " ", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
       SubscriptBox["J", "hand"], "'"}], " ", ".", " ", 
      SubscriptBox["F", "hand"]}], " ", "+", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"I", "-", 
        RowBox[{
         SuperscriptBox[
          SubscriptBox["J", "hand"], "'"], ".", 
         SuperscriptBox[
          SubscriptBox["J", "hand"], 
          RowBox[{"'", "+"}]]}]}], ")"}], ".", " ", 
      SubscriptBox["\[CapitalGamma]", "null"]}]}]}]}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{"          ", 
  RowBox[{"=", " ", 
   RowBox[{
    RowBox[{"Mgc", " ", "\[Delta]\[Delta]q"}], " ", "+", " ", 
    RowBox[{"b", 
     RowBox[{"(", 
      RowBox[{"q", ",", " ", 
       OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
    SubscriptBox["g", "q"], "  ", "-", " ", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"I", "-", 
       RowBox[{
        SuperscriptBox[
         SubscriptBox["J", "hand"], "'"], ".", 
        SuperscriptBox[
         SubscriptBox["J", "hand"], 
         RowBox[{"'", "+"}]]}]}], ")"}], ".", " ", 
     SubscriptBox["\[CapitalGamma]", "null"]}]}]}], " ", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Rearranging", " ", "the", " ", "terms"}], ",", 
   "\[IndentingNewLine]", "                          ", 
   RowBox[{
    RowBox[{
     RowBox[{
      SubscriptBox["J", "hand"], "'"}], " ", ".", " ", 
     SubscriptBox["F", "hand"]}], " ", "=", " ", 
    RowBox[{
     RowBox[{"Mgc", " ", "\[Delta]\[Delta]q"}], " ", "+", " ", 
     RowBox[{"b", 
      RowBox[{"(", 
       RowBox[{"q", ",", " ", 
        OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
     SubscriptBox["g", "q"], "  ", "-", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"I", "-", 
        RowBox[{
         SuperscriptBox[
          SubscriptBox["J", "hand"], "'"], ".", 
         SuperscriptBox[
          SubscriptBox["J", "hand"], 
          RowBox[{"'", "+"}]]}]}], ")"}], " ", 
      SubscriptBox["\[CapitalGamma]", "null"]}]}]}]}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      SubscriptBox["J", "hand"], ".", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]]}], ")"}], ".", " ", 
    SuperscriptBox[
     SubscriptBox["J", "hand"], "'"], ".", " ", 
    SubscriptBox["F", "hand"]}], " ", "=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        SubscriptBox["J", "hand"], ".", 
        SuperscriptBox["Mgc", 
         RowBox[{"-", "1"}]]}], ")"}], ".", " ", "Mgc"}], " ", 
     "\[Delta]\[Delta]q"}], " ", "+", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        SubscriptBox["J", "hand"], ".", 
        SuperscriptBox["Mgc", 
         RowBox[{"-", "1"}]]}], ")"}], ".", " ", "b"}], 
     RowBox[{"(", 
      RowBox[{"q", ",", " ", 
       OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       SubscriptBox["J", "hand"], ".", 
       SuperscriptBox["Mgc", 
        RowBox[{"-", "1"}]]}], ")"}], ".", " ", 
     SubscriptBox["g", "q"]}], "  ", "-", " ", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       SubscriptBox["J", "hand"], ".", 
       SuperscriptBox["Mgc", 
        RowBox[{"-", "1"}]]}], ")"}], ".", 
     RowBox[{"(", 
      RowBox[{"I", "-", 
       RowBox[{
        SuperscriptBox[
         SubscriptBox["J", "hand"], "'"], ".", 
        SuperscriptBox[
         SubscriptBox["J", "hand"], 
         RowBox[{"'", "+"}]]}]}], ")"}], ".", " ", 
     SubscriptBox["\[CapitalGamma]", "null"]}]}]}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      SubscriptBox["J", "hand"], ".", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]], ".", " ", 
      SuperscriptBox[
       SubscriptBox["J", "hand"], "'"]}], ")"}], ".", " ", 
    SubscriptBox["F", "hand"]}], " ", "=", " ", 
   RowBox[{
    RowBox[{
     SubscriptBox["J", "hand"], ".", " ", "\[Delta]\[Delta]q"}], " ", "+", 
    " ", 
    RowBox[{
     RowBox[{
      SubscriptBox["J", "hand"], ".", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]], ".", " ", "b"}], 
     RowBox[{"(", 
      RowBox[{"q", ",", " ", 
       OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
    RowBox[{
     SubscriptBox["J", "hand"], ".", 
     SuperscriptBox["Mgc", 
      RowBox[{"-", "1"}]], ".", " ", 
     SubscriptBox["g", "q"]}], "  ", "-", " ", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       SubscriptBox["J", "hand"], ".", 
       SuperscriptBox["Mgc", 
        RowBox[{"-", "1"}]]}], ")"}], ".", 
     RowBox[{"(", 
      RowBox[{"I", "-", 
       RowBox[{
        SuperscriptBox[
         SubscriptBox["J", "hand"], "'"], ".", 
        SuperscriptBox[
         SubscriptBox["J", "hand"], 
         RowBox[{"'", "+"}]]}]}], ")"}], ".", " ", 
     SubscriptBox["\[CapitalGamma]", "null"]}]}]}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"(", 
     RowBox[{
      SubscriptBox["J", "hand"], ".", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]], ".", " ", 
      SuperscriptBox[
       SubscriptBox["J", "hand"], "'"]}], ")"}], ".", " ", 
    SubscriptBox["F", "hand"]}], " ", "=", " ", 
   RowBox[{"\[Delta]\[Delta]x", " ", "-", " ", 
    RowBox[{
     SubscriptBox[
      OverscriptBox["J", "."], "hand"], " ", ".", " ", "\[Delta]q"}], " ", 
    "+", " ", 
    RowBox[{
     RowBox[{
      SubscriptBox["J", "hand"], ".", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]], ".", " ", "b"}], 
     RowBox[{"(", 
      RowBox[{"q", ",", " ", 
       OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
    RowBox[{
     SubscriptBox["J", "hand"], ".", 
     SuperscriptBox["Mgc", 
      RowBox[{"-", "1"}]], ".", " ", 
     SubscriptBox["g", "q"]}], "  ", "-", " ", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       SubscriptBox["J", "hand"], ".", 
       SuperscriptBox["Mgc", 
        RowBox[{"-", "1"}]]}], ")"}], ".", 
     RowBox[{"(", 
      RowBox[{"I", "-", 
       RowBox[{
        SuperscriptBox[
         SubscriptBox["J", "hand"], "'"], ".", 
        SuperscriptBox[
         SubscriptBox["J", "hand"], 
         RowBox[{"'", "+"}]]}]}], ")"}], ".", " ", 
     SubscriptBox["\[CapitalGamma]", "null"]}]}]}], " ", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "Why", " ", "did", " ", "we", " ", "expend", " ", "so", " ", "much", " ", 
   "time", " ", "to", " ", "bring", " ", "the", " ", "equations", " ", "into",
    " ", "this", " ", 
   RowBox[{"form", "?", " ", "Look"}], " ", "at", " ", "the", " ", "left", 
   " ", "hand", " ", 
   RowBox[{"side", ":", " ", 
    RowBox[{"the", " ", "term", " ", "behind", " ", "the", " ", 
     SubscriptBox["F", "hand"], " ", "is", " ", "similar", " ", "to", " ", 
     "a", " ", "mass", " ", "inverse", " ", "at", " ", "the", " ", 
     "operational", " ", 
     RowBox[{"point", ".", " ", "\[IndentingNewLine]", "As"}], " ", 
     "such"}]}]}], ",", " ", 
  RowBox[{
   RowBox[{"we", " ", 
    RowBox[{
    "have", ":", "\[IndentingNewLine]", "                                ", 
     SubscriptBox["M", "hand"]}]}], " ", "=", " ", 
   SuperscriptBox[
    RowBox[{"(", 
     RowBox[{
      SubscriptBox["J", "hand"], ".", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]], ".", " ", 
      SuperscriptBox[
       SubscriptBox["J", "hand"], "'"]}], ")"}], 
    RowBox[{"-", "1"}]]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Note", " ", "that", " ", 
   SubscriptBox["M", "hand"], " ", "is", " ", "easier", " ", "to", " ", 
   "invert", " ", "than", " ", "A", " ", "whenever", " ", "the", " ", "robot",
    " ", "is", " ", "redundant", " ", 
   RowBox[{"wrt", ".", " ", "the"}], " ", "task", " ", "being", " ", 
   "executed"}], ",", " ", 
  RowBox[{
  "and", " ", "is", " ", "full", " ", "rank", " ", "except", " ", "in", " ", 
   "kinematic", " ", 
   RowBox[{"singularities", ".", " ", "Computing"}], " ", "it", " ", "is", 
   " ", "rather", " ", "convoluted", " ", "because", " ", "the", " ", 
   "Jacobians", " ", "are", " ", "not", " ", "invertible", " ", "in", " ", 
   "general"}], ",", " ", 
  RowBox[{"while", " ", "Mgc", " ", 
   RowBox[{"is", "."}]}]}]}], "Text",
 CellChangeTimes->{{3.550979298118322*^9, 3.5509793795832443`*^9}, {
   3.550979441814426*^9, 3.550980086646538*^9}, {3.551466097612962*^9, 
   3.5514661998861237`*^9}, {3.551466239698251*^9, 3.55146629968124*^9}, {
   3.551466342940536*^9, 3.551466520069501*^9}, {3.551466597820854*^9, 
   3.551466602265688*^9}, {3.551466686514743*^9, 3.551466914701836*^9}, {
   3.5514669572913857`*^9, 3.551467091799601*^9}, {3.5514674992145777`*^9, 
   3.5514674998601017`*^9}, {3.5514676289341393`*^9, 3.551467629391017*^9}, {
   3.551467664951981*^9, 3.5514678647367163`*^9}, {3.551467996752442*^9, 
   3.551468001522871*^9}, {3.5514680915391273`*^9, 3.551468092157201*^9}, {
   3.5514682059344053`*^9, 3.551468334688272*^9}, {3.5514683902715178`*^9, 
   3.5514684341891727`*^9}, {3.5514685320063343`*^9, 3.551468621600397*^9}, {
   3.551468932203638*^9, 3.551468972050478*^9}, {3.551469044423048*^9, 
   3.551469103347519*^9}, {3.551469143506196*^9, 3.5514692591155643`*^9}, {
   3.551469873754986*^9, 3.5514703780258102`*^9}, {3.551470413427432*^9, 
   3.5514704352785673`*^9}, {3.551471186628385*^9, 3.5514714483957033`*^9}, {
   3.5514714827954283`*^9, 3.5514715826585207`*^9}, {3.551538589547621*^9, 
   3.5515386386253567`*^9}, {3.551540268298822*^9, 3.551540398716147*^9}, {
   3.551540777175178*^9, 3.551540802099308*^9}, {3.551540861550778*^9, 
   3.551540898038178*^9}, {3.551541551504665*^9, 3.551541648639968*^9}, {
   3.5515418103184423`*^9, 3.5515419105426073`*^9}, {3.551542072937934*^9, 
   3.5515421017965927`*^9}, {3.551542277966793*^9, 3.5515422811079206`*^9}, {
   3.551542347482604*^9, 3.551542775685547*^9}, {3.5515431910381403`*^9, 
   3.551543201429985*^9}, {3.5515435010137777`*^9, 3.55154352849752*^9}, {
   3.551555107566698*^9, 3.551555123336629*^9}, {3.551555196891008*^9, 
   3.551555388191161*^9}, {3.551555430353992*^9, 3.551555478402012*^9}, {
   3.551555525862488*^9, 3.551555892513973*^9}, {3.5515559305376987`*^9, 
   3.551556248316388*^9}, {3.551556353303355*^9, 3.551556393088554*^9}, 
   3.5515564270922403`*^9, {3.5521001500891733`*^9, 3.552100175312725*^9}, {
   3.552100218849326*^9, 3.55210023953889*^9}, {3.5521004891276093`*^9, 
   3.5521004921902037`*^9}, {3.5521006285442657`*^9, 
   3.5521006336712847`*^9}, {3.552100667709923*^9, 3.552101032921406*^9}, {
   3.552101072651168*^9, 3.552101128750835*^9}, {3.5521011866849318`*^9, 
   3.5521012030652037`*^9}, {3.5521012606726017`*^9, 3.552101260882785*^9}, {
   3.5521013411139393`*^9, 3.5521013854356728`*^9}, {3.552101420093534*^9, 
   3.5521014497916822`*^9}, {3.55210211313094*^9, 3.552102198592596*^9}, 
   3.552103677937084*^9, 3.552103763801134*^9, 3.552103837622116*^9, 
   3.552145625756844*^9, 3.552148192348274*^9}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   SubscriptBox["Minv", "hand"], " ", "=", " ", 
   RowBox[{"Chop", "[", 
    RowBox[{"JOhand", " ", ".", " ", 
     RowBox[{"Inverse", "[", "Mgc", "]"}], ".", " ", 
     RowBox[{"Transpose", "[", "JOhand", "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    SubscriptBox["M", "hand"], " ", "=", " ", 
    RowBox[{"Chop", "[", 
     RowBox[{"Inverse", "[", 
      RowBox[{"JOhand", " ", ".", " ", 
       RowBox[{"Inverse", "[", "Mgc", "]"}], ".", " ", 
       RowBox[{"Transpose", "[", "JOhand", "]"}]}], "]"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
    "Print", " ", "the", " ", "matrices", " ", "to", " ", "see", " ", "what", 
     " ", "they", " ", "look", " ", 
     RowBox[{"like", ".", "\[IndentingNewLine]", "Use"}], " ", "chop", " ", 
     "to", " ", "truncate", " ", "0.000000000983091", " ", "to", " ", "0"}], 
    ",", " ", 
    RowBox[{
    "and", " ", "thus", " ", "simplify", " ", "the", " ", "equations", " ", 
     "quite", " ", "a", " ", "bit"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"Chop", "[", 
   RowBox[{"FullSimplify", "[", 
    SubscriptBox["Minv", "hand"], "]"}], "]"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"Chop", "[", 
   RowBox[{"FullSimplify", "[", 
    SubscriptBox["M", "hand"], "]"}], "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.551556430055855*^9, 3.551556531181115*^9}, {
   3.5515565634118423`*^9, 3.551556576759741*^9}, {3.55155661021916*^9, 
   3.551556649814583*^9}, {3.551557385025131*^9, 3.551557401257144*^9}, {
   3.551557723322667*^9, 3.55155773013475*^9}, {3.551559072200904*^9, 
   3.5515592075378447`*^9}, {3.551832771577524*^9, 3.5518328041487226`*^9}, {
   3.551832858953171*^9, 3.551832859197027*^9}, {3.55183291145534*^9, 
   3.551832915593219*^9}, {3.5518330089425983`*^9, 3.551833039827745*^9}, {
   3.551833070196294*^9, 3.5518330971817102`*^9}, {3.552100560175495*^9, 
   3.552100564758082*^9}, {3.552101139233798*^9, 3.552101172269602*^9}, 
   3.552103677937401*^9, 3.552103763801458*^9, 3.5521038376224413`*^9, 
   3.552145625757162*^9, 3.552148192348591*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      FractionBox[
       RowBox[{"9.516796874999999`", "\[VeryThinSpace]", "-", 
        RowBox[{"3.516796875`", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"18.5625`", "\[VeryThinSpace]", "+", 
           RowBox[{"5.4375`", " ", 
            RowBox[{"Cos", "[", 
             RowBox[{"2", " ", 
              SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
           RowBox[{"24.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], 
       RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"105.`", "\[VeryThinSpace]", "+", 
           RowBox[{"192.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]], 
      FractionBox[
       RowBox[{
        RowBox[{
         RowBox[{"-", "3.5167968750000003`"}], " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
        RowBox[{"5.4375`", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
         SubscriptBox["\[Theta]", "1"]}]}], 
       RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"105.`", "\[VeryThinSpace]", "+", 
           RowBox[{"192.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]], "0"},
     {
      FractionBox[
       RowBox[{
        RowBox[{
         RowBox[{"-", "3.5167968750000003`"}], " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
        RowBox[{"5.4375`", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
         SubscriptBox["\[Theta]", "1"]}]}], 
       RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"105.`", "\[VeryThinSpace]", "+", 
           RowBox[{"192.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]], 
      FractionBox[
       RowBox[{"9.516796874999999`", "\[VeryThinSpace]", "+", 
        RowBox[{"3.516796875`", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"18.5625`", "\[VeryThinSpace]", "-", 
           RowBox[{"5.4375`", " ", 
            RowBox[{"Cos", "[", 
             RowBox[{"2", " ", 
              SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
           RowBox[{"24.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], 
       RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"105.`", "\[VeryThinSpace]", "+", 
           RowBox[{"192.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]], "0"},
     {"0", "0", "0.3333333333333333`"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.551556524260543*^9, 3.551556594175807*^9}, {
   3.5515566254873343`*^9, 3.551556650751068*^9}, 3.55155690332554*^9, 
   3.551557303279747*^9, 3.551557731955867*^9, {3.5515585226052437`*^9, 
   3.5515585463264303`*^9}, 3.5515586706943083`*^9, 3.551559080145917*^9, 
   3.5515591124501343`*^9, {3.551559159459776*^9, 3.551559208434993*^9}, 
   3.551744634109531*^9, 3.551754304548637*^9, 3.5517544159368467`*^9, 
   3.551804246965889*^9, 3.551832822628018*^9, {3.551833031443158*^9, 
   3.551833041790004*^9}, 3.551833098623781*^9, 3.552099098208049*^9, {
   3.552100550428465*^9, 3.552100566432459*^9}, 3.5521011759437647`*^9, 
   3.5521029029793453`*^9, 3.552103096416008*^9, 3.552103212406275*^9, 
   3.552103677937726*^9, 3.552103763801765*^9, {3.55210381915991*^9, 
   3.552103837622765*^9}, 3.5521455122267103`*^9, 3.5521456257575397`*^9, 
   3.552148192349024*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      FractionBox[
       RowBox[{"992.3045141601561`", "\[VeryThinSpace]", "+", 
        RowBox[{"366.69201416015625`", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"5.2719779517749`", "\[VeryThinSpace]", "-", 
                RowBox[{"15.133868546407484`", " ", "\[ImaginaryI]"}]}], 
               ")"}], "+", 
              RowBox[{"16.64067058441523`", " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"5.2719779517749`", "\[VeryThinSpace]", "+", 
                RowBox[{"15.133868546407484`", " ", "\[ImaginaryI]"}]}], 
               ")"}], "+", 
              RowBox[{"16.64067058441523`", " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
            RowBox[{"(", 
             RowBox[{"11.42692947743593`", "\[VeryThinSpace]", "+", 
              RowBox[{"16.64067058441523`", " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}]}], "+", 
           RowBox[{
            RowBox[{"Cos", "[", 
             RowBox[{"2", " ", 
              SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "197.69765625000002`"}], "+", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"104.28749999999991`", "\[VeryThinSpace]", "-", 
                 RowBox[{"1044.`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
       RowBox[{"78.2015625`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"391.55625`", "\[VeryThinSpace]", "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"771.80625`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"891.`", "\[VeryThinSpace]", "+", 
                 RowBox[{"576.`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
          ")"}]}]}]], 
      FractionBox[
       RowBox[{
        RowBox[{"366.69201416015625`", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
        RowBox[{
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "197.69765625000002`"}], "+", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"104.28750000000002`", "\[VeryThinSpace]", "-", 
              RowBox[{"1044.`", " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], 
       RowBox[{"78.2015625`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"391.55625`", "\[VeryThinSpace]", "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"771.80625`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"891.`", "\[VeryThinSpace]", "+", 
                 RowBox[{"576.`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
          ")"}]}]}]], "0"},
     {
      FractionBox[
       RowBox[{
        RowBox[{"366.69201416015625`", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}]}], "+", 
        RowBox[{
         RowBox[{"Sin", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "197.69765625000002`"}], "+", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"104.28750000000002`", "\[VeryThinSpace]", "-", 
              RowBox[{"1044.`", " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], 
       RowBox[{"78.2015625`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"391.55625`", "\[VeryThinSpace]", "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"771.80625`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"891.`", "\[VeryThinSpace]", "+", 
                 RowBox[{"576.`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
          ")"}]}]}]], 
      FractionBox[
       RowBox[{"992.3045141601556`", "\[VeryThinSpace]", "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          RowBox[{"2", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "366.692014160156`"}], "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"197.6976562499999`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "104.28749999999991`"}], "+", 
                 RowBox[{"1043.9999999999993`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
          ")"}]}], "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"2934.7523437499967`", "\[VeryThinSpace]", "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"6278.737499999992`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"6083.9999999999945`", "\[VeryThinSpace]", "+", 
                 RowBox[{"4607.999999999995`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
          ")"}]}]}], 
       RowBox[{"78.2015625`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"391.55625`", "\[VeryThinSpace]", "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"771.80625`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"891.`", "\[VeryThinSpace]", "+", 
                 RowBox[{"576.`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
          ")"}]}]}]], "0"},
     {"0", "0", "3.`"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{{3.551556524260543*^9, 3.551556594175807*^9}, {
   3.5515566254873343`*^9, 3.551556650751068*^9}, 3.55155690332554*^9, 
   3.551557303279747*^9, 3.551557731955867*^9, {3.5515585226052437`*^9, 
   3.5515585463264303`*^9}, 3.5515586706943083`*^9, 3.551559080145917*^9, 
   3.5515591124501343`*^9, {3.551559159459776*^9, 3.551559208434993*^9}, 
   3.551744634109531*^9, 3.551754304548637*^9, 3.5517544159368467`*^9, 
   3.551804246965889*^9, 3.551832822628018*^9, {3.551833031443158*^9, 
   3.551833041790004*^9}, 3.551833098623781*^9, 3.552099098208049*^9, {
   3.552100550428465*^9, 3.552100566432459*^9}, 3.5521011759437647`*^9, 
   3.5521029029793453`*^9, 3.552103096416008*^9, 3.552103212406275*^9, 
   3.552103677937726*^9, 3.552103763801765*^9, {3.55210381915991*^9, 
   3.552103837622765*^9}, 3.5521455141725807`*^9, 3.552145625758107*^9, 
   3.5521481923496017`*^9}]
}, Open  ]],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
    "Now", " ", "you", " ", "might", " ", "have", " ", "noticed", " ", "that",
      " ", "the", " ", "preceeding", " ", "equations", " ", "include", " ", 
     "a", " ", "potentially", " ", "arbitrary", " ", "Jacobian", " ", 
     RowBox[{"pseudoinverse", ".", " ", "In"}], " ", "addition"}], ",", " ", 
    RowBox[{"they", " ", 
     RowBox[{"don", "'"}], "t", " ", "guarantee", " ", "that", " ", "the", 
     " ", "null", " ", "space", " ", "torqes", " ", "will", " ", "not", " ", 
     "interfere", " ", "with", " ", "the", " ", "operational", " ", "space", 
     " ", "forces", " ", "and", " ", 
     RowBox[{"accelerations", ".", " ", "To"}], " ", "convince", " ", 
     "yourself", " ", "that", " ", "the", " ", "torques", " ", "will", " ", 
     "interfere", " ", "in", " ", "general"}], ",", " ", 
    RowBox[{
    "consider", " ", "that", " ", "the", " ", "Jacobian", " ", "itself", " ", 
     "relates", " ", "velocities", " ", "and", " ", "forces", " ", "and", " ",
      "has", " ", "no", " ", "notion", " ", "of", " ", 
     RowBox[{"mass", ".", " ", "As"}], " ", "such"}], ",", " ", 
    RowBox[{"while", " ", "the", " ", 
     RowBox[{"Jacobian", "'"}], "s", " ", "null", " ", "space", " ", "is", 
     " ", "a", " ", "velocity", " ", "and", " ", "force", " ", "null", " ", 
     "space"}], ",", " ", 
    RowBox[{
    "it", " ", "is", " ", "not", " ", "an", " ", "acceleration", " ", "null", 
     " ", 
     RowBox[{"space", ".", " ", "These"}], " ", "two", " ", "problems", " ", 
     "can", " ", "easily", " ", "ruin", " ", "any", " ", "controller"}], ",", 
    " ", 
    RowBox[{
     RowBox[{
     "and", " ", "must", " ", "be", " ", "dealt", " ", "with", " ", "in", " ",
       "a", " ", "principled", " ", "manner"}], "..."}]}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"PROBLEM", " ", "1"}], " ", ":", " ", 
    RowBox[{
     RowBox[{
     "You", " ", "might", " ", "notice", " ", "a", " ", "Jacobian", " ", 
      "transpose", " ", 
      RowBox[{"pseudoinverse", ".", " ", "Infinitely"}], " ", "many", " ", 
      "pseudoinverses", " ", 
      RowBox[{"exist", ".", " ", "And"}], " ", "we", " ", "do", " ", "not", 
      " ", "want", " ", "to", " ", "arbitrarily", " ", "hand"}], "-", 
     RowBox[{"engineer", " ", "a", " ", "pseudoinverse"}]}]}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"PROBLEM", " ", "2"}], " ", ":", " ", 
     RowBox[{
     "The", " ", "null", " ", "space", " ", "torques", " ", "are", " ", "in", 
      " ", "a", " ", 
      RowBox[{"Jacobian", "'"}], "s", " ", "null", " ", 
      RowBox[{"space", ".", " ", "Ie", ".", " ", "A"}], " ", 
      RowBox[{"velocity", "/", "force"}], " ", "null", " ", "space"}]}], ",", 
    " ", 
    RowBox[{
     RowBox[{
      RowBox[{"not", " ", "an", " ", "acceleration", " ", "null", " ", 
       RowBox[{
       "space", ".", "\[IndentingNewLine]", "\[IndentingNewLine]", "We"}], 
       " ", "shall", " ", "solve", " ", "both", " ", "problems", " ", "with", 
       " ", "one", " ", 
       RowBox[{"stone", ".", " ", "Aka", ".", " ", "We"}], " ", "shall", " ", 
       "compute", " ", "a", " ", "unique", " ", "optimal", " ", "Jacobian", 
       " ", "pseudo"}], "-", 
      RowBox[{
      "inverse", " ", "that", " ", "projects", " ", "null", " ", "space", " ",
        "torques", " ", "into", " ", "a", " ", "velocity", " ", "and", " ", 
       "accleleration", " ", "null"}], "-", 
      RowBox[{
       RowBox[{"space", ".", " ", "Let"}], " ", "us", " ", "look", " ", "at", 
       " ", "the", " ", "equation", " ", 
       RowBox[{"again", ":", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           SubscriptBox["J", "hand"], ".", 
           SuperscriptBox["Mgc", 
            RowBox[{"-", "1"}]], ".", " ", 
           SuperscriptBox[
            SubscriptBox["J", "hand"], "'"]}], ")"}], ".", " ", 
         SubscriptBox["F", "hand"]}]}]}]}], " ", "=", " ", 
     RowBox[{"\[Delta]\[Delta]x", " ", "-", " ", 
      RowBox[{
       SubscriptBox[
        OverscriptBox["J", "."], "hand"], " ", ".", " ", "\[Delta]q"}], " ", 
      "+", " ", 
      RowBox[{
       RowBox[{
        SubscriptBox["J", "hand"], ".", 
        SuperscriptBox["Mgc", 
         RowBox[{"-", "1"}]], ".", " ", "b"}], 
       RowBox[{"(", 
        RowBox[{"q", ",", " ", 
         OverscriptBox["q", "."]}], ")"}]}], " ", "+", " ", 
      RowBox[{
       SubscriptBox["J", "hand"], ".", 
       SuperscriptBox["Mgc", 
        RowBox[{"-", "1"}]], ".", " ", 
       SubscriptBox["g", "q"]}], "  ", "-", " ", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         SubscriptBox["J", "hand"], ".", 
         SuperscriptBox["Mgc", 
          RowBox[{"-", "1"}]]}], ")"}], ".", 
       RowBox[{"(", 
        RowBox[{"I", "-", 
         RowBox[{
          SuperscriptBox[
           SubscriptBox["J", "hand"], "'"], ".", 
          SuperscriptBox[
           SubscriptBox["J", "hand"], 
           RowBox[{"'", "+"}]]}]}], ")"}], ".", " ", 
       SubscriptBox["\[CapitalGamma]", "null"]}]}]}]}], " ", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
    "The", " ", "operational", " ", "force", " ", "to", " ", "acceleration", 
     " ", "relationship", " ", "must", " ", "hold", " ", "at", " ", "any", 
     " ", "velocity", " ", "or", " ", "gravitational", " ", "acceleration", 
     " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{
        "well", " ", "unless", " ", "you", " ", "are", " ", "moving", " ", 
         "close", " ", "to", " ", "the", " ", "speed", " ", "of", " ", 
         "light"}], ",", " ", 
        RowBox[{
        "in", " ", "which", " ", "case", " ", "I", " ", "shall", " ", "have", 
         " ", "to", " ", "derive", " ", "a", " ", "more", " ", "complicated", 
         " ", "robot", " ", "controller"}]}], ")"}], ".", " ", "In"}], " ", 
     "addition"}], ",", " ", 
    RowBox[{"the", " ", "null", " ", "space", " ", "torques", " ", "are", " ", 
     RowBox[{"arbitrary", ".", " ", "As"}], " ", "such"}], ",", " ", 
    RowBox[{
     RowBox[{
     "in", " ", "the", " ", "above", " ", "equation", " ", "we", " ", "must", 
      " ", 
      RowBox[{"have", ":", "\[IndentingNewLine]", " ", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          SubscriptBox["J", "hand"], ".", 
          SuperscriptBox["Mgc", 
           RowBox[{"-", "1"}]]}], ")"}], ".", 
        RowBox[{"(", 
         RowBox[{"I", "-", 
          RowBox[{
           SuperscriptBox[
            SubscriptBox["J", "hand"], "'"], ".", 
           SuperscriptBox[
            SubscriptBox["J", "hand"], 
            RowBox[{"'", "+"}]]}]}], ")"}], ".", " ", 
        SubscriptBox["\[CapitalGamma]", "null"]}]}]}], "=", " ", "0"}]}], 
   "\[IndentingNewLine]", 
   "                                                           ", 
   RowBox[{
    RowBox[{
     SubscriptBox["J", "hand"], ".", 
     SuperscriptBox["Mgc", 
      RowBox[{"-", "1"}]]}], " ", "=", " ", 
    RowBox[{
     SubscriptBox["J", "hand"], ".", 
     SuperscriptBox["Mgc", 
      RowBox[{"-", "1"}]], ".", 
     SuperscriptBox[
      SubscriptBox["J", "hand"], "'"], ".", 
     SuperscriptBox[
      SubscriptBox["J", "hand"], 
      RowBox[{"'", "+"}]]}]}], "\[IndentingNewLine]", 
   "                                                                   ", 
   RowBox[{
    SuperscriptBox[
     SubscriptBox["J", "hand"], 
     RowBox[{"'", "+"}]], " ", "=", " ", 
    RowBox[{
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{
        SubscriptBox["J", "hand"], ".", 
        SuperscriptBox["Mgc", 
         RowBox[{"-", "1"}]], ".", 
        SuperscriptBox[
         SubscriptBox["J", "hand"], "'"]}], ")"}], 
      RowBox[{"-", "1"}]], 
     RowBox[{
      SubscriptBox["J", "hand"], ".", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]]}]}]}], "\[IndentingNewLine]", 
   "                                                                  ", 
   StyleBox[
    RowBox[{
     SuperscriptBox[
      SubscriptBox["J", "hand"], 
      RowBox[{"'", "#"}]], " ", "=", " ", 
     RowBox[{
      SubscriptBox["M", "hand"], " ", ".", " ", 
      SubscriptBox["J", "hand"], " ", ".", " ", 
      SuperscriptBox["Mgc", 
       RowBox[{"-", "1"}]]}]}],
    FontWeight->"Bold"], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
    "This", " ", "specific", " ", "acceleration", " ", "null", " ", "space", 
     " ", "pseudo", " ", "inverse", " ", "was", " ", "discovered", " ", "by", 
     " ", "Khatib", " ", "and", " ", "he", " ", "called", " ", "it", " ", 
     "the", " ", 
     RowBox[{
     "\"\<dynamically consistent generalized inverse\>\"", ".", " ", "It"}], 
     " ", "is", " ", "unique", " ", "and", " ", "allows", " ", "partitioning",
      " ", "a", " ", 
     RowBox[{"robot", "'"}], "s", " ", "control", " ", "space", " ", "into", 
     " ", "orthogonal", " ", "control", " ", 
     RowBox[{"(", 
      RowBox[{"velocity", "+", "acceleration"}], ")"}], " ", 
     RowBox[{"subspaces", ".", " ", "Using"}], " ", "it"}], ",", " ", 
    RowBox[{
     RowBox[{
     "we", " ", "end", " ", "up", " ", "with", " ", "our", " ", "final", " ", 
      "complete", " ", "operational", " ", "space", " ", 
      RowBox[{
      "equations", ":", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       StyleBox[
        SubscriptBox["F", "hand"],
        FontWeight->"Bold"]}]}], 
     StyleBox[" ",
      FontWeight->"Bold"], 
     StyleBox["=",
      FontWeight->"Bold"], 
     StyleBox["  ",
      FontWeight->"Bold"], 
     StyleBox[
      RowBox[{
       RowBox[{
        SubscriptBox["M", "hand"], " ", ".", " ", "\[Delta]\[Delta]x"}], " ", 
       "+", " ", 
       RowBox[{
        StyleBox["(",
         FontWeight->"Bold"], 
        RowBox[{
         RowBox[{
          RowBox[{
           StyleBox[
            SubscriptBox["J", "hand"],
            FontWeight->"Bold"], 
           StyleBox[".",
            FontWeight->"Bold"], 
           SuperscriptBox["Mgc", 
            RowBox[{"-", "1"}]], 
           StyleBox[".",
            FontWeight->"Bold"], 
           StyleBox[" ",
            FontWeight->"Bold"], 
           StyleBox["b",
            FontWeight->"Bold"]}], 
          StyleBox[
           RowBox[{"(", 
            RowBox[{"q", ",", " ", 
             OverscriptBox["q", "."]}], ")"}],
           FontWeight->"Bold"]}], 
         StyleBox["-",
          FontWeight->"Bold"], 
         StyleBox[" ",
          FontWeight->"Bold"], 
         StyleBox[
          RowBox[{
           SubscriptBox[
            OverscriptBox["J", "."], "hand"], " ", ".", " ", "\[Delta]q"}],
          FontWeight->"Bold"]}], 
        StyleBox[" ",
         FontWeight->"Bold"], 
        StyleBox[")",
         FontWeight->"Bold"]}], " ", "+", " ", 
       RowBox[{
        StyleBox["(",
         FontWeight->"Bold"], 
        RowBox[{
         StyleBox[
          SubscriptBox["J", "hand"],
          FontWeight->"Bold"], 
         StyleBox[".",
          FontWeight->"Bold"], 
         SuperscriptBox["Mgc", 
          RowBox[{"-", "1"}]], 
         StyleBox[".",
          FontWeight->"Bold"], 
         StyleBox[" ",
          FontWeight->"Bold"], 
         StyleBox[
          SubscriptBox["g", "q"],
          FontWeight->"Bold"]}], 
        StyleBox[")",
         FontWeight->"Bold"]}], "  ", "+", " ", 
       RowBox[{
        RowBox[{
         StyleBox["(",
          FontWeight->"Bold"], 
         RowBox[{
          StyleBox[
           SubscriptBox["J", "hand"],
           FontWeight->"Bold"], 
          StyleBox[".",
           FontWeight->"Bold"], 
          SuperscriptBox["Mgc", 
           RowBox[{"-", "1"}]]}], 
         StyleBox[")",
          FontWeight->"Bold"]}], ".", 
        RowBox[{
         StyleBox["(",
          FontWeight->"Bold"], 
         RowBox[{
          StyleBox["I",
           FontWeight->"Bold"], 
          StyleBox["-",
           FontWeight->"Bold"], 
          RowBox[{
           StyleBox[
            SuperscriptBox[
             SubscriptBox["J", "hand"], "'"],
            FontWeight->"Bold"], 
           StyleBox[".",
            FontWeight->"Bold"], 
           StyleBox[
            SubscriptBox["M", "hand"],
            FontWeight->"Bold"], 
           StyleBox[" ",
            FontWeight->"Bold"], 
           StyleBox[".",
            FontWeight->"Bold"], 
           StyleBox[" ",
            FontWeight->"Bold"], 
           StyleBox[
            SubscriptBox["J", "hand"],
            FontWeight->"Bold"], 
           StyleBox[" ",
            FontWeight->"Bold"], 
           StyleBox[".",
            FontWeight->"Bold"], 
           StyleBox[" ",
            FontWeight->"Bold"], 
           SuperscriptBox["Mgc", 
            RowBox[{"-", "1"}]]}]}], 
         StyleBox[")",
          FontWeight->"Bold"]}], ".", " ", 
        SubscriptBox["\[CapitalGamma]", "null"]}]}],
      FontWeight->"Bold"]}]}], 
   StyleBox[" ",
    FontWeight->"Bold"], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
    "Notice", " ", "that", " ", "the", " ", "equation", " ", "contains", " ", 
     "three", " ", "terms", " ", "like", " ", "the", " ", "joint", " ", 
     "space", " ", "equation"}], ",", " ", 
    RowBox[{"the", " ", "acceleration"}], ",", " ", 
    RowBox[{"velocity", " ", "and", " ", "gravitational", " ", "field", " ", 
     RowBox[{"terms", ".", " ", "In"}], " ", "addition"}], ",", " ", 
    RowBox[{
    "it", " ", "also", " ", "contains", " ", "the", " ", "null", " ", "space",
      " ", "force", " ", 
     RowBox[{"term", ".", " ", "Recursively"}], " ", "inserting", " ", "more",
      " ", "forces", " ", "into", " ", 
     SubscriptBox["\[CapitalGamma]", "null"], " ", "allows", " ", "the", " ", 
     "control", " ", "equation", " ", "to", " ", "generalize", " ", "to", " ",
      "multiple", " ", 
     RowBox[{"tasks", "."}]}]}]}]}]], "Text",
 CellChangeTimes->{{3.550979298118322*^9, 3.5509793795832443`*^9}, {
   3.550979441814426*^9, 3.550980086646538*^9}, {3.551466097612962*^9, 
   3.5514661998861237`*^9}, {3.551466239698251*^9, 3.55146629968124*^9}, {
   3.551466342940536*^9, 3.551466520069501*^9}, {3.551466597820854*^9, 
   3.551466602265688*^9}, {3.551466686514743*^9, 3.551466914701836*^9}, {
   3.5514669572913857`*^9, 3.551467091799601*^9}, {3.5514674992145777`*^9, 
   3.5514674998601017`*^9}, {3.5514676289341393`*^9, 3.551467629391017*^9}, {
   3.551467664951981*^9, 3.5514678647367163`*^9}, {3.551467996752442*^9, 
   3.551468001522871*^9}, {3.5514680915391273`*^9, 3.551468092157201*^9}, {
   3.5514682059344053`*^9, 3.551468334688272*^9}, {3.5514683902715178`*^9, 
   3.5514684341891727`*^9}, {3.5514685320063343`*^9, 3.551468621600397*^9}, {
   3.551468932203638*^9, 3.551468972050478*^9}, {3.551469044423048*^9, 
   3.551469103347519*^9}, {3.551469143506196*^9, 3.5514692591155643`*^9}, {
   3.551469873754986*^9, 3.5514703780258102`*^9}, {3.551470413427432*^9, 
   3.5514704352785673`*^9}, {3.551471186628385*^9, 3.5514714483957033`*^9}, {
   3.5514714827954283`*^9, 3.5514715826585207`*^9}, {3.551538589547621*^9, 
   3.5515386386253567`*^9}, {3.551540268298822*^9, 3.551540398716147*^9}, {
   3.551540777175178*^9, 3.551540802099308*^9}, {3.551540861550778*^9, 
   3.551540898038178*^9}, {3.551541551504665*^9, 3.551541648639968*^9}, {
   3.5515418103184423`*^9, 3.5515419105426073`*^9}, {3.551542072937934*^9, 
   3.5515421017965927`*^9}, {3.551542277966793*^9, 3.5515422811079206`*^9}, {
   3.551542347482604*^9, 3.551542775685547*^9}, {3.5515431910381403`*^9, 
   3.551543201429985*^9}, {3.5515435010137777`*^9, 3.55154352849752*^9}, {
   3.551555107566698*^9, 3.551555123336629*^9}, {3.551555196891008*^9, 
   3.551555388191161*^9}, {3.551555430353992*^9, 3.551555478402012*^9}, {
   3.551555525862488*^9, 3.551555892513973*^9}, {3.5515559305376987`*^9, 
   3.551556248316388*^9}, {3.551556353303355*^9, 3.551556393088554*^9}, 
   3.5515564270922403`*^9, {3.551557562247094*^9, 3.551557596923724*^9}, {
   3.551833131394569*^9, 3.5518331340868196`*^9}, {3.552101207475905*^9, 
   3.552101235040162*^9}, {3.55210127613126*^9, 3.5521012815716743`*^9}, {
   3.5521014568060904`*^9, 3.552101646446045*^9}, {3.5521016772499657`*^9, 
   3.552101955619273*^9}, 3.5521022197395372`*^9, {3.552102270547366*^9, 
   3.5521023374599123`*^9}, {3.552102374447091*^9, 3.5521024794464073`*^9}, 
   3.552103677939371*^9, 3.5521037638033237`*^9, 3.552103837624411*^9, 
   3.5521456257591543`*^9, 3.552148192350645*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell["\<\
Reduced dynamic control equations in the operational coordinates\
\>", "Subsection",
 CellChangeTimes->{{3.551555512485188*^9, 3.5515555155141163`*^9}, {
   3.551557869475911*^9, 3.5515578738158617`*^9}, 3.55210367793941*^9, 
   3.552103763803364*^9, 3.552103837624452*^9, 3.552145625759197*^9, 
   3.552148192350685*^9}],

Cell[BoxData[
 RowBox[{"Allright", ",", " ", 
  RowBox[{
  "so", " ", "we", " ", "computed", " ", "the", " ", "absolutely", " ", 
   "general", " ", "control", " ", 
   RowBox[{"equations", ".", " ", "Back"}], " ", "to", " ", "implementing", 
   " ", "a", " ", "practical", " ", 
   RowBox[{"controller", ".", " ", "First"}], " ", "of", " ", "all"}], ",", 
  " ", 
  RowBox[{"we", " ", "want", " ", "to", " ", "specify", " ", "desired", " ", 
   RowBox[{"positions", ":"}]}]}]], "Text",
 CellChangeTimes->{{3.550979298118322*^9, 3.5509793795832443`*^9}, {
   3.550979441814426*^9, 3.550980086646538*^9}, {3.551466097612962*^9, 
   3.5514661998861237`*^9}, {3.551466239698251*^9, 3.55146629968124*^9}, {
   3.551466342940536*^9, 3.551466520069501*^9}, {3.551466597820854*^9, 
   3.551466602265688*^9}, {3.551466686514743*^9, 3.551466914701836*^9}, {
   3.5514669572913857`*^9, 3.551467091799601*^9}, {3.5514674992145777`*^9, 
   3.5514674998601017`*^9}, {3.5514676289341393`*^9, 3.551467629391017*^9}, {
   3.551467664951981*^9, 3.5514678647367163`*^9}, {3.551467996752442*^9, 
   3.551468001522871*^9}, {3.5514680915391273`*^9, 3.551468092157201*^9}, {
   3.5514682059344053`*^9, 3.551468334688272*^9}, {3.5514683902715178`*^9, 
   3.5514684341891727`*^9}, {3.5514685320063343`*^9, 3.551468621600397*^9}, {
   3.551468932203638*^9, 3.551468972050478*^9}, {3.551469044423048*^9, 
   3.551469103347519*^9}, {3.551469143506196*^9, 3.5514692591155643`*^9}, {
   3.551469873754986*^9, 3.5514703780258102`*^9}, {3.551470413427432*^9, 
   3.5514704352785673`*^9}, {3.551471186628385*^9, 3.5514714483957033`*^9}, {
   3.5514714827954283`*^9, 3.5514715826585207`*^9}, {3.551538589547621*^9, 
   3.5515386386253567`*^9}, {3.551540268298822*^9, 3.551540398716147*^9}, {
   3.551540777175178*^9, 3.551540802099308*^9}, {3.551540861550778*^9, 
   3.551540898038178*^9}, {3.551541551504665*^9, 3.551541648639968*^9}, {
   3.5515418103184423`*^9, 3.5515419105426073`*^9}, {3.551542072937934*^9, 
   3.5515421017965927`*^9}, {3.551542277966793*^9, 3.5515422811079206`*^9}, {
   3.551542347482604*^9, 3.551542775685547*^9}, {3.5515431910381403`*^9, 
   3.551543201429985*^9}, {3.5515435010137777`*^9, 3.55154352849752*^9}, {
   3.551555107566698*^9, 3.551555123336629*^9}, {3.551555196891008*^9, 
   3.551555388191161*^9}, {3.551555430353992*^9, 3.551555481772599*^9}, {
   3.5515575494803123`*^9, 3.551557560362154*^9}, {3.551557629323189*^9, 
   3.55155771220266*^9}, {3.551557767177718*^9, 3.551557847899482*^9}, {
   3.551557892265295*^9, 3.551558137277968*^9}, {3.551558405606203*^9, 
   3.551558418169613*^9}, 3.552103677939496*^9, 3.552103763803446*^9, 
   3.552103837624546*^9, 3.55214562575928*^9, 3.552148192350771*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"xHandDes", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["xdes", "0"]},
      {
       SubscriptBox["xdes", "1"]},
      {
       SubscriptBox["xdes", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"dxHandDes", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["dxdes", "0"]},
      {
       SubscriptBox["dxdes", "1"]},
      {
       SubscriptBox["dxdes", "2"]}
     }], "\[NoBreak]", ")"}]}], ";", 
  RowBox[{"ddxHandDes", " ", "=", " ", 
   RowBox[{"(", "\[NoBreak]", GridBox[{
      {
       SubscriptBox["ddxdes", "0"]},
      {
       SubscriptBox["ddxdes", "1"]},
      {
       SubscriptBox["ddxdes", "2"]}
     }], "\[NoBreak]", ")"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.550979298118322*^9, 3.5509793795832443`*^9}, {
   3.550979441814426*^9, 3.550980086646538*^9}, {3.551466097612962*^9, 
   3.5514661998861237`*^9}, {3.551466239698251*^9, 3.55146629968124*^9}, {
   3.551466342940536*^9, 3.551466520069501*^9}, {3.551466597820854*^9, 
   3.551466602265688*^9}, {3.551466686514743*^9, 3.551466914701836*^9}, {
   3.5514669572913857`*^9, 3.551467091799601*^9}, {3.5514674992145777`*^9, 
   3.5514674998601017`*^9}, {3.5514676289341393`*^9, 3.551467629391017*^9}, {
   3.551467664951981*^9, 3.5514678647367163`*^9}, {3.551467996752442*^9, 
   3.551468001522871*^9}, {3.5514680915391273`*^9, 3.551468092157201*^9}, {
   3.5514682059344053`*^9, 3.551468334688272*^9}, {3.5514683902715178`*^9, 
   3.5514684341891727`*^9}, {3.5514685320063343`*^9, 3.551468621600397*^9}, {
   3.551468932203638*^9, 3.551468972050478*^9}, {3.551469044423048*^9, 
   3.551469103347519*^9}, {3.551469143506196*^9, 3.5514692591155643`*^9}, {
   3.551469873754986*^9, 3.5514703780258102`*^9}, {3.551470413427432*^9, 
   3.5514704352785673`*^9}, {3.551471186628385*^9, 3.5514714483957033`*^9}, {
   3.5514714827954283`*^9, 3.5514715826585207`*^9}, {3.551538589547621*^9, 
   3.5515386386253567`*^9}, {3.551540268298822*^9, 3.551540398716147*^9}, {
   3.551540777175178*^9, 3.551540802099308*^9}, {3.551540861550778*^9, 
   3.551540898038178*^9}, {3.551541551504665*^9, 3.551541648639968*^9}, {
   3.5515418103184423`*^9, 3.5515419105426073`*^9}, {3.551542072937934*^9, 
   3.5515421017965927`*^9}, {3.551542277966793*^9, 3.5515422811079206`*^9}, {
   3.551542347482604*^9, 3.551542775685547*^9}, {3.5515431910381403`*^9, 
   3.551543201429985*^9}, {3.5515435010137777`*^9, 3.55154352849752*^9}, {
   3.551555107566698*^9, 3.551555123336629*^9}, {3.551555196891008*^9, 
   3.551555388191161*^9}, {3.551555430353992*^9, 3.551555481772599*^9}, {
   3.5515575494803123`*^9, 3.551557560362154*^9}, {3.551557629323189*^9, 
   3.55155771220266*^9}, {3.551557767177718*^9, 3.551557847899482*^9}, {
   3.551557892265295*^9, 3.551558137277968*^9}, {3.551558405606203*^9, 
   3.551558489121117*^9}, 3.5521036779397707`*^9, 3.552103763803677*^9, 
   3.55210383762477*^9, 3.552145625759491*^9, 3.552148192350994*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "We", " ", "shall", " ", "again", " ", "eschew", " ", "the", " ", 
   "velocity", " ", "related", " ", "dynamics", " ", "terms"}], ",", " ", 
  RowBox[{"and", " ", "shall", " ", "ignore"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
   "the", " ", "null", " ", "space", " ", "torques", " ", "since", " ", "our",
     " ", "x"}], ",", "y", ",", 
   RowBox[{
    RowBox[{"z", " ", "controller", " ", "is", " ", "not", " ", 
     RowBox[{"redundant", ".", " ", "Projecting"}], " ", "the", " ", 
     "gravity", " ", "term", " ", "into", " ", "the", " ", "null"}], "-", 
    RowBox[{
    "space", " ", "is", " ", "only", " ", "useful", " ", "when", " ", "you", 
     " ", 
     RowBox[{"don", "'"}], "t", " ", "want", " ", "to", " ", "fight", " ", 
     "gravity", " ", "in", " ", "a", " ", "null"}], "-", 
    RowBox[{
     RowBox[{"space", ".", " ", "Since"}], " ", "we", " ", "really", " ", 
     RowBox[{"don", "'"}], "t", " ", "care", " ", "about", " ", "that", " ", 
     "for", " ", "this", " ", "robot", " ", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"well", " ", "it", " ", "really", " ", 
        RowBox[{"doesn", "'"}], "t", " ", "have", " ", "a", " ", "null"}], 
       "-", "space"}], ")"}]}]}], ",", " ", 
   RowBox[{
    RowBox[{
    "we", " ", "can", " ", "simply", " ", "go", " ", "ahead", " ", "and", " ",
      "use", " ", "the", " ", "joint", " ", "space", " ", "gravity", " ", 
     RowBox[{"estimate", ".", " ", "\[IndentingNewLine]", "Doing"}], " ", 
     "so", " ", "gives", " ", 
     RowBox[{"us", ":", "\[IndentingNewLine]", 
      SubscriptBox["F", "hand"]}]}], " ", "=", "  ", 
    RowBox[{
     SubscriptBox["M", "hand"], " ", ".", " ", "\[Delta]\[Delta]x"}]}]}], 
  " "}], "\[IndentingNewLine]", 
 RowBox[{"        ", 
  RowBox[{
   SubscriptBox["\[CapitalGamma]", "cmd"], " ", "=", " ", 
   RowBox[{
    RowBox[{
     SuperscriptBox[
      SubscriptBox["J", "hand"], "'"], " ", ".", " ", 
     SubscriptBox["M", "hand"], " ", ".", " ", "\[Delta]\[Delta]x"}], " ", 
    "+", " ", 
    SubscriptBox["g", "q"]}]}], "\[IndentingNewLine]", 
  " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "We", " ", "finally", " ", "have", " ", "inertially", " ", "decoupled", " ",
    "force", " ", "equations"}], ",", " ", 
  RowBox[{
  "which", " ", "are", " ", "equivalent", " ", "to", " ", "acceleration", " ",
    "equations", " ", "at", " ", "the", " ", 
   RowBox[{"hand", ".", " ", "These"}], " ", "allow", " ", "us", " ", "to", 
   " ", "switch", " ", "back", " ", "to", " ", "good", " ", "ole", " ", 
   "feedback", " ", "control"}]}], "\[IndentingNewLine]", 
 RowBox[{"    ", 
  RowBox[{
   SuperscriptBox[
    SubscriptBox["F", "hand"], "*"], " ", "=", " ", 
   RowBox[{"\[Delta]\[Delta]x", " ", "=", " ", 
    RowBox[{
     RowBox[{
      SubscriptBox["k", "p"], 
      RowBox[{"(", 
       RowBox[{
        SubscriptBox["x", "des"], " ", "-", " ", "x"}], ")"}]}], " ", "+", 
     " ", 
     RowBox[{
      SubscriptBox["k", "v"], 
      RowBox[{"(", 
       RowBox[{
        SubscriptBox[
         OverscriptBox["x", "."], "des"], " ", "-", " ", 
        OverscriptBox["x", "."]}], ")"}]}], " ", "+", " ", 
     RowBox[{
      SubscriptBox["k", "i"], 
      RowBox[{"(", 
       RowBox[{
        SubscriptBox[
         OverscriptBox["x", ".."], "des"], " ", "-", " ", 
        OverscriptBox["x", ".."]}], ")"}]}]}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
   "And", " ", "thus", " ", "finally", " ", "we", " ", "get", " ", "the", " ",
     "control", " ", "joint", " ", "torques", " ", "that", " ", "we", " ", 
    "can", " ", "send", " ", "to", " ", "the", " ", 
    RowBox[{"robot", "'"}], "s", " ", 
    RowBox[{"motors", ":", "\[IndentingNewLine]", "        ", 
     StyleBox[
      SubscriptBox["\[CapitalGamma]op", "cmd"],
      FontWeight->"Bold"]}]}], 
   StyleBox[" ",
    FontWeight->"Bold"], 
   StyleBox["=",
    FontWeight->"Bold"], 
   StyleBox[" ",
    FontWeight->"Bold"], 
   StyleBox[
    RowBox[{
     RowBox[{
      SuperscriptBox[
       SubscriptBox["J", "hand"], "'"], " ", ".", " ", 
      SubscriptBox["M", "hand"], " ", ".", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         SubscriptBox["k", "p"], 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox["x", "des"], " ", "-", " ", "x"}], ")"}]}], " ", "+", 
        " ", 
        RowBox[{
         SubscriptBox["k", "v"], 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox[
            OverscriptBox["x", "."], "des"], " ", "-", " ", 
           OverscriptBox["x", "."]}], ")"}]}], " ", "+", " ", 
        RowBox[{
         SubscriptBox["k", "i"], 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox[
            OverscriptBox["x", ".."], "des"], " ", "-", " ", 
           OverscriptBox["x", ".."]}], ")"}]}]}], ")"}]}], " ", "+", " ", 
     SubscriptBox["g", "q"]}],
    FontWeight->"Bold"]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Note", " ", ":", " ", 
   RowBox[{"The", " ", "full", " ", 
    RowBox[{"(", "unfactorized", ")"}], " ", "operational", " ", "space", " ",
     "equations", " ", "are", " ", "usually", " ", "quite", " ", 
    "complicated"}]}], ",", " ", 
  RowBox[{
  "even", " ", "for", " ", "simple", " ", "robots", " ", "like", " ", "the", 
   " ", 
   RowBox[{"RPP", ".", " ", "\[IndentingNewLine]", "This"}], " ", "simple", 
   " ", "tutorial", " ", "might", " ", "help", " ", "understand", " ", "why", 
   " ", "factorizing", " ", "the", " ", "control", " ", "problem", " ", "is", 
   " ", "almost", " ", "essential", " ", "for", " ", "more", " ", 
   "complicated", " ", 
   RowBox[{"robots", "."}]}]}]}], "Text",
 CellChangeTimes->{{3.550979298118322*^9, 3.5509793795832443`*^9}, {
   3.550979441814426*^9, 3.550980086646538*^9}, {3.551466097612962*^9, 
   3.5514661998861237`*^9}, {3.551466239698251*^9, 3.55146629968124*^9}, {
   3.551466342940536*^9, 3.551466520069501*^9}, {3.551466597820854*^9, 
   3.551466602265688*^9}, {3.551466686514743*^9, 3.551466914701836*^9}, {
   3.5514669572913857`*^9, 3.551467091799601*^9}, {3.5514674992145777`*^9, 
   3.5514674998601017`*^9}, {3.5514676289341393`*^9, 3.551467629391017*^9}, {
   3.551467664951981*^9, 3.5514678647367163`*^9}, {3.551467996752442*^9, 
   3.551468001522871*^9}, {3.5514680915391273`*^9, 3.551468092157201*^9}, {
   3.5514682059344053`*^9, 3.551468334688272*^9}, {3.5514683902715178`*^9, 
   3.5514684341891727`*^9}, {3.5514685320063343`*^9, 3.551468621600397*^9}, {
   3.551468932203638*^9, 3.551468972050478*^9}, {3.551469044423048*^9, 
   3.551469103347519*^9}, {3.551469143506196*^9, 3.5514692591155643`*^9}, {
   3.551469873754986*^9, 3.5514703780258102`*^9}, {3.551470413427432*^9, 
   3.5514704352785673`*^9}, {3.551471186628385*^9, 3.5514714483957033`*^9}, {
   3.5514714827954283`*^9, 3.5514715826585207`*^9}, {3.551538589547621*^9, 
   3.5515386386253567`*^9}, {3.551540268298822*^9, 3.551540398716147*^9}, {
   3.551540777175178*^9, 3.551540802099308*^9}, {3.551540861550778*^9, 
   3.551540898038178*^9}, {3.551541551504665*^9, 3.551541648639968*^9}, {
   3.5515418103184423`*^9, 3.5515419105426073`*^9}, {3.551542072937934*^9, 
   3.5515421017965927`*^9}, {3.551542277966793*^9, 3.5515422811079206`*^9}, {
   3.551542347482604*^9, 3.551542775685547*^9}, {3.5515431910381403`*^9, 
   3.551543201429985*^9}, {3.5515435010137777`*^9, 3.55154352849752*^9}, {
   3.551555107566698*^9, 3.551555123336629*^9}, {3.551555196891008*^9, 
   3.551555388191161*^9}, {3.551555430353992*^9, 3.551555481772599*^9}, {
   3.5515575494803123`*^9, 3.551557560362154*^9}, {3.551557629323189*^9, 
   3.55155771220266*^9}, {3.551557767177718*^9, 3.551557847899482*^9}, {
   3.551557892265295*^9, 3.551558137277968*^9}, {3.551558405606203*^9, 
   3.551558420932209*^9}, {3.551560068180105*^9, 3.5515600700539627`*^9}, {
   3.552102573352386*^9, 3.552102576210247*^9}, {3.5521029505883017`*^9, 
   3.552103069902335*^9}, {3.552103104825541*^9, 3.552103200546144*^9}, 
   3.5521036779403343`*^9, 3.5521037638041973`*^9, 3.552103837625334*^9, 
   3.552145625760001*^9, 3.552148192351499*^9}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   SubscriptBox["\[CapitalGamma]op", "cmd"], " ", "=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"Transpose", "[", "JOhand", "]"}], " ", ".", " ", 
     SubscriptBox["M", "hand"], " ", ".", 
     RowBox[{"(", " ", 
      RowBox[{
       RowBox[{"kp", 
        RowBox[{"(", 
         RowBox[{"xHandDes", " ", "-", " ", "xhand"}], ")"}]}], " ", "+", " ", 
       RowBox[{"kv", 
        RowBox[{"(", 
         RowBox[{"dxHandDes", " ", "-", " ", "dxhand"}], ")"}]}], " ", "+", 
       " ", 
       RowBox[{"ki", 
        RowBox[{"(", 
         RowBox[{"ddxHandDes", " ", "-", " ", "ddxhand"}], ")"}]}]}], " ", 
      ")"}]}], " ", "+", " ", 
    SubscriptBox["g", "q"]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"Chop", "[", 
   RowBox[{"FullSimplify", "[", 
    RowBox[{"Chop", "[", 
     SubscriptBox["\[CapitalGamma]op", "cmd"], "]"}], "]"}], "]"}], 
  "]"}]}], "Input",
 CellChangeTimes->{{3.550979298118322*^9, 3.5509793795832443`*^9}, {
   3.550979441814426*^9, 3.550980086646538*^9}, {3.551466097612962*^9, 
   3.5514661998861237`*^9}, {3.551466239698251*^9, 3.55146629968124*^9}, {
   3.551466342940536*^9, 3.551466520069501*^9}, {3.551466597820854*^9, 
   3.551466602265688*^9}, {3.551466686514743*^9, 3.551466914701836*^9}, {
   3.5514669572913857`*^9, 3.551467091799601*^9}, {3.5514674992145777`*^9, 
   3.5514674998601017`*^9}, {3.5514676289341393`*^9, 3.551467629391017*^9}, {
   3.551467664951981*^9, 3.5514678647367163`*^9}, {3.551467996752442*^9, 
   3.551468001522871*^9}, {3.5514680915391273`*^9, 3.551468092157201*^9}, {
   3.5514682059344053`*^9, 3.551468334688272*^9}, {3.5514683902715178`*^9, 
   3.5514684341891727`*^9}, {3.5514685320063343`*^9, 3.551468621600397*^9}, {
   3.551468932203638*^9, 3.551468972050478*^9}, {3.551469044423048*^9, 
   3.551469103347519*^9}, {3.551469143506196*^9, 3.5514692591155643`*^9}, {
   3.551469873754986*^9, 3.5514703780258102`*^9}, {3.551470413427432*^9, 
   3.5514704352785673`*^9}, {3.551471186628385*^9, 3.5514714483957033`*^9}, {
   3.5514714827954283`*^9, 3.5514715826585207`*^9}, {3.551538589547621*^9, 
   3.5515386386253567`*^9}, {3.551540268298822*^9, 3.551540398716147*^9}, {
   3.551540777175178*^9, 3.551540802099308*^9}, {3.551540861550778*^9, 
   3.551540898038178*^9}, {3.551541551504665*^9, 3.551541648639968*^9}, {
   3.5515418103184423`*^9, 3.5515419105426073`*^9}, {3.551542072937934*^9, 
   3.5515421017965927`*^9}, {3.551542277966793*^9, 3.5515422811079206`*^9}, {
   3.551542347482604*^9, 3.551542775685547*^9}, {3.5515431910381403`*^9, 
   3.551543201429985*^9}, {3.5515435010137777`*^9, 3.55154352849752*^9}, {
   3.551555107566698*^9, 3.551555123336629*^9}, {3.551555196891008*^9, 
   3.551555388191161*^9}, {3.551555430353992*^9, 3.551555481772599*^9}, 
   3.5515577748771477`*^9, {3.551558276323374*^9, 3.5515584030762873`*^9}, {
   3.551558458424016*^9, 3.551558462205441*^9}, {3.551558495269937*^9, 
   3.551558509386931*^9}, {3.551558562881688*^9, 3.551558573965156*^9}, {
   3.551559321355866*^9, 3.55155934101959*^9}, {3.551833553919252*^9, 
   3.551833562162599*^9}, {3.552103078749695*^9, 3.552103082910769*^9}, 
   3.552103677940631*^9, 3.552103763804469*^9, 3.5521038376256113`*^9, 
   3.552145625760277*^9, 3.552148192351777*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      FractionBox[
       RowBox[{
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["\[Theta]", "0"], "]"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"679.4982641601563`", " ", "kv", " ", 
            SubscriptBox["dx", "0"]}], "-", 
           RowBox[{"679.4982641601563`", " ", "kv", " ", 
            SubscriptBox["dxdes", "0"]}], "+", 
           RowBox[{"679.4982641601562`", " ", "kp", " ", 
            SubscriptBox["x", "0"]}], "-", 
           RowBox[{"679.4982641601563`", " ", "kp", " ", 
            SubscriptBox["xdes", "0"]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddxdes", "0"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "679.4982641601562`"}], "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "2727.5238720703123`"}], "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "5928.567187500001`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "8903.025`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7344.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                ")"}]}]}], ")"}]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddx", "0"], " ", 
            RowBox[{"(", 
             RowBox[{"679.4982641601562`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"2727.523872070313`", "\[VeryThinSpace]", "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"5928.567187500001`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"8903.025`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7344.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                   ")"}]}]}], ")"}]}]}], ")"}]}], "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"kv", " ", 
               SubscriptBox["dxdes", "0"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "2727.523872070313`"}], "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "5928.567187500001`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "8903.025`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7344.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                ")"}]}], "+", 
              RowBox[{"kv", " ", 
               SubscriptBox["dx", "0"], " ", 
               RowBox[{"(", 
                RowBox[{"2727.523872070313`", "\[VeryThinSpace]", "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"5928.567187500001`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"8903.025`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7344.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                   ")"}]}]}], ")"}]}], "+", 
              RowBox[{"kp", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{
                  SubscriptBox["xdes", "0"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "2727.523872070313`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "5928.567187500001`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "8903.025`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7344.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                   ")"}]}], "+", 
                 RowBox[{
                  SubscriptBox["x", "0"], " ", 
                  RowBox[{"(", 
                   RowBox[{"2727.523872070313`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"5928.567187500001`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"8903.025`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7344.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                    ")"}]}]}], ")"}]}]}], ")"}]}]}], ")"}]}]}], ")"}]}], "+", 
        
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["\[Theta]", "0"], "]"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"679.4982641601562`", " ", "kv", " ", 
            SubscriptBox["dx", "1"]}], "-", 
           RowBox[{"679.4982641601562`", " ", "kv", " ", 
            SubscriptBox["dxdes", "1"]}], "+", 
           RowBox[{"679.4982641601562`", " ", "kp", " ", 
            SubscriptBox["x", "1"]}], "-", 
           RowBox[{"679.4982641601562`", " ", "kp", " ", 
            SubscriptBox["xdes", "1"]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddxdes", "1"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "679.4982641601562`"}], "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "2727.523872070313`"}], "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "5928.567187500001`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "8903.025`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7344.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                ")"}]}]}], ")"}]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddx", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"679.4982641601562`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"2727.523872070313`", "\[VeryThinSpace]", "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"5928.567187500001`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"8903.025`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7344.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                   ")"}]}]}], ")"}]}]}], ")"}]}], "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"kv", " ", 
               SubscriptBox["dxdes", "1"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "2727.5238720703123`"}], "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "5928.567187500001`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "8903.025`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7344.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                ")"}]}], "+", 
              RowBox[{"kv", " ", 
               SubscriptBox["dx", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"2727.523872070313`", "\[VeryThinSpace]", "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"5928.567187500001`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"8903.025`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7344.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                   ")"}]}]}], ")"}]}], "+", 
              RowBox[{"kp", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{
                  SubscriptBox["xdes", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "2727.523872070313`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "5928.567187500001`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "8903.025`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7344.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                   ")"}]}], "+", 
                 RowBox[{
                  SubscriptBox["x", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"2727.523872070313`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"5928.567187500001`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"8903.025`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7344.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                    ")"}]}]}], ")"}]}]}], ")"}]}]}], ")"}]}]}], ")"}]}]}], 
       RowBox[{"78.2015625`", "\[VeryThinSpace]", "+", 
        RowBox[{"391.55625`", " ", 
         SubscriptBox["\[Theta]", "1"]}], "+", 
        RowBox[{"771.80625`", " ", 
         SubsuperscriptBox["\[Theta]", "1", "2"]}], "+", 
        RowBox[{"891.`", " ", 
         SubsuperscriptBox["\[Theta]", "1", "3"]}], "+", 
        RowBox[{"576.`", " ", 
         SubsuperscriptBox["\[Theta]", "1", "4"]}]}]]},
     {
      FractionBox[
       RowBox[{
        RowBox[{"ki", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"7", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
         SubscriptBox["ddxdes", "0"], " ", 
         SuperscriptBox[
          RowBox[{"(", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"0.`", "\[VeryThinSpace]", "+", 
              RowBox[{"4.2146848510894035`*^-8", " ", "\[ImaginaryI]"}]}], 
             ")"}], "+", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"0.`", "\[VeryThinSpace]", "+", 
               RowBox[{"1.6858739404357614`*^-7", " ", "\[ImaginaryI]"}]}], 
              ")"}], " ", 
             SubscriptBox["\[Theta]", "1"]}]}], ")"}], "2"]}], "+", 
        RowBox[{"kp", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"7", " ", 
           SubscriptBox["\[Theta]", "0"]}], "]"}], " ", 
         SubscriptBox["x", "1"], " ", 
         SuperscriptBox[
          RowBox[{"(", 
           RowBox[{"4.2146848510894035`*^-8", "+", 
            RowBox[{"1.6858739404357614`*^-7", " ", 
             SubscriptBox["\[Theta]", "1"]}]}], ")"}], "2"]}], "+", 
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["\[Theta]", "0"], "]"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"625.6125`", " ", "kv", " ", 
            SubscriptBox["dx", "0"]}], "-", 
           RowBox[{"625.6125`", " ", "kv", " ", 
            SubscriptBox["dxdes", "0"]}], "+", 
           RowBox[{"625.6125000000001`", " ", "kp", " ", 
            SubscriptBox["x", "0"]}], "-", 
           RowBox[{"625.6125`", " ", "kp", " ", 
            SubscriptBox["xdes", "0"]}], "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"kv", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"3132.45`", " ", 
                  SubscriptBox["dx", "0"]}], "-", 
                 RowBox[{"3132.45`", " ", 
                  SubscriptBox["dxdes", "0"]}]}], ")"}]}], "+", 
              RowBox[{"kp", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"3132.45`", " ", 
                  SubscriptBox["x", "0"]}], "-", 
                 RowBox[{"3132.45`", " ", 
                  SubscriptBox["xdes", "0"]}]}], ")"}]}], "+", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"6174.449999999999`", " ", "kv", " ", 
                  SubscriptBox["dx", "0"]}], "-", 
                 RowBox[{"6174.45`", " ", "kv", " ", 
                  SubscriptBox["dxdes", "0"]}], "+", 
                 RowBox[{"6174.45`", " ", "kp", " ", 
                  SubscriptBox["x", "0"]}], "-", 
                 RowBox[{"6174.45`", " ", "kp", " ", 
                  SubscriptBox["xdes", "0"]}]}], ")"}], " ", 
               SubscriptBox["\[Theta]", "1"]}], "+", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"7128.`", " ", "kv", " ", 
                  SubscriptBox["dx", "0"]}], "-", 
                 RowBox[{"7128.`", " ", "kv", " ", 
                  SubscriptBox["dxdes", "0"]}], "+", 
                 RowBox[{"7128.`", " ", "kp", " ", 
                  SubscriptBox["x", "0"]}], "-", 
                 RowBox[{"7128.`", " ", "kp", " ", 
                  SubscriptBox["xdes", "0"]}]}], ")"}], " ", 
               SubsuperscriptBox["\[Theta]", "1", "2"]}], "+", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"4608.`", " ", "kv", " ", 
                  SubscriptBox["dx", "0"]}], "-", 
                 RowBox[{"4608.`", " ", "kv", " ", 
                  SubscriptBox["dxdes", "0"]}], "+", 
                 RowBox[{"4608.`", " ", "kp", " ", 
                  SubscriptBox["x", "0"]}], "-", 
                 RowBox[{"4608.`", " ", "kp", " ", 
                  SubscriptBox["xdes", "0"]}]}], ")"}], " ", 
               SubsuperscriptBox["\[Theta]", "1", "3"]}]}], ")"}]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddxdes", "0"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "625.6124999999998`"}], "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "3132.449999999999`"}], "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "6174.449999999999`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7127.999999999998`"}], "-", 
                    RowBox[{"4607.999999999999`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
             ")"}]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddx", "0"], " ", 
            RowBox[{"(", 
             RowBox[{"625.6125`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"3132.4499999999916`", "\[VeryThinSpace]", "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"6174.449999999984`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7127.999999999981`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4607.999999999987`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                ")"}]}]}], ")"}]}]}], ")"}]}], "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["\[Theta]", "0"], "]"}], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"-", "625.6125`"}], " ", "kv", " ", 
            SubscriptBox["dx", "1"]}], "+", 
           RowBox[{"625.6125`", " ", "kv", " ", 
            SubscriptBox["dxdes", "1"]}], "-", 
           RowBox[{"625.6125`", " ", "kp", " ", 
            SubscriptBox["x", "1"]}], "+", 
           RowBox[{"625.6125000000001`", " ", "kp", " ", 
            SubscriptBox["xdes", "1"]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddx", "1"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "625.6125`"}], "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "3132.4499999999953`"}], "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "6174.449999999991`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7127.999999999989`"}], "-", 
                    RowBox[{"4607.999999999994`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
             ")"}]}], "+", 
           RowBox[{"ki", " ", 
            SubscriptBox["ddxdes", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"625.6125`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"3132.4500000000003`", "\[VeryThinSpace]", "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"6174.45`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7128.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                ")"}]}]}], ")"}]}], "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"kv", " ", 
               SubscriptBox["dx", "1"], " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"-", "3132.4500000000003`"}], "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "6174.45`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7128.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}], 
              "+", 
              RowBox[{"kv", " ", 
               SubscriptBox["dxdes", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"3132.4500000000003`", "\[VeryThinSpace]", "+", 
                 RowBox[{
                  SubscriptBox["\[Theta]", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"6174.45`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7128.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                ")"}]}], "+", 
              RowBox[{"kp", " ", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{
                  SubscriptBox["x", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{
                    RowBox[{"-", "3132.4500000000003`"}], "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "6174.45`"}], "+", 
                    RowBox[{
                    RowBox[{"(", 
                    RowBox[{
                    RowBox[{"-", "7128.`"}], "-", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}], 
                 "+", 
                 RowBox[{
                  SubscriptBox["xdes", "1"], " ", 
                  RowBox[{"(", 
                   RowBox[{"3132.4500000000003`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"6174.45`", "\[VeryThinSpace]", "+", 
                    RowBox[{
                    SubscriptBox["\[Theta]", "1"], " ", 
                    RowBox[{"(", 
                    RowBox[{"7128.`", "\[VeryThinSpace]", "+", 
                    RowBox[{"4608.`", " ", 
                    SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
                   ")"}]}]}], ")"}]}]}], ")"}]}]}], ")"}]}]}], 
       RowBox[{"78.2015625`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"391.55625`", "\[VeryThinSpace]", "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"771.80625`", "\[VeryThinSpace]", "+", 
              RowBox[{
               SubscriptBox["\[Theta]", "1"], " ", 
               RowBox[{"(", 
                RowBox[{"891.`", "\[VeryThinSpace]", "+", 
                 RowBox[{"576.`", " ", 
                  SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
          ")"}]}]}]]},
     {
      FractionBox[
       RowBox[{"1021.8337500000001`", "\[VeryThinSpace]", "-", 
        RowBox[{"104.26875`", " ", "kv", " ", 
         SubscriptBox["dx", "2"]}], "+", 
        RowBox[{"104.26875`", " ", "kv", " ", 
         SubscriptBox["dxdes", "2"]}], "-", 
        RowBox[{"104.26875`", " ", "kp", " ", 
         SubscriptBox["x", "2"]}], "+", 
        RowBox[{"104.26875`", " ", "kp", " ", 
         SubscriptBox["xdes", "2"]}], "+", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1029.`", "\[VeryThinSpace]", "-", 
           RowBox[{"105.`", " ", "kv", " ", 
            SubscriptBox["dx", "2"]}], "+", 
           RowBox[{"105.`", " ", "kv", " ", 
            SubscriptBox["dxdes", "2"]}], "-", 
           RowBox[{"105.`", " ", "kp", " ", 
            SubscriptBox["x", "2"]}], "+", 
           RowBox[{"105.`", " ", "kp", " ", 
            SubscriptBox["xdes", "2"]}]}], ")"}], " ", 
         SubscriptBox["\[Theta]", "1"]}], "+", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"1881.6000000000001`", "\[VeryThinSpace]", "-", 
           RowBox[{"192.`", " ", "kv", " ", 
            SubscriptBox["dx", "2"]}], "+", 
           RowBox[{"192.`", " ", "kv", " ", 
            SubscriptBox["dxdes", "2"]}], "-", 
           RowBox[{"192.`", " ", "kp", " ", 
            SubscriptBox["x", "2"]}], "+", 
           RowBox[{"192.`", " ", "kp", " ", 
            SubscriptBox["xdes", "2"]}]}], ")"}], " ", 
         SubsuperscriptBox["\[Theta]", "1", "2"]}], "+", 
        RowBox[{"ki", " ", 
         SubscriptBox["ddx", "2"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "104.26875`"}], "+", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", "105.`"}], "-", 
              RowBox[{"192.`", " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}], " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}], "+", 
        RowBox[{"ki", " ", 
         SubscriptBox["ddxdes", "2"], " ", 
         RowBox[{"(", 
          RowBox[{"104.26875`", "\[VeryThinSpace]", "+", 
           RowBox[{
            SubscriptBox["\[Theta]", "1"], " ", 
            RowBox[{"(", 
             RowBox[{"105.`", "\[VeryThinSpace]", "+", 
              RowBox[{"192.`", " ", 
               SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}], ")"}]}]}], 
       RowBox[{"34.75625`", "\[VeryThinSpace]", "+", 
        RowBox[{
         SubscriptBox["\[Theta]", "1"], " ", 
         RowBox[{"(", 
          RowBox[{"35.`", "\[VeryThinSpace]", "+", 
           RowBox[{"64.`", " ", 
            SubscriptBox["\[Theta]", "1"]}]}], ")"}]}]}]]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.551558665212016*^9, 3.5515590684307413`*^9, 3.551559323326819*^9, 
   3.551744679280871*^9, 3.55175441439011*^9, 3.5517544617479763`*^9, 
   3.551832838199898*^9, 3.551833568803195*^9, 3.552099098424971*^9, 
   3.5521024928850393`*^9, 3.5521029089567966`*^9, {3.552103088394081*^9, 
   3.552103102696355*^9}, 3.552103218494383*^9, 3.552103677941731*^9, 
   3.5521037638054867`*^9, {3.552103825193802*^9, 3.5521038376266336`*^9}, 
   3.55214554480138*^9, 3.552145625761869*^9, 3.552148192353429*^9}]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1668, 1027},
WindowMargins->{{26, Automatic}, {Automatic, 0}},
PrivateNotebookOptions->{"VersionedStylesheet"->{"Default.nb"[8.] -> False}},
CellContext->Notebook,
CellLabelAutoDelete->True,
FrontEndVersion->"9.0 for Linux x86 (64-bit) (February 7, 2013)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[400, 13, 4245, 62, 211, "Text"],
Cell[CellGroupData[{
Cell[4670, 79, 3120, 42, 93, "Title"],
Cell[7793, 123, 3732, 54, 111, "Text"],
Cell[CellGroupData[{
Cell[11550, 181, 223, 3, 81, "Section"],
Cell[11776, 186, 3634, 58, 55, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[15447, 249, 3094, 41, 81, "Section"],
Cell[CellGroupData[{
Cell[18566, 294, 3241, 44, 45, "Subsection"],
Cell[21810, 340, 3605, 52, 91, "Text"],
Cell[25418, 394, 3887, 70, 66, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[29342, 469, 3243, 44, 45, "Subsection"],
Cell[32588, 515, 3664, 51, 71, "Text"],
Cell[CellGroupData[{
Cell[36277, 570, 10360, 227, 1023, "Input"],
Cell[46640, 799, 2055, 44, 91, "Output"],
Cell[48698, 845, 2504, 57, 91, "Output"],
Cell[51205, 904, 2590, 59, 91, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[53844, 969, 258, 4, 39, "Subsection"],
Cell[54105, 975, 3037, 44, 29, "Text"],
Cell[57145, 1021, 4668, 102, 186, "Input"],
Cell[61816, 1125, 3627, 55, 155, "Text"],
Cell[CellGroupData[{
Cell[65468, 1184, 4159, 80, 221, "Input"],
Cell[69630, 1266, 3263, 56, 73, "Output"],
Cell[72896, 1324, 3990, 77, 75, "Output"],
Cell[76889, 1403, 3882, 72, 75, "Output"],
Cell[80774, 1477, 3351, 59, 121, "Output"],
Cell[84128, 1538, 4215, 84, 123, "Output"],
Cell[88346, 1624, 3990, 78, 123, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[92385, 1708, 259, 5, 39, "Subsection"],
Cell[92647, 1715, 11916, 283, 863, "Text"],
Cell[104566, 2000, 4049, 102, 264, "Input"],
Cell[CellGroupData[{
Cell[108640, 2106, 251, 3, 28, "Subsubsection"],
Cell[108894, 2111, 3592, 71, 141, "Text"],
Cell[CellGroupData[{
Cell[112511, 2186, 1782, 32, 102, "Input"],
Cell[114296, 2220, 1883, 40, 74, "Output"],
Cell[116182, 2262, 3007, 67, 119, "Output"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[119250, 2336, 236, 3, 39, "Subsection"],
Cell[119489, 2341, 3241, 84, 143, "Text"],
Cell[CellGroupData[{
Cell[122755, 2429, 3763, 86, 273, "Input"],
Cell[126521, 2517, 1847, 36, 73, "Output"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[128429, 2560, 251, 3, 74, "Section"],
Cell[CellGroupData[{
Cell[128705, 2567, 259, 3, 39, "Subsection"],
Cell[128967, 2572, 10023, 270, 450, "Text"],
Cell[CellGroupData[{
Cell[139015, 2846, 2673, 65, 102, "Input"],
Cell[141691, 2913, 4551, 113, 77, "Output"]
}, Open  ]],
Cell[146257, 3029, 574, 10, 47, "Text"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[146880, 3045, 278, 4, 74, "Section"],
Cell[147161, 3051, 1981, 31, 173, "Text"],
Cell[149145, 3084, 1572, 40, 60, "Input"],
Cell[CellGroupData[{
Cell[150742, 3128, 218, 3, 39, "Subsection"],
Cell[150963, 3133, 276, 4, 29, "Text"],
Cell[CellGroupData[{
Cell[151264, 3141, 3535, 81, 314, "Input"],
Cell[154802, 3224, 2219, 49, 75, "Output"],
Cell[157024, 3275, 2331, 55, 123, "Output"]
}, Open  ]],
Cell[159370, 3333, 1237, 29, 65, "Text"],
Cell[160610, 3364, 1438, 33, 155, "Input"],
Cell[162051, 3399, 356, 7, 29, "Text"],
Cell[CellGroupData[{
Cell[162432, 3410, 560, 11, 50, "Input"],
Cell[162995, 3423, 1872, 46, 75, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[164916, 3475, 256, 3, 39, "Subsection"],
Cell[165175, 3480, 20076, 500, 876, "Text"],
Cell[CellGroupData[{
Cell[185276, 3984, 2251, 50, 145, "Input"],
Cell[187530, 4036, 4763, 115, 103, "Output"],
Cell[192296, 4153, 8943, 215, 103, "Output"]
}, Open  ]],
Cell[201254, 4371, 16532, 405, 539, "Text"]
}, Open  ]],
Cell[CellGroupData[{
Cell[217823, 4781, 331, 6, 39, "Subsection"],
Cell[218157, 4789, 2712, 40, 29, "Text"],
Cell[220872, 4831, 3006, 58, 60, "Input"],
Cell[223881, 4891, 8180, 182, 298, "Text"],
Cell[CellGroupData[{
Cell[232086, 5077, 3293, 59, 50, "Input"],
Cell[235382, 5138, 29933, 695, 126, "Output"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

